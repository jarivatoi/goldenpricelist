(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function i(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=i(a);fetch(a.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var e=s.default;if(typeof e=="function"){var i=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(s).forEach(function(o){var a=Object.getOwnPropertyDescriptor(s,o);Object.defineProperty(i,o,a.get?a:{enumerable:!0,get:function(){return s[o]}})}),i}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$1=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$2=Symbol.for("react.fragment"),q$1=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$1=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),z$1=Symbol.iterator;function A$1(s){return s===null||typeof s!="object"?null:(s=z$1&&s[z$1]||s["@@iterator"],typeof s=="function"?s:null)}var B$1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$1=Object.assign,D$1={};function E$1(s,e,i){this.props=s,this.context=e,this.refs=D$1,this.updater=i||B$1}E$1.prototype.isReactComponent={};E$1.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};E$1.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function F(){}F.prototype=E$1.prototype;function G$1(s,e,i){this.props=s,this.context=e,this.refs=D$1,this.updater=i||B$1}var H$1=G$1.prototype=new F;H$1.constructor=G$1;C$1(H$1,E$1.prototype);H$1.isPureReactComponent=!0;var I$1=Array.isArray,J=Object.prototype.hasOwnProperty,K$1={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$1(s,e,i){var o,a={},c=null,d=null;if(e!=null)for(o in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(c=""+e.key),e)J.call(e,o)&&!L$1.hasOwnProperty(o)&&(a[o]=e[o]);var h=arguments.length-2;if(h===1)a.children=i;else if(1<h){for(var g=Array(h),j=0;j<h;j++)g[j]=arguments[j+2];a.children=g}if(s&&s.defaultProps)for(o in h=s.defaultProps,h)a[o]===void 0&&(a[o]=h[o]);return{$$typeof:l$1,type:s,key:c,ref:d,props:a,_owner:K$1.current}}function N$1(s,e){return{$$typeof:l$1,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function O$1(s){return typeof s=="object"&&s!==null&&s.$$typeof===l$1}function escape(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(i){return e[i]})}var P$1=/\/+/g;function Q$1(s,e){return typeof s=="object"&&s!==null&&s.key!=null?escape(""+s.key):e.toString(36)}function R$1(s,e,i,o,a){var c=typeof s;(c==="undefined"||c==="boolean")&&(s=null);var d=!1;if(s===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(s.$$typeof){case l$1:case n$1:d=!0}}if(d)return d=s,a=a(d),s=o===""?"."+Q$1(d,0):o,I$1(a)?(i="",s!=null&&(i=s.replace(P$1,"$&/")+"/"),R$1(a,e,i,"",function(j){return j})):a!=null&&(O$1(a)&&(a=N$1(a,i+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(P$1,"$&/")+"/")+s)),e.push(a)),1;if(d=0,o=o===""?".":o+":",I$1(s))for(var h=0;h<s.length;h++){c=s[h];var g=o+Q$1(c,h);d+=R$1(c,e,i,g,a)}else if(g=A$1(s),typeof g=="function")for(s=g.call(s),h=0;!(c=s.next()).done;)c=c.value,g=o+Q$1(c,h++),d+=R$1(c,e,i,g,a);else if(c==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function S$1(s,e,i){if(s==null)return s;var o=[],a=0;return R$1(s,o,"","",function(c){return e.call(i,c,a++)}),o}function T$1(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(i){(s._status===0||s._status===-1)&&(s._status=1,s._result=i)},function(i){(s._status===0||s._status===-1)&&(s._status=2,s._result=i)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var U$1={current:null},V$1={transition:null},W$1={ReactCurrentDispatcher:U$1,ReactCurrentBatchConfig:V$1,ReactCurrentOwner:K$1};function X$2(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$1,forEach:function(s,e,i){S$1(s,function(){e.apply(this,arguments)},i)},count:function(s){var e=0;return S$1(s,function(){e++}),e},toArray:function(s){return S$1(s,function(e){return e})||[]},only:function(s){if(!O$1(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};react_production_min.Component=E$1;react_production_min.Fragment=p$2;react_production_min.Profiler=r;react_production_min.PureComponent=G$1;react_production_min.StrictMode=q$1;react_production_min.Suspense=w;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$1;react_production_min.act=X$2;react_production_min.cloneElement=function(s,e,i){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var o=C$1({},s.props),a=s.key,c=s.ref,d=s._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,d=K$1.current),e.key!==void 0&&(a=""+e.key),s.type&&s.type.defaultProps)var h=s.type.defaultProps;for(g in e)J.call(e,g)&&!L$1.hasOwnProperty(g)&&(o[g]=e[g]===void 0&&h!==void 0?h[g]:e[g])}var g=arguments.length-2;if(g===1)o.children=i;else if(1<g){h=Array(g);for(var j=0;j<g;j++)h[j]=arguments[j+2];o.children=h}return{$$typeof:l$1,type:s.type,key:a,ref:c,props:o,_owner:d}};react_production_min.createContext=function(s){return s={$$typeof:u,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:t,_context:s},s.Consumer=s};react_production_min.createElement=M$1;react_production_min.createFactory=function(s){var e=M$1.bind(null,s);return e.type=s,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(s){return{$$typeof:v$1,render:s}};react_production_min.isValidElement=O$1;react_production_min.lazy=function(s){return{$$typeof:y,_payload:{_status:-1,_result:s},_init:T$1}};react_production_min.memo=function(s,e){return{$$typeof:x,type:s,compare:e===void 0?null:e}};react_production_min.startTransition=function(s){var e=V$1.transition;V$1.transition={};try{s()}finally{V$1.transition=e}};react_production_min.unstable_act=X$2;react_production_min.useCallback=function(s,e){return U$1.current.useCallback(s,e)};react_production_min.useContext=function(s){return U$1.current.useContext(s)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(s){return U$1.current.useDeferredValue(s)};react_production_min.useEffect=function(s,e){return U$1.current.useEffect(s,e)};react_production_min.useId=function(){return U$1.current.useId()};react_production_min.useImperativeHandle=function(s,e,i){return U$1.current.useImperativeHandle(s,e,i)};react_production_min.useInsertionEffect=function(s,e){return U$1.current.useInsertionEffect(s,e)};react_production_min.useLayoutEffect=function(s,e){return U$1.current.useLayoutEffect(s,e)};react_production_min.useMemo=function(s,e){return U$1.current.useMemo(s,e)};react_production_min.useReducer=function(s,e,i){return U$1.current.useReducer(s,e,i)};react_production_min.useRef=function(s){return U$1.current.useRef(s)};react_production_min.useState=function(s){return U$1.current.useState(s)};react_production_min.useSyncExternalStore=function(s,e,i){return U$1.current.useSyncExternalStore(s,e,i)};react_production_min.useTransition=function(){return U$1.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k=Symbol.for("react.element"),l=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$1={key:!0,ref:!0,__self:!0,__source:!0};function q(s,e,i){var o,a={},c=null,d=null;i!==void 0&&(c=""+i),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(d=e.ref);for(o in e)m$1.call(e,o)&&!p$1.hasOwnProperty(o)&&(a[o]=e[o]);if(s&&s.defaultProps)for(o in e=s.defaultProps,e)a[o]===void 0&&(a[o]=e[o]);return{$$typeof:k,type:s,key:c,ref:d,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l;reactJsxRuntime_production_min.jsx=q;reactJsxRuntime_production_min.jsxs=q;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(ut,gt){var ft=ut.length;ut.push(gt);e:for(;0<ft;){var wt=ft-1>>>1,bt=ut[wt];if(0<a(bt,gt))ut[wt]=gt,ut[ft]=bt,ft=wt;else break e}}function i(ut){return ut.length===0?null:ut[0]}function o(ut){if(ut.length===0)return null;var gt=ut[0],ft=ut.pop();if(ft!==gt){ut[0]=ft;e:for(var wt=0,bt=ut.length,Lt=bt>>>1;wt<Lt;){var It=2*(wt+1)-1,At=ut[It],Rt=It+1,Pt=ut[Rt];if(0>a(At,ft))Rt<bt&&0>a(Pt,At)?(ut[wt]=Pt,ut[Rt]=ft,wt=Rt):(ut[wt]=At,ut[It]=ft,wt=It);else if(Rt<bt&&0>a(Pt,ft))ut[wt]=Pt,ut[Rt]=ft,wt=Rt;else break e}}return gt}function a(ut,gt){var ft=ut.sortIndex-gt.sortIndex;return ft!==0?ft:ut.id-gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;s.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();s.unstable_now=function(){return d.now()-h}}var g=[],j=[],_=1,$=null,tt=3,it=!1,st=!1,nt=!1,at=typeof setTimeout=="function"?setTimeout:null,et=typeof clearTimeout=="function"?clearTimeout:null,_e=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ut){for(var gt=i(j);gt!==null;){if(gt.callback===null)o(j);else if(gt.startTime<=ut)o(j),gt.sortIndex=gt.expirationTime,e(g,gt);else break;gt=i(j)}}function rt(ut){if(nt=!1,b(ut),!st)if(i(g)!==null)st=!0,yt(lt);else{var gt=i(j);gt!==null&&Et(rt,gt.startTime-ut)}}function lt(ut,gt){st=!1,nt&&(nt=!1,et(ht),ht=-1),it=!0;var ft=tt;try{for(b(gt),$=i(g);$!==null&&(!($.expirationTime>gt)||ut&&!xt());){var wt=$.callback;if(typeof wt=="function"){$.callback=null,tt=$.priorityLevel;var bt=wt($.expirationTime<=gt);gt=s.unstable_now(),typeof bt=="function"?$.callback=bt:$===i(g)&&o(g),b(gt)}else o(g);$=i(g)}if($!==null)var Lt=!0;else{var It=i(j);It!==null&&Et(rt,It.startTime-gt),Lt=!1}return Lt}finally{$=null,tt=ft,it=!1}}var ot=!1,dt=null,ht=-1,pt=5,mt=-1;function xt(){return!(s.unstable_now()-mt<pt)}function ct(){if(dt!==null){var ut=s.unstable_now();mt=ut;var gt=!0;try{gt=dt(!0,ut)}finally{gt?vt():(ot=!1,dt=null)}}else ot=!1}var vt;if(typeof _e=="function")vt=function(){_e(ct)};else if(typeof MessageChannel<"u"){var _t=new MessageChannel,jt=_t.port2;_t.port1.onmessage=ct,vt=function(){jt.postMessage(null)}}else vt=function(){at(ct,0)};function yt(ut){dt=ut,ot||(ot=!0,vt())}function Et(ut,gt){ht=at(function(){ut(s.unstable_now())},gt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(ut){ut.callback=null},s.unstable_continueExecution=function(){st||it||(st=!0,yt(lt))},s.unstable_forceFrameRate=function(ut){0>ut||125<ut?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pt=0<ut?Math.floor(1e3/ut):5},s.unstable_getCurrentPriorityLevel=function(){return tt},s.unstable_getFirstCallbackNode=function(){return i(g)},s.unstable_next=function(ut){switch(tt){case 1:case 2:case 3:var gt=3;break;default:gt=tt}var ft=tt;tt=gt;try{return ut()}finally{tt=ft}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(ut,gt){switch(ut){case 1:case 2:case 3:case 4:case 5:break;default:ut=3}var ft=tt;tt=ut;try{return gt()}finally{tt=ft}},s.unstable_scheduleCallback=function(ut,gt,ft){var wt=s.unstable_now();switch(typeof ft=="object"&&ft!==null?(ft=ft.delay,ft=typeof ft=="number"&&0<ft?wt+ft:wt):ft=wt,ut){case 1:var bt=-1;break;case 2:bt=250;break;case 5:bt=1073741823;break;case 4:bt=1e4;break;default:bt=5e3}return bt=ft+bt,ut={id:_++,callback:gt,priorityLevel:ut,startTime:ft,expirationTime:bt,sortIndex:-1},ft>wt?(ut.sortIndex=ft,e(j,ut),i(g)===null&&ut===i(j)&&(nt?(et(ht),ht=-1):nt=!0,Et(rt,ft-wt))):(ut.sortIndex=bt,e(g,ut),st||it||(st=!0,yt(lt))),ut},s.unstable_shouldYield=xt,s.unstable_wrapCallback=function(ut){var gt=tt;return function(){var ft=tt;tt=gt;try{return ut.apply(this,arguments)}finally{tt=ft}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(s,e){ha(s,e),ha(s+"Capture",e)}function ha(s,e){for(ea[s]=e,s=0;s<e.length;s++)da.add(e[s])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(s){return ja.call(ma,s)?!0:ja.call(la,s)?!1:ka.test(s)?ma[s]=!0:(la[s]=!0,!1)}function pa(s,e,i,o){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:i!==null?!i.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function qa(s,e,i,o){if(e===null||typeof e>"u"||pa(s,e,i,o))return!0;if(o)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v(s,e,i,o,a,c,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=i,this.propertyName=s,this.type=e,this.sanitizeURL=c,this.removeEmptyString=d}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){z[s]=new v(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];z[e]=new v(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){z[s]=new v(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){z[s]=new v(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){z[s]=new v(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){z[s]=new v(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){z[s]=new v(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){z[s]=new v(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){z[s]=new v(s,5,!1,s.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(ra,sa);z[e]=new v(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){z[s]=new v(s,1,!1,s.toLowerCase(),null,!1,!1)});z.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){z[s]=new v(s,1,!1,s.toLowerCase(),null,!0,!0)});function ta(s,e,i,o){var a=z.hasOwnProperty(e)?z[e]:null;(a!==null?a.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,i,a,o)&&(i=null),o||a===null?oa(e)&&(i===null?s.removeAttribute(e):s.setAttribute(e,""+i)):a.mustUseProperty?s[a.propertyName]=i===null?a.type===3?!1:"":i:(e=a.attributeName,o=a.attributeNamespace,i===null?s.removeAttribute(e):(a=a.type,i=a===3||a===4&&i===!0?"":""+i,o?s.setAttributeNS(o,e,i):s.setAttribute(e,i))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(s){return s===null||typeof s!="object"?null:(s=Ja&&s[Ja]||s["@@iterator"],typeof s=="function"?s:null)}var A=Object.assign,La;function Ma(s){if(La===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+s}var Na=!1;function Oa(s,e){if(!s||Na)return"";Na=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(j){var o=j}Reflect.construct(s,[],e)}else{try{e.call()}catch(j){o=j}s.call(e.prototype)}else{try{throw Error()}catch(j){o=j}s()}}catch(j){if(j&&o&&typeof j.stack=="string"){for(var a=j.stack.split(`
`),c=o.stack.split(`
`),d=a.length-1,h=c.length-1;1<=d&&0<=h&&a[d]!==c[h];)h--;for(;1<=d&&0<=h;d--,h--)if(a[d]!==c[h]){if(d!==1||h!==1)do if(d--,h--,0>h||a[d]!==c[h]){var g=`
`+a[d].replace(" at new "," at ");return s.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",s.displayName)),g}while(1<=d&&0<=h);break}}}finally{Na=!1,Error.prepareStackTrace=i}return(s=s?s.displayName||s.name:"")?Ma(s):""}function Pa(s){switch(s.tag){case 5:return Ma(s.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return s=Oa(s.type,!1),s;case 11:return s=Oa(s.type.render,!1),s;case 1:return s=Oa(s.type,!0),s;default:return""}}function Qa(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Ca:return(s.displayName||"Context")+".Consumer";case Ba:return(s._context.displayName||"Context")+".Provider";case Da:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ga:return e=s.displayName||null,e!==null?e:Qa(s.type)||"Memo";case Ha:e=s._payload,s=s._init;try{return Qa(s(e))}catch{}}return null}function Ra(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ta(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(s){var e=Ta(s)?"checked":"value",i=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),o=""+s[e];if(!s.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var a=i.get,c=i.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,c.call(this,d)}}),Object.defineProperty(s,e,{enumerable:i.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function Va(s){s._valueTracker||(s._valueTracker=Ua(s))}function Wa(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var i=e.getValue(),o="";return s&&(o=Ta(s)?s.checked?"true":"false":s.value),s=o,s!==i?(e.setValue(s),!0):!1}function Xa(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ya(s,e){var i=e.checked;return A({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??s._wrapperState.initialChecked})}function Za(s,e){var i=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;i=Sa(e.value!=null?e.value:i),s._wrapperState={initialChecked:o,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(s,e){e=e.checked,e!=null&&ta(s,"checked",e,!1)}function bb(s,e){ab(s,e);var i=Sa(e.value),o=e.type;if(i!=null)o==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+i):s.value!==""+i&&(s.value=""+i);else if(o==="submit"||o==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?cb(s,e.type,i):e.hasOwnProperty("defaultValue")&&cb(s,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function db(s,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,i||e===s.value||(s.value=e),s.defaultValue=e}i=s.name,i!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,i!==""&&(s.name=i)}function cb(s,e,i){(e!=="number"||Xa(s.ownerDocument)!==s)&&(i==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+i&&(s.defaultValue=""+i))}var eb=Array.isArray;function fb(s,e,i,o){if(s=s.options,e){e={};for(var a=0;a<i.length;a++)e["$"+i[a]]=!0;for(i=0;i<s.length;i++)a=e.hasOwnProperty("$"+s[i].value),s[i].selected!==a&&(s[i].selected=a),a&&o&&(s[i].defaultSelected=!0)}else{for(i=""+Sa(i),e=null,a=0;a<s.length;a++){if(s[a].value===i){s[a].selected=!0,o&&(s[a].defaultSelected=!0);return}e!==null||s[a].disabled||(e=s[a])}e!==null&&(e.selected=!0)}}function gb(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p(91));return A({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function hb(s,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(p(92));if(eb(i)){if(1<i.length)throw Error(p(93));i=i[0]}e=i}e==null&&(e=""),i=e}s._wrapperState={initialValue:Sa(i)}}function ib(s,e){var i=Sa(e.value),o=Sa(e.defaultValue);i!=null&&(i=""+i,i!==s.value&&(s.value=i),e.defaultValue==null&&s.defaultValue!==i&&(s.defaultValue=i)),o!=null&&(s.defaultValue=""+o)}function jb(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function kb(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?kb(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var mb,nb=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,o,a){MSApp.execUnsafeLocalFunction(function(){return s(e,i,o,a)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function ob(s,e){if(e){var i=s.firstChild;if(i&&i===s.lastChild&&i.nodeType===3){i.nodeValue=e;return}}s.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(s){qb.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),pb[e]=pb[s]})});function rb(s,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||pb.hasOwnProperty(s)&&pb[s]?(""+e).trim():e+"px"}function sb(s,e){s=s.style;for(var i in e)if(e.hasOwnProperty(i)){var o=i.indexOf("--")===0,a=rb(i,e[i],o);i==="float"&&(i="cssFloat"),o?s.setProperty(i,a):s[i]=a}}var tb=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(s,e){if(e){if(tb[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p(62))}}function vb(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var yb=null,zb=null,Ab=null;function Bb(s){if(s=Cb(s)){if(typeof yb!="function")throw Error(p(280));var e=s.stateNode;e&&(e=Db(e),yb(s.stateNode,s.type,e))}}function Eb(s){zb?Ab?Ab.push(s):Ab=[s]:zb=s}function Fb(){if(zb){var s=zb,e=Ab;if(Ab=zb=null,Bb(s),e)for(s=0;s<e.length;s++)Bb(e[s])}}function Gb(s,e){return s(e)}function Hb(){}var Ib=!1;function Jb(s,e,i){if(Ib)return s(e,i);Ib=!0;try{return Gb(s,e,i)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(s,e){var i=s.stateNode;if(i===null)return null;var o=Db(i);if(o===null)return null;i=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(s=s.type,o=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!o;break e;default:s=!1}if(s)return null;if(i&&typeof i!="function")throw Error(p(231,e,typeof i));return i}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(s,e,i,o,a,c,d,h,g){var j=Array.prototype.slice.call(arguments,3);try{e.apply(i,j)}catch(_){this.onError(_)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(s){Ob=!0,Pb=s}};function Tb(s,e,i,o,a,c,d,h,g){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(s,e,i,o,a,c,d,h,g){if(Tb.apply(this,arguments),Ob){if(Ob){var j=Pb;Ob=!1,Pb=null}else throw Error(p(198));Qb||(Qb=!0,Rb=j)}}function Vb(s){var e=s,i=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(i=e.return),s=e.return;while(s)}return e.tag===3?i:null}function Wb(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(s){if(Vb(s)!==s)throw Error(p(188))}function Yb(s){var e=s.alternate;if(!e){if(e=Vb(s),e===null)throw Error(p(188));return e!==s?null:s}for(var i=s,o=e;;){var a=i.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){i=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===i)return Xb(a),s;if(c===o)return Xb(a),e;c=c.sibling}throw Error(p(188))}if(i.return!==o.return)i=a,o=c;else{for(var d=!1,h=a.child;h;){if(h===i){d=!0,i=a,o=c;break}if(h===o){d=!0,o=a,i=c;break}h=h.sibling}if(!d){for(h=c.child;h;){if(h===i){d=!0,i=c,o=a;break}if(h===o){d=!0,o=c,i=a;break}h=h.sibling}if(!d)throw Error(p(189))}}if(i.alternate!==o)throw Error(p(190))}if(i.tag!==3)throw Error(p(188));return i.stateNode.current===i?s:e}function Zb(s){return s=Yb(s),s!==null?$b(s):null}function $b(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=$b(s);if(e!==null)return e;s=s.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(s){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,s,void 0,(s.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(s){return s>>>=0,s===0?32:31-(pc(s)/qc|0)|0}var rc=64,sc=4194304;function tc(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function uc(s,e){var i=s.pendingLanes;if(i===0)return 0;var o=0,a=s.suspendedLanes,c=s.pingedLanes,d=i&268435455;if(d!==0){var h=d&~a;h!==0?o=tc(h):(c&=d,c!==0&&(o=tc(c)))}else d=i&~a,d!==0?o=tc(d):c!==0&&(o=tc(c));if(o===0)return 0;if(e!==0&&e!==o&&!(e&a)&&(a=o&-o,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(o&4&&(o|=i&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=o;0<e;)i=31-oc(e),a=1<<i,o|=s[i],e&=~a;return o}function vc(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(s,e){for(var i=s.suspendedLanes,o=s.pingedLanes,a=s.expirationTimes,c=s.pendingLanes;0<c;){var d=31-oc(c),h=1<<d,g=a[d];g===-1?(!(h&i)||h&o)&&(a[d]=vc(h,e)):g<=e&&(s.expiredLanes|=h),c&=~h}}function xc(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function yc(){var s=rc;return rc<<=1,!(rc&4194240)&&(rc=64),s}function zc(s){for(var e=[],i=0;31>i;i++)e.push(s);return e}function Ac(s,e,i){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-oc(e),s[e]=i}function Bc(s,e){var i=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var o=s.eventTimes;for(s=s.expirationTimes;0<i;){var a=31-oc(i),c=1<<a;e[a]=0,o[a]=-1,s[a]=-1,i&=~c}}function Cc(s,e){var i=s.entangledLanes|=e;for(s=s.entanglements;i;){var o=31-oc(i),a=1<<o;a&e|s[o]&e&&(s[o]|=e),i&=~a}}var C=0;function Dc(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(s,e){switch(s){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(s,e,i,o,a,c){return s===null||s.nativeEvent!==c?(s={blockedOn:e,domEventName:i,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),s):(s.eventSystemFlags|=o,e=s.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),s)}function Uc(s,e,i,o,a){switch(e){case"focusin":return Lc=Tc(Lc,s,e,i,o,a),!0;case"dragenter":return Mc=Tc(Mc,s,e,i,o,a),!0;case"mouseover":return Nc=Tc(Nc,s,e,i,o,a),!0;case"pointerover":var c=a.pointerId;return Oc.set(c,Tc(Oc.get(c)||null,s,e,i,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc.set(c,Tc(Pc.get(c)||null,s,e,i,o,a)),!0}return!1}function Vc(s){var e=Wc(s.target);if(e!==null){var i=Vb(e);if(i!==null){if(e=i.tag,e===13){if(e=Wb(i),e!==null){s.blockedOn=e,Ic(s.priority,function(){Gc(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){s.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Xc(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var i=Yc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(i===null){i=s.nativeEvent;var o=new i.constructor(i.type,i);wb=o,i.target.dispatchEvent(o),wb=null}else return e=Cb(i),e!==null&&Fc(e),s.blockedOn=i,!1;e.shift()}return!0}function Zc(s,e,i){Xc(s)&&i.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(s,e){s.blockedOn===e&&(s.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(s){function e(a){return ad(a,s)}if(0<Kc.length){ad(Kc[0],s);for(var i=1;i<Kc.length;i++){var o=Kc[i];o.blockedOn===s&&(o.blockedOn=null)}}for(Lc!==null&&ad(Lc,s),Mc!==null&&ad(Mc,s),Nc!==null&&ad(Nc,s),Oc.forEach(e),Pc.forEach(e),i=0;i<Qc.length;i++)o=Qc[i],o.blockedOn===s&&(o.blockedOn=null);for(;0<Qc.length&&(i=Qc[0],i.blockedOn===null);)Vc(i),i.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(s,e,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=1,fd(s,e,i,o)}finally{C=a,cd.transition=c}}function gd(s,e,i,o){var a=C,c=cd.transition;cd.transition=null;try{C=4,fd(s,e,i,o)}finally{C=a,cd.transition=c}}function fd(s,e,i,o){if(dd){var a=Yc(s,e,i,o);if(a===null)hd(s,e,o,id,i),Sc(s,o);else if(Uc(a,s,e,i,o))o.stopPropagation();else if(Sc(s,o),e&4&&-1<Rc.indexOf(s)){for(;a!==null;){var c=Cb(a);if(c!==null&&Ec(c),c=Yc(s,e,i,o),c===null&&hd(s,e,o,id,i),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd(s,e,o,null,i)}}var id=null;function Yc(s,e,i,o){if(id=null,s=xb(o),s=Wc(s),s!==null)if(e=Vb(s),e===null)s=null;else if(i=e.tag,i===13){if(s=Wb(e),s!==null)return s;s=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return id=s,null}function jd(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var s,e=ld,i=e.length,o,a="value"in kd?kd.value:kd.textContent,c=a.length;for(s=0;s<i&&e[s]===a[s];s++);var d=i-s;for(o=1;o<=d&&e[i-o]===a[c-o];o++);return md=a.slice(s,1<o?1-o:void 0)}function od(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function pd(){return!0}function qd(){return!1}function rd(s){function e(i,o,a,c,d){this._reactName=i,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var h in s)s.hasOwnProperty(h)&&(i=s[h],this[h]=i?i(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==yd&&(yd&&s.type==="mousemove"?(wd=s.screenX-yd.screenX,xd=s.screenY-yd.screenY):xd=wd=0,yd=s),wd)},movementY:function(s){return"movementY"in s?s.movementY:xd}}),Bd=rd(Ad),Cd=A({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A({},sd,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=Od[s])?!!e[s]:!1}function zd(){return Pd}var Qd=A({},ud,{key:function(s){if(s.key){var e=Md[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=od(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Nd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(s){return s.type==="keypress"?od(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?od(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Rd=rd(Qd),Sd=A({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A({},Ad,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be=null;ia&&"documentMode"in document&&(be=document.documentMode);var ce=ia&&"TextEvent"in window&&!be,de=ia&&(!ae||be&&8<be&&11>=be),ee=" ",fe=!1;function ge(s,e){switch(s){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ie=!1;function je(s,e){switch(s){case"compositionend":return he(e);case"keypress":return e.which!==32?null:(fe=!0,ee);case"textInput":return s=e.data,s===ee&&fe?null:s;default:return null}}function ke(s,e){if(ie)return s==="compositionend"||!ae&&ge(s,e)?(s=nd(),md=ld=kd=null,ie=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!le[s.type]:e==="textarea"}function ne(s,e,i,o){Eb(o),e=oe(e,"onChange"),0<e.length&&(i=new td("onChange","change",null,i,o),s.push({event:i,listeners:e}))}var pe=null,qe=null;function re(s){se(s,0)}function te(s){var e=ue(s);if(Wa(e))return s}function ve(s,e){if(s==="change")return e}var we=!1;if(ia){var xe;if(ia){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe&&(pe.detachEvent("onpropertychange",Be),qe=pe=null)}function Be(s){if(s.propertyName==="value"&&te(qe)){var e=[];ne(e,qe,s,xb(s)),Jb(re,e)}}function Ce(s,e,i){s==="focusin"?(Ae(),pe=e,qe=i,pe.attachEvent("onpropertychange",Be)):s==="focusout"&&Ae()}function De(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return te(qe)}function Ee(s,e){if(s==="click")return te(e)}function Fe(s,e){if(s==="input"||s==="change")return te(e)}function Ge(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(s,e){if(He(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var i=Object.keys(s),o=Object.keys(e);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var a=i[o];if(!ja.call(e,a)||!He(s[a],e[a]))return!1}return!0}function Je(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ke(s,e){var i=Je(s);s=0;for(var o;i;){if(i.nodeType===3){if(o=s+i.textContent.length,s<=e&&o>=e)return{node:i,offset:e-s};s=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Je(i)}}function Le(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?Le(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var s=window,e=Xa();e instanceof s.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)s=e.contentWindow;else break;e=Xa(s.document)}return e}function Ne(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function Oe(s){var e=Me(),i=s.focusedElem,o=s.selectionRange;if(e!==i&&i&&i.ownerDocument&&Le(i.ownerDocument.documentElement,i)){if(o!==null&&Ne(i)){if(e=o.start,s=o.end,s===void 0&&(s=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(s,i.value.length);else if(s=(e=i.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var a=i.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!s.extend&&c>o&&(a=o,o=c,c=a),a=Ke(i,c);var d=Ke(i,o);a&&d&&(s.rangeCount!==1||s.anchorNode!==a.node||s.anchorOffset!==a.offset||s.focusNode!==d.node||s.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),s.removeAllRanges(),c>o?(s.addRange(e),s.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),s.addRange(e)))}}for(e=[],s=i;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)s=e[i],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(s,e,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie(Se,o)||(Se=o,o=oe(Re,"onSelect"),0<o.length&&(e=new td("onSelect","select",null,e,i),s.push({event:e,listeners:o}),e.target=Qe)))}function Ve(s,e){var i={};return i[s.toLowerCase()]=e.toLowerCase(),i["Webkit"+s]="webkit"+e,i["Moz"+s]="moz"+e,i}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(s){if(Xe[s])return Xe[s];if(!We[s])return s;var e=We[s],i;for(i in e)if(e.hasOwnProperty(i)&&i in Ye)return Xe[s]=e[i];return s}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(s,e){df.set(s,e),fa(e,[s])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(s,e,i){var o=s.type||"unknown-event";s.currentTarget=i,Ub(o,e,void 0,s),s.currentTarget=null}function se(s,e){e=(e&4)!==0;for(var i=0;i<s.length;i++){var o=s[i],a=o.event;o=o.listeners;e:{var c=void 0;if(e)for(var d=o.length-1;0<=d;d--){var h=o[d],g=h.instance,j=h.currentTarget;if(h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,j),c=g}else for(d=0;d<o.length;d++){if(h=o[d],g=h.instance,j=h.currentTarget,h=h.listener,g!==c&&a.isPropagationStopped())break e;nf(a,h,j),c=g}}}if(Qb)throw s=Rb,Qb=!1,Rb=null,s}function D(s,e){var i=e[of];i===void 0&&(i=e[of]=new Set);var o=s+"__bubble";i.has(o)||(pf(e,s,2,!1),i.add(o))}function qf(s,e,i){var o=0;e&&(o|=4),pf(i,s,o,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(s){if(!s[rf]){s[rf]=!0,da.forEach(function(i){i!=="selectionchange"&&(mf.has(i)||qf(i,!1,s),qf(i,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(s,e,i,o){switch(jd(e)){case 1:var a=ed;break;case 4:a=gd;break;default:a=fd}i=a.bind(null,e,i,s),a=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),o?a!==void 0?s.addEventListener(e,i,{capture:!0,passive:a}):s.addEventListener(e,i,!0):a!==void 0?s.addEventListener(e,i,{passive:a}):s.addEventListener(e,i,!1)}function hd(s,e,i,o,a){var c=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var h=o.stateNode.containerInfo;if(h===a||h.nodeType===8&&h.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;d=d.return}for(;h!==null;){if(d=Wc(h),d===null)return;if(g=d.tag,g===5||g===6){o=c=d;continue e}h=h.parentNode}}o=o.return}Jb(function(){var j=c,_=xb(i),$=[];e:{var tt=df.get(s);if(tt!==void 0){var it=td,st=s;switch(s){case"keypress":if(od(i)===0)break e;case"keydown":case"keyup":it=Rd;break;case"focusin":st="focus",it=Fd;break;case"focusout":st="blur",it=Fd;break;case"beforeblur":case"afterblur":it=Fd;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=Vd;break;case $e:case af:case bf:it=Hd;break;case cf:it=Xd;break;case"scroll":it=vd;break;case"wheel":it=Zd;break;case"copy":case"cut":case"paste":it=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Td}var nt=(e&4)!==0,at=!nt&&s==="scroll",et=nt?tt!==null?tt+"Capture":null:tt;nt=[];for(var _e=j,b;_e!==null;){b=_e;var rt=b.stateNode;if(b.tag===5&&rt!==null&&(b=rt,et!==null&&(rt=Kb(_e,et),rt!=null&&nt.push(tf(_e,rt,b)))),at)break;_e=_e.return}0<nt.length&&(tt=new it(tt,st,null,i,_),$.push({event:tt,listeners:nt}))}}if(!(e&7)){e:{if(tt=s==="mouseover"||s==="pointerover",it=s==="mouseout"||s==="pointerout",tt&&i!==wb&&(st=i.relatedTarget||i.fromElement)&&(Wc(st)||st[uf]))break e;if((it||tt)&&(tt=_.window===_?_:(tt=_.ownerDocument)?tt.defaultView||tt.parentWindow:window,it?(st=i.relatedTarget||i.toElement,it=j,st=st?Wc(st):null,st!==null&&(at=Vb(st),st!==at||st.tag!==5&&st.tag!==6)&&(st=null)):(it=null,st=j),it!==st)){if(nt=Bd,rt="onMouseLeave",et="onMouseEnter",_e="mouse",(s==="pointerout"||s==="pointerover")&&(nt=Td,rt="onPointerLeave",et="onPointerEnter",_e="pointer"),at=it==null?tt:ue(it),b=st==null?tt:ue(st),tt=new nt(rt,_e+"leave",it,i,_),tt.target=at,tt.relatedTarget=b,rt=null,Wc(_)===j&&(nt=new nt(et,_e+"enter",st,i,_),nt.target=b,nt.relatedTarget=at,rt=nt),at=rt,it&&st)t:{for(nt=it,et=st,_e=0,b=nt;b;b=vf(b))_e++;for(b=0,rt=et;rt;rt=vf(rt))b++;for(;0<_e-b;)nt=vf(nt),_e--;for(;0<b-_e;)et=vf(et),b--;for(;_e--;){if(nt===et||et!==null&&nt===et.alternate)break t;nt=vf(nt),et=vf(et)}nt=null}else nt=null;it!==null&&wf($,tt,it,nt,!1),st!==null&&at!==null&&wf($,at,st,nt,!0)}}e:{if(tt=j?ue(j):window,it=tt.nodeName&&tt.nodeName.toLowerCase(),it==="select"||it==="input"&&tt.type==="file")var lt=ve;else if(me(tt))if(we)lt=Fe;else{lt=De;var ot=Ce}else(it=tt.nodeName)&&it.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(lt=Ee);if(lt&&(lt=lt(s,j))){ne($,lt,i,_);break e}ot&&ot(s,tt,j),s==="focusout"&&(ot=tt._wrapperState)&&ot.controlled&&tt.type==="number"&&cb(tt,"number",tt.value)}switch(ot=j?ue(j):window,s){case"focusin":(me(ot)||ot.contentEditable==="true")&&(Qe=ot,Re=j,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue($,i,_);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue($,i,_)}var dt;if(ae)e:{switch(s){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else ie?ge(s,i)&&(ht="onCompositionEnd"):s==="keydown"&&i.keyCode===229&&(ht="onCompositionStart");ht&&(de&&i.locale!=="ko"&&(ie||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&ie&&(dt=nd()):(kd=_,ld="value"in kd?kd.value:kd.textContent,ie=!0)),ot=oe(j,ht),0<ot.length&&(ht=new Ld(ht,s,null,i,_),$.push({event:ht,listeners:ot}),dt?ht.data=dt:(dt=he(i),dt!==null&&(ht.data=dt)))),(dt=ce?je(s,i):ke(s,i))&&(j=oe(j,"onBeforeInput"),0<j.length&&(_=new Ld("onBeforeInput","beforeinput",null,i,_),$.push({event:_,listeners:j}),_.data=dt))}se($,e)})}function tf(s,e,i){return{instance:s,listener:e,currentTarget:i}}function oe(s,e){for(var i=e+"Capture",o=[];s!==null;){var a=s,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb(s,i),c!=null&&o.unshift(tf(s,c,a)),c=Kb(s,e),c!=null&&o.push(tf(s,c,a))),s=s.return}return o}function vf(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function wf(s,e,i,o,a){for(var c=e._reactName,d=[];i!==null&&i!==o;){var h=i,g=h.alternate,j=h.stateNode;if(g!==null&&g===o)break;h.tag===5&&j!==null&&(h=j,a?(g=Kb(i,c),g!=null&&d.unshift(tf(i,g,h))):a||(g=Kb(i,c),g!=null&&d.push(tf(i,g,h)))),i=i.return}d.length!==0&&s.push({event:e,listeners:d})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(s){return(typeof s=="string"?s:""+s).replace(xf,`
`).replace(yf,"")}function Af(s,e,i){if(e=zf(e),zf(s)!==e&&i)throw Error(p(425))}function Bf(){}var Cf=null,Df=null;function Ef(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(s){return Hf.resolve(null).then(s).catch(If)}:Ff;function If(s){setTimeout(function(){throw s})}function Kf(s,e){var i=e,o=0;do{var a=i.nextSibling;if(s.removeChild(i),a&&a.nodeType===8)if(i=a.data,i==="/$"){if(o===0){s.removeChild(a),bd(e);return}o--}else i!=="$"&&i!=="$?"&&i!=="$!"||o++;i=a}while(i);bd(e)}function Lf(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function Mf(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var i=s.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return s;e--}else i==="/$"&&e++}s=s.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(s){var e=s[Of];if(e)return e;for(var i=s.parentNode;i;){if(e=i[uf]||i[Of]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(s=Mf(s);s!==null;){if(i=s[Of])return i;s=Mf(s)}return e}s=i,i=s.parentNode}return null}function Cb(s){return s=s[Of]||s[uf],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function ue(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(p(33))}function Db(s){return s[Pf]||null}var Sf=[],Tf=-1;function Uf(s){return{current:s}}function E(s){0>Tf||(s.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G(s,e){Tf++,Sf[Tf]=s.current,s.current=e}var Vf={},H=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(s,e){var i=s.type.contextTypes;if(!i)return Vf;var o=s.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in i)a[c]=e[c];return o&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(s){return s=s.childContextTypes,s!=null}function $f(){E(Wf),E(H)}function ag(s,e,i){if(H.current!==Vf)throw Error(p(168));G(H,e),G(Wf,i)}function bg(s,e,i){var o=s.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var a in o)if(!(a in e))throw Error(p(108,Ra(s)||"Unknown",a));return A({},i,o)}function cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Vf,Xf=H.current,G(H,s),G(Wf,Wf.current),!0}function dg(s,e,i){var o=s.stateNode;if(!o)throw Error(p(169));i?(s=bg(s,e,Xf),o.__reactInternalMemoizedMergedChildContext=s,E(Wf),E(H),G(H,s)):E(Wf),G(Wf,i)}var eg=null,fg=!1,gg=!1;function hg(s){eg===null?eg=[s]:eg.push(s)}function ig(s){fg=!0,hg(s)}function jg(){if(!gg&&eg!==null){gg=!0;var s=0,e=C;try{var i=eg;for(C=1;s<i.length;s++){var o=i[s];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(s+1)),ac(fc,jg),a}finally{C=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(s,e){kg[lg++]=ng,kg[lg++]=mg,mg=s,ng=e}function ug(s,e,i){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=s;var o=rg;s=sg;var a=32-oc(o)-1;o&=~(1<<a),i+=1;var c=32-oc(e)+a;if(30<c){var d=a-a%5;c=(o&(1<<d)-1).toString(32),o>>=d,a-=d,rg=1<<32-oc(e)+a|i<<a|o,sg=c+s}else rg=1<<c|i<<a|o,sg=s}function vg(s){s.return!==null&&(tg(s,1),ug(s,1,0))}function wg(s){for(;s===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;s===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I=!1,zg=null;function Ag(s,e){var i=Bg(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=s,e=s.deletions,e===null?(s.deletions=[i],s.flags|=16):e.push(i)}function Cg(s,e){switch(s.tag){case 5:var i=s.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,xg=s,yg=Lf(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,xg=s,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=qg!==null?{id:rg,overflow:sg}:null,s.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=Bg(18,null,null,0),i.stateNode=e,i.return=s,s.child=i,xg=s,yg=null,!0):!1;default:return!1}}function Dg(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Eg(s){if(I){var e=yg;if(e){var i=e;if(!Cg(s,e)){if(Dg(s))throw Error(p(418));e=Lf(i.nextSibling);var o=xg;e&&Cg(s,e)?Ag(o,i):(s.flags=s.flags&-4097|2,I=!1,xg=s)}}else{if(Dg(s))throw Error(p(418));s.flags=s.flags&-4097|2,I=!1,xg=s}}}function Fg(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xg=s}function Gg(s){if(s!==xg)return!1;if(!I)return Fg(s),I=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Ef(s.type,s.memoizedProps)),e&&(e=yg)){if(Dg(s))throw Hg(),Error(p(418));for(;e;)Ag(s,e),e=Lf(e.nextSibling)}if(Fg(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(p(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var i=s.data;if(i==="/$"){if(e===0){yg=Lf(s.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}s=s.nextSibling}yg=null}}else yg=xg?Lf(s.stateNode.nextSibling):null;return!0}function Hg(){for(var s=yg;s;)s=Lf(s.nextSibling)}function Ig(){yg=xg=null,I=!1}function Jg(s){zg===null?zg=[s]:zg.push(s)}var Kg=ua.ReactCurrentBatchConfig;function Lg(s,e,i){if(s=i.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(p(309));var o=i.stateNode}if(!o)throw Error(p(147,s));var a=o,c=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(d){var h=a.refs;d===null?delete h[c]:h[c]=d},e._stringRef=c,e)}if(typeof s!="string")throw Error(p(284));if(!i._owner)throw Error(p(290,s))}return s}function Mg(s,e){throw s=Object.prototype.toString.call(e),Error(p(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Ng(s){var e=s._init;return e(s._payload)}function Og(s){function e(et,_e){if(s){var b=et.deletions;b===null?(et.deletions=[_e],et.flags|=16):b.push(_e)}}function i(et,_e){if(!s)return null;for(;_e!==null;)e(et,_e),_e=_e.sibling;return null}function o(et,_e){for(et=new Map;_e!==null;)_e.key!==null?et.set(_e.key,_e):et.set(_e.index,_e),_e=_e.sibling;return et}function a(et,_e){return et=Pg(et,_e),et.index=0,et.sibling=null,et}function c(et,_e,b){return et.index=b,s?(b=et.alternate,b!==null?(b=b.index,b<_e?(et.flags|=2,_e):b):(et.flags|=2,_e)):(et.flags|=1048576,_e)}function d(et){return s&&et.alternate===null&&(et.flags|=2),et}function h(et,_e,b,rt){return _e===null||_e.tag!==6?(_e=Qg(b,et.mode,rt),_e.return=et,_e):(_e=a(_e,b),_e.return=et,_e)}function g(et,_e,b,rt){var lt=b.type;return lt===ya?_(et,_e,b.props.children,rt,b.key):_e!==null&&(_e.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&Ng(lt)===_e.type)?(rt=a(_e,b.props),rt.ref=Lg(et,_e,b),rt.return=et,rt):(rt=Rg(b.type,b.key,b.props,null,et.mode,rt),rt.ref=Lg(et,_e,b),rt.return=et,rt)}function j(et,_e,b,rt){return _e===null||_e.tag!==4||_e.stateNode.containerInfo!==b.containerInfo||_e.stateNode.implementation!==b.implementation?(_e=Sg(b,et.mode,rt),_e.return=et,_e):(_e=a(_e,b.children||[]),_e.return=et,_e)}function _(et,_e,b,rt,lt){return _e===null||_e.tag!==7?(_e=Tg(b,et.mode,rt,lt),_e.return=et,_e):(_e=a(_e,b),_e.return=et,_e)}function $(et,_e,b){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return _e=Qg(""+_e,et.mode,b),_e.return=et,_e;if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case va:return b=Rg(_e.type,_e.key,_e.props,null,et.mode,b),b.ref=Lg(et,null,_e),b.return=et,b;case wa:return _e=Sg(_e,et.mode,b),_e.return=et,_e;case Ha:var rt=_e._init;return $(et,rt(_e._payload),b)}if(eb(_e)||Ka(_e))return _e=Tg(_e,et.mode,b,null),_e.return=et,_e;Mg(et,_e)}return null}function tt(et,_e,b,rt){var lt=_e!==null?_e.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return lt!==null?null:h(et,_e,""+b,rt);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case va:return b.key===lt?g(et,_e,b,rt):null;case wa:return b.key===lt?j(et,_e,b,rt):null;case Ha:return lt=b._init,tt(et,_e,lt(b._payload),rt)}if(eb(b)||Ka(b))return lt!==null?null:_(et,_e,b,rt,null);Mg(et,b)}return null}function it(et,_e,b,rt,lt){if(typeof rt=="string"&&rt!==""||typeof rt=="number")return et=et.get(b)||null,h(_e,et,""+rt,lt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case va:return et=et.get(rt.key===null?b:rt.key)||null,g(_e,et,rt,lt);case wa:return et=et.get(rt.key===null?b:rt.key)||null,j(_e,et,rt,lt);case Ha:var ot=rt._init;return it(et,_e,b,ot(rt._payload),lt)}if(eb(rt)||Ka(rt))return et=et.get(b)||null,_(_e,et,rt,lt,null);Mg(_e,rt)}return null}function st(et,_e,b,rt){for(var lt=null,ot=null,dt=_e,ht=_e=0,pt=null;dt!==null&&ht<b.length;ht++){dt.index>ht?(pt=dt,dt=null):pt=dt.sibling;var mt=tt(et,dt,b[ht],rt);if(mt===null){dt===null&&(dt=pt);break}s&&dt&&mt.alternate===null&&e(et,dt),_e=c(mt,_e,ht),ot===null?lt=mt:ot.sibling=mt,ot=mt,dt=pt}if(ht===b.length)return i(et,dt),I&&tg(et,ht),lt;if(dt===null){for(;ht<b.length;ht++)dt=$(et,b[ht],rt),dt!==null&&(_e=c(dt,_e,ht),ot===null?lt=dt:ot.sibling=dt,ot=dt);return I&&tg(et,ht),lt}for(dt=o(et,dt);ht<b.length;ht++)pt=it(dt,et,ht,b[ht],rt),pt!==null&&(s&&pt.alternate!==null&&dt.delete(pt.key===null?ht:pt.key),_e=c(pt,_e,ht),ot===null?lt=pt:ot.sibling=pt,ot=pt);return s&&dt.forEach(function(xt){return e(et,xt)}),I&&tg(et,ht),lt}function nt(et,_e,b,rt){var lt=Ka(b);if(typeof lt!="function")throw Error(p(150));if(b=lt.call(b),b==null)throw Error(p(151));for(var ot=lt=null,dt=_e,ht=_e=0,pt=null,mt=b.next();dt!==null&&!mt.done;ht++,mt=b.next()){dt.index>ht?(pt=dt,dt=null):pt=dt.sibling;var xt=tt(et,dt,mt.value,rt);if(xt===null){dt===null&&(dt=pt);break}s&&dt&&xt.alternate===null&&e(et,dt),_e=c(xt,_e,ht),ot===null?lt=xt:ot.sibling=xt,ot=xt,dt=pt}if(mt.done)return i(et,dt),I&&tg(et,ht),lt;if(dt===null){for(;!mt.done;ht++,mt=b.next())mt=$(et,mt.value,rt),mt!==null&&(_e=c(mt,_e,ht),ot===null?lt=mt:ot.sibling=mt,ot=mt);return I&&tg(et,ht),lt}for(dt=o(et,dt);!mt.done;ht++,mt=b.next())mt=it(dt,et,ht,mt.value,rt),mt!==null&&(s&&mt.alternate!==null&&dt.delete(mt.key===null?ht:mt.key),_e=c(mt,_e,ht),ot===null?lt=mt:ot.sibling=mt,ot=mt);return s&&dt.forEach(function(ct){return e(et,ct)}),I&&tg(et,ht),lt}function at(et,_e,b,rt){if(typeof b=="object"&&b!==null&&b.type===ya&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case va:e:{for(var lt=b.key,ot=_e;ot!==null;){if(ot.key===lt){if(lt=b.type,lt===ya){if(ot.tag===7){i(et,ot.sibling),_e=a(ot,b.props.children),_e.return=et,et=_e;break e}}else if(ot.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha&&Ng(lt)===ot.type){i(et,ot.sibling),_e=a(ot,b.props),_e.ref=Lg(et,ot,b),_e.return=et,et=_e;break e}i(et,ot);break}else e(et,ot);ot=ot.sibling}b.type===ya?(_e=Tg(b.props.children,et.mode,rt,b.key),_e.return=et,et=_e):(rt=Rg(b.type,b.key,b.props,null,et.mode,rt),rt.ref=Lg(et,_e,b),rt.return=et,et=rt)}return d(et);case wa:e:{for(ot=b.key;_e!==null;){if(_e.key===ot)if(_e.tag===4&&_e.stateNode.containerInfo===b.containerInfo&&_e.stateNode.implementation===b.implementation){i(et,_e.sibling),_e=a(_e,b.children||[]),_e.return=et,et=_e;break e}else{i(et,_e);break}else e(et,_e);_e=_e.sibling}_e=Sg(b,et.mode,rt),_e.return=et,et=_e}return d(et);case Ha:return ot=b._init,at(et,_e,ot(b._payload),rt)}if(eb(b))return st(et,_e,b,rt);if(Ka(b))return nt(et,_e,b,rt);Mg(et,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,_e!==null&&_e.tag===6?(i(et,_e.sibling),_e=a(_e,b),_e.return=et,et=_e):(i(et,_e),_e=Qg(b,et.mode,rt),_e.return=et,et=_e),d(et)):i(et,_e)}return at}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(s){var e=Wg.current;E(Wg),s._currentValue=e}function bh(s,e,i){for(;s!==null;){var o=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),s===i)break;s=s.return}}function ch(s,e){Xg=s,Zg=Yg=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(dh=!0),s.firstContext=null)}function eh(s){var e=s._currentValue;if(Zg!==s)if(s={context:s,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p(308));Yg=s,Xg.dependencies={lanes:0,firstContext:s}}else Yg=Yg.next=s;return e}var fh=null;function gh(s){fh===null?fh=[s]:fh.push(s)}function hh(s,e,i,o){var a=e.interleaved;return a===null?(i.next=i,gh(e)):(i.next=a.next,a.next=i),e.interleaved=i,ih(s,o)}function ih(s,e){s.lanes|=e;var i=s.alternate;for(i!==null&&(i.lanes|=e),i=s,s=s.return;s!==null;)s.childLanes|=e,i=s.alternate,i!==null&&(i.childLanes|=e),i=s,s=s.return;return i.tag===3?i.stateNode:null}var jh=!1;function kh(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function mh(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(s,e,i){var o=s.updateQueue;if(o===null)return null;if(o=o.shared,K&2){var a=o.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e,ih(s,i)}return a=o.interleaved,a===null?(e.next=e,gh(o)):(e.next=a.next,a.next=e),o.interleaved=e,ih(s,i)}function oh(s,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var o=e.lanes;o&=s.pendingLanes,i|=o,e.lanes=i,Cc(s,i)}}function ph(s,e){var i=s.updateQueue,o=s.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var a=null,c=null;if(i=i.firstBaseUpdate,i!==null){do{var d={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};c===null?a=c=d:c=c.next=d,i=i.next}while(i!==null);c===null?a=c=e:c=c.next=e}else a=c=e;i={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},s.updateQueue=i;return}s=i.lastBaseUpdate,s===null?i.firstBaseUpdate=e:s.next=e,i.lastBaseUpdate=e}function qh(s,e,i,o){var a=s.updateQueue;jh=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,h=a.shared.pending;if(h!==null){a.shared.pending=null;var g=h,j=g.next;g.next=null,d===null?c=j:d.next=j,d=g;var _=s.alternate;_!==null&&(_=_.updateQueue,h=_.lastBaseUpdate,h!==d&&(h===null?_.firstBaseUpdate=j:h.next=j,_.lastBaseUpdate=g))}if(c!==null){var $=a.baseState;d=0,_=j=g=null,h=c;do{var tt=h.lane,it=h.eventTime;if((o&tt)===tt){_!==null&&(_=_.next={eventTime:it,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var st=s,nt=h;switch(tt=e,it=i,nt.tag){case 1:if(st=nt.payload,typeof st=="function"){$=st.call(it,$,tt);break e}$=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=nt.payload,tt=typeof st=="function"?st.call(it,$,tt):st,tt==null)break e;$=A({},$,tt);break e;case 2:jh=!0}}h.callback!==null&&h.lane!==0&&(s.flags|=64,tt=a.effects,tt===null?a.effects=[h]:tt.push(h))}else it={eventTime:it,lane:tt,tag:h.tag,payload:h.payload,callback:h.callback,next:null},_===null?(j=_=it,g=$):_=_.next=it,d|=tt;if(h=h.next,h===null){if(h=a.shared.pending,h===null)break;tt=h,h=tt.next,tt.next=null,a.lastBaseUpdate=tt,a.shared.pending=null}}while(!0);if(_===null&&(g=$),a.baseState=g,a.firstBaseUpdate=j,a.lastBaseUpdate=_,e=a.shared.interleaved,e!==null){a=e;do d|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);rh|=d,s.lanes=d,s.memoizedState=$}}function sh(s,e,i){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var o=s[e],a=o.callback;if(a!==null){if(o.callback=null,o=i,typeof a!="function")throw Error(p(191,a));a.call(o)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(s){if(s===th)throw Error(p(174));return s}function yh(s,e){switch(G(wh,e),G(vh,s),G(uh,th),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=lb(e,s)}E(uh),G(uh,e)}function zh(){E(uh),E(vh),E(wh)}function Ah(s){xh(wh.current);var e=xh(uh.current),i=lb(e,s.type);e!==i&&(G(vh,s),G(uh,i))}function Bh(s){vh.current===s&&(E(uh),E(vh))}var L=Uf(0);function Ch(s){for(var e=s;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var s=0;s<Dh.length;s++)Dh[s]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M=null,N=null,O=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P(){throw Error(p(321))}function Mh(s,e){if(e===null)return!1;for(var i=0;i<e.length&&i<s.length;i++)if(!He(s[i],e[i]))return!1;return!0}function Nh(s,e,i,o,a,c){if(Hh=c,M=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=s===null||s.memoizedState===null?Oh:Ph,s=i(o,a),Jh){c=0;do{if(Jh=!1,Kh=0,25<=c)throw Error(p(301));c+=1,O=N=null,e.updateQueue=null,Fh.current=Qh,s=i(o,a)}while(Jh)}if(Fh.current=Rh,e=N!==null&&N.next!==null,Hh=0,O=N=M=null,Ih=!1,e)throw Error(p(300));return s}function Sh(){var s=Kh!==0;return Kh=0,s}function Th(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O===null?M.memoizedState=O=s:O=O.next=s,O}function Uh(){if(N===null){var s=M.alternate;s=s!==null?s.memoizedState:null}else s=N.next;var e=O===null?M.memoizedState:O.next;if(e!==null)O=e,N=s;else{if(s===null)throw Error(p(310));N=s,s={memoizedState:N.memoizedState,baseState:N.baseState,baseQueue:N.baseQueue,queue:N.queue,next:null},O===null?M.memoizedState=O=s:O=O.next=s}return O}function Vh(s,e){return typeof e=="function"?e(s):e}function Wh(s){var e=Uh(),i=e.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=s;var o=N,a=o.baseQueue,c=i.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}o.baseQueue=a=c,i.pending=null}if(a!==null){c=a.next,o=o.baseState;var h=d=null,g=null,j=c;do{var _=j.lane;if((Hh&_)===_)g!==null&&(g=g.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),o=j.hasEagerState?j.eagerState:s(o,j.action);else{var $={lane:_,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};g===null?(h=g=$,d=o):g=g.next=$,M.lanes|=_,rh|=_}j=j.next}while(j!==null&&j!==c);g===null?d=o:g.next=h,He(o,e.memoizedState)||(dh=!0),e.memoizedState=o,e.baseState=d,e.baseQueue=g,i.lastRenderedState=o}if(s=i.interleaved,s!==null){a=s;do c=a.lane,M.lanes|=c,rh|=c,a=a.next;while(a!==s)}else a===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function Xh(s){var e=Uh(),i=e.queue;if(i===null)throw Error(p(311));i.lastRenderedReducer=s;var o=i.dispatch,a=i.pending,c=e.memoizedState;if(a!==null){i.pending=null;var d=a=a.next;do c=s(c,d.action),d=d.next;while(d!==a);He(c,e.memoizedState)||(dh=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),i.lastRenderedState=c}return[c,o]}function Yh(){}function Zh(s,e){var i=M,o=Uh(),a=e(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,dh=!0),o=o.queue,$h(ai.bind(null,i,o,s),[s]),o.getSnapshot!==e||c||O!==null&&O.memoizedState.tag&1){if(i.flags|=2048,bi(9,ci.bind(null,i,o,a,e),void 0,null),Q===null)throw Error(p(349));Hh&30||di(i,e,a)}return a}function di(s,e,i){s.flags|=16384,s={getSnapshot:e,value:i},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.stores=[s]):(i=e.stores,i===null?e.stores=[s]:i.push(s))}function ci(s,e,i,o){e.value=i,e.getSnapshot=o,ei(e)&&fi(s)}function ai(s,e,i){return i(function(){ei(e)&&fi(s)})}function ei(s){var e=s.getSnapshot;s=s.value;try{var i=e();return!He(s,i)}catch{return!0}}function fi(s){var e=ih(s,1);e!==null&&gi(e,s,1,-1)}function hi(s){var e=Th();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:s},e.queue=s,s=s.dispatch=ii.bind(null,M,s),[e.memoizedState,s]}function bi(s,e,i,o){return s={tag:s,create:e,destroy:i,deps:o,next:null},e=M.updateQueue,e===null?(e={lastEffect:null,stores:null},M.updateQueue=e,e.lastEffect=s.next=s):(i=e.lastEffect,i===null?e.lastEffect=s.next=s:(o=i.next,i.next=s,s.next=o,e.lastEffect=s)),s}function ji(){return Uh().memoizedState}function ki(s,e,i,o){var a=Th();M.flags|=s,a.memoizedState=bi(1|e,i,void 0,o===void 0?null:o)}function li(s,e,i,o){var a=Uh();o=o===void 0?null:o;var c=void 0;if(N!==null){var d=N.memoizedState;if(c=d.destroy,o!==null&&Mh(o,d.deps)){a.memoizedState=bi(e,i,c,o);return}}M.flags|=s,a.memoizedState=bi(1|e,i,c,o)}function mi(s,e){return ki(8390656,8,s,e)}function $h(s,e){return li(2048,8,s,e)}function ni(s,e){return li(4,2,s,e)}function oi(s,e){return li(4,4,s,e)}function pi(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function qi(s,e,i){return i=i!=null?i.concat([s]):null,li(4,4,pi.bind(null,e,s),i)}function ri(){}function si(s,e){var i=Uh();e=e===void 0?null:e;var o=i.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(i.memoizedState=[s,e],s)}function ti(s,e){var i=Uh();e=e===void 0?null:e;var o=i.memoizedState;return o!==null&&e!==null&&Mh(e,o[1])?o[0]:(s=s(),i.memoizedState=[s,e],s)}function ui(s,e,i){return Hh&21?(He(i,e)||(i=yc(),M.lanes|=i,rh|=i,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,dh=!0),s.memoizedState=i)}function vi(s,e){var i=C;C=i!==0&&4>i?i:4,s(!0);var o=Gh.transition;Gh.transition={};try{s(!1),e()}finally{C=i,Gh.transition=o}}function wi(){return Uh().memoizedState}function xi(s,e,i){var o=yi(s);if(i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},zi(s))Ai(e,i);else if(i=hh(s,e,i,o),i!==null){var a=R();gi(i,s,o,a),Bi(i,e,o)}}function ii(s,e,i){var o=yi(s),a={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(zi(s))Ai(e,a);else{var c=s.alternate;if(s.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var d=e.lastRenderedState,h=c(d,i);if(a.hasEagerState=!0,a.eagerState=h,He(h,d)){var g=e.interleaved;g===null?(a.next=a,gh(e)):(a.next=g.next,g.next=a),e.interleaved=a;return}}catch{}finally{}i=hh(s,e,a,o),i!==null&&(a=R(),gi(i,s,o,a),Bi(i,e,o))}}function zi(s){var e=s.alternate;return s===M||e!==null&&e===M}function Ai(s,e){Jh=Ih=!0;var i=s.pending;i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e}function Bi(s,e,i){if(i&4194240){var o=e.lanes;o&=s.pendingLanes,i|=o,e.lanes=i,Cc(s,i)}}var Rh={readContext:eh,useCallback:P,useContext:P,useEffect:P,useImperativeHandle:P,useInsertionEffect:P,useLayoutEffect:P,useMemo:P,useReducer:P,useRef:P,useState:P,useDebugValue:P,useDeferredValue:P,useTransition:P,useMutableSource:P,useSyncExternalStore:P,useId:P,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(s,e){return Th().memoizedState=[s,e===void 0?null:e],s},useContext:eh,useEffect:mi,useImperativeHandle:function(s,e,i){return i=i!=null?i.concat([s]):null,ki(4194308,4,pi.bind(null,e,s),i)},useLayoutEffect:function(s,e){return ki(4194308,4,s,e)},useInsertionEffect:function(s,e){return ki(4,2,s,e)},useMemo:function(s,e){var i=Th();return e=e===void 0?null:e,s=s(),i.memoizedState=[s,e],s},useReducer:function(s,e,i){var o=Th();return e=i!==void 0?i(e):e,o.memoizedState=o.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},o.queue=s,s=s.dispatch=xi.bind(null,M,s),[o.memoizedState,s]},useRef:function(s){var e=Th();return s={current:s},e.memoizedState=s},useState:hi,useDebugValue:ri,useDeferredValue:function(s){return Th().memoizedState=s},useTransition:function(){var s=hi(!1),e=s[0];return s=vi.bind(null,s[1]),Th().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,i){var o=M,a=Th();if(I){if(i===void 0)throw Error(p(407));i=i()}else{if(i=e(),Q===null)throw Error(p(349));Hh&30||di(o,e,i)}a.memoizedState=i;var c={value:i,getSnapshot:e};return a.queue=c,mi(ai.bind(null,o,c,s),[s]),o.flags|=2048,bi(9,ci.bind(null,o,c,i,e),void 0,null),i},useId:function(){var s=Th(),e=Q.identifierPrefix;if(I){var i=sg,o=rg;i=(o&~(1<<32-oc(o)-1)).toString(32)+i,e=":"+e+"R"+i,i=Kh++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=Lh++,e=":"+e+"r"+i.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return ui(e,N.memoizedState,s)},useTransition:function(){var s=Wh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(s){var e=Uh();return N===null?e.memoizedState=s:ui(e,N.memoizedState,s)},useTransition:function(){var s=Xh(Vh)[0],e=Uh().memoizedState;return[s,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(s,e){if(s&&s.defaultProps){e=A({},e),s=s.defaultProps;for(var i in s)e[i]===void 0&&(e[i]=s[i]);return e}return e}function Di(s,e,i,o){e=s.memoizedState,i=i(o,e),i=i==null?e:A({},e,i),s.memoizedState=i,s.lanes===0&&(s.updateQueue.baseState=i)}var Ei={isMounted:function(s){return(s=s._reactInternals)?Vb(s)===s:!1},enqueueSetState:function(s,e,i){s=s._reactInternals;var o=R(),a=yi(s),c=mh(o,a);c.payload=e,i!=null&&(c.callback=i),e=nh(s,c,a),e!==null&&(gi(e,s,a,o),oh(e,s,a))},enqueueReplaceState:function(s,e,i){s=s._reactInternals;var o=R(),a=yi(s),c=mh(o,a);c.tag=1,c.payload=e,i!=null&&(c.callback=i),e=nh(s,c,a),e!==null&&(gi(e,s,a,o),oh(e,s,a))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var i=R(),o=yi(s),a=mh(i,o);a.tag=2,e!=null&&(a.callback=e),e=nh(s,a,o),e!==null&&(gi(e,s,o,i),oh(e,s,o))}};function Fi(s,e,i,o,a,c,d){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(o,c,d):e.prototype&&e.prototype.isPureReactComponent?!Ie(i,o)||!Ie(a,c):!0}function Gi(s,e,i){var o=!1,a=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=eh(c):(a=Zf(e)?Xf:H.current,o=e.contextTypes,c=(o=o!=null)?Yf(s,a):Vf),e=new e(i,c),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,s.stateNode=e,e._reactInternals=s,o&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=c),e}function Hi(s,e,i,o){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,o),e.state!==s&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(s,e,i,o){var a=s.stateNode;a.props=i,a.state=s.memoizedState,a.refs={},kh(s);var c=e.contextType;typeof c=="object"&&c!==null?a.context=eh(c):(c=Zf(e)?Xf:H.current,a.context=Yf(s,c)),a.state=s.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(Di(s,e,c,i),a.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Ei.enqueueReplaceState(a,a.state,null),qh(s,i,a,o),a.state=s.memoizedState),typeof a.componentDidMount=="function"&&(s.flags|=4194308)}function Ji(s,e){try{var i="",o=e;do i+=Pa(o),o=o.return;while(o);var a=i}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:s,source:e,stack:a,digest:null}}function Ki(s,e,i){return{value:s,source:null,stack:i??null,digest:e??null}}function Li(s,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(s,e,i){i=mh(-1,i),i.tag=3,i.payload={element:null};var o=e.value;return i.callback=function(){Oi||(Oi=!0,Pi=o),Li(s,e)},i}function Qi(s,e,i){i=mh(-1,i),i.tag=3;var o=s.type.getDerivedStateFromError;if(typeof o=="function"){var a=e.value;i.payload=function(){return o(a)},i.callback=function(){Li(s,e)}}var c=s.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(i.callback=function(){Li(s,e),typeof o!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),i}function Si(s,e,i){var o=s.pingCache;if(o===null){o=s.pingCache=new Mi;var a=new Set;o.set(e,a)}else a=o.get(e),a===void 0&&(a=new Set,o.set(e,a));a.has(i)||(a.add(i),s=Ti.bind(null,s,e,i),e.then(s,s))}function Ui(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Vi(s,e,i,o,a){return s.mode&1?(s.flags|=65536,s.lanes=a,s):(s===e?s.flags|=65536:(s.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=mh(-1,1),e.tag=2,nh(i,e,1))),i.lanes|=1),s)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(s,e,i,o){e.child=s===null?Vg(e,null,i,o):Ug(e,s.child,i,o)}function Yi(s,e,i,o,a){i=i.render;var c=e.ref;return ch(e,a),o=Nh(s,e,i,o,c,a),i=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~a,Zi(s,e,a)):(I&&i&&vg(e),e.flags|=1,Xi(s,e,o,a),e.child)}function $i(s,e,i,o,a){if(s===null){var c=i.type;return typeof c=="function"&&!aj(c)&&c.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=c,bj(s,e,c,o,a)):(s=Rg(i.type,null,o,e,e.mode,a),s.ref=e.ref,s.return=e,e.child=s)}if(c=s.child,!(s.lanes&a)){var d=c.memoizedProps;if(i=i.compare,i=i!==null?i:Ie,i(d,o)&&s.ref===e.ref)return Zi(s,e,a)}return e.flags|=1,s=Pg(c,o),s.ref=e.ref,s.return=e,e.child=s}function bj(s,e,i,o,a){if(s!==null){var c=s.memoizedProps;if(Ie(c,o)&&s.ref===e.ref)if(dh=!1,e.pendingProps=o=c,(s.lanes&a)!==0)s.flags&131072&&(dh=!0);else return e.lanes=s.lanes,Zi(s,e,a)}return cj(s,e,i,o,a)}function dj(s,e,i){var o=e.pendingProps,a=o.children,c=s!==null?s.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G(ej,fj),fj|=i;else{if(!(i&1073741824))return s=c!==null?c.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,G(ej,fj),fj|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:i,G(ej,fj),fj|=o}else c!==null?(o=c.baseLanes|i,e.memoizedState=null):o=i,G(ej,fj),fj|=o;return Xi(s,e,a,i),e.child}function gj(s,e){var i=e.ref;(s===null&&i!==null||s!==null&&s.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function cj(s,e,i,o,a){var c=Zf(i)?Xf:H.current;return c=Yf(e,c),ch(e,a),i=Nh(s,e,i,o,c,a),o=Sh(),s!==null&&!dh?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~a,Zi(s,e,a)):(I&&o&&vg(e),e.flags|=1,Xi(s,e,i,a),e.child)}function hj(s,e,i,o,a){if(Zf(i)){var c=!0;cg(e)}else c=!1;if(ch(e,a),e.stateNode===null)ij(s,e),Gi(e,i,o),Ii(e,i,o,a),o=!0;else if(s===null){var d=e.stateNode,h=e.memoizedProps;d.props=h;var g=d.context,j=i.contextType;typeof j=="object"&&j!==null?j=eh(j):(j=Zf(i)?Xf:H.current,j=Yf(e,j));var _=i.getDerivedStateFromProps,$=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==o||g!==j)&&Hi(e,d,o,j),jh=!1;var tt=e.memoizedState;d.state=tt,qh(e,o,d,a),g=e.memoizedState,h!==o||tt!==g||Wf.current||jh?(typeof _=="function"&&(Di(e,i,_,o),g=e.memoizedState),(h=jh||Fi(e,i,h,o,tt,g,j))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=g),d.props=o,d.state=g,d.context=j,o=h):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{d=e.stateNode,lh(s,e),h=e.memoizedProps,j=e.type===e.elementType?h:Ci(e.type,h),d.props=j,$=e.pendingProps,tt=d.context,g=i.contextType,typeof g=="object"&&g!==null?g=eh(g):(g=Zf(i)?Xf:H.current,g=Yf(e,g));var it=i.getDerivedStateFromProps;(_=typeof it=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(h!==$||tt!==g)&&Hi(e,d,o,g),jh=!1,tt=e.memoizedState,d.state=tt,qh(e,o,d,a);var st=e.memoizedState;h!==$||tt!==st||Wf.current||jh?(typeof it=="function"&&(Di(e,i,it,o),st=e.memoizedState),(j=jh||Fi(e,i,j,o,tt,st,g)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,st,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,st,g)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||h===s.memoizedProps&&tt===s.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&tt===s.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=st),d.props=o,d.state=st,d.context=g,o=j):(typeof d.componentDidUpdate!="function"||h===s.memoizedProps&&tt===s.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||h===s.memoizedProps&&tt===s.memoizedState||(e.flags|=1024),o=!1)}return jj(s,e,i,o,c,a)}function jj(s,e,i,o,a,c){gj(s,e);var d=(e.flags&128)!==0;if(!o&&!d)return a&&dg(e,i,!1),Zi(s,e,c);o=e.stateNode,Wi.current=e;var h=d&&typeof i.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,s!==null&&d?(e.child=Ug(e,s.child,null,c),e.child=Ug(e,null,h,c)):Xi(s,e,h,c),e.memoizedState=o.state,a&&dg(e,i,!0),e.child}function kj(s){var e=s.stateNode;e.pendingContext?ag(s,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(s,e.context,!1),yh(s,e.containerInfo)}function lj(s,e,i,o,a){return Ig(),Jg(a),e.flags|=256,Xi(s,e,i,o),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(s){return{baseLanes:s,cachePool:null,transitions:null}}function oj(s,e,i){var o=e.pendingProps,a=L.current,c=!1,d=(e.flags&128)!==0,h;if((h=d)||(h=s!==null&&s.memoizedState===null?!1:(a&2)!==0),h?(c=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(a|=1),G(L,a&1),s===null)return Eg(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=o.children,s=o.fallback,c?(o=e.mode,c=e.child,d={mode:"hidden",children:d},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=pj(d,o,0,null),s=Tg(s,o,i,null),c.return=e,s.return=e,c.sibling=s,e.child=c,e.child.memoizedState=nj(i),e.memoizedState=mj,s):qj(e,d));if(a=s.memoizedState,a!==null&&(h=a.dehydrated,h!==null))return rj(s,e,d,o,h,a,i);if(c){c=o.fallback,d=e.mode,a=s.child,h=a.sibling;var g={mode:"hidden",children:o.children};return!(d&1)&&e.child!==a?(o=e.child,o.childLanes=0,o.pendingProps=g,e.deletions=null):(o=Pg(a,g),o.subtreeFlags=a.subtreeFlags&14680064),h!==null?c=Pg(h,c):(c=Tg(c,d,i,null),c.flags|=2),c.return=e,o.return=e,o.sibling=c,e.child=o,o=c,c=e.child,d=s.child.memoizedState,d=d===null?nj(i):{baseLanes:d.baseLanes|i,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=s.childLanes&~i,e.memoizedState=mj,o}return c=s.child,s=c.sibling,o=Pg(c,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=i),o.return=e,o.sibling=null,s!==null&&(i=e.deletions,i===null?(e.deletions=[s],e.flags|=16):i.push(s)),e.child=o,e.memoizedState=null,o}function qj(s,e){return e=pj({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function sj(s,e,i,o){return o!==null&&Jg(o),Ug(e,s.child,null,i),s=qj(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function rj(s,e,i,o,a,c,d){if(i)return e.flags&256?(e.flags&=-257,o=Ki(Error(p(422))),sj(s,e,d,o)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(c=o.fallback,a=e.mode,o=pj({mode:"visible",children:o.children},a,0,null),c=Tg(c,a,d,null),c.flags|=2,o.return=e,c.return=e,o.sibling=c,e.child=o,e.mode&1&&Ug(e,s.child,null,d),e.child.memoizedState=nj(d),e.memoizedState=mj,c);if(!(e.mode&1))return sj(s,e,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var h=o.dgst;return o=h,c=Error(p(419)),o=Ki(c,o,void 0),sj(s,e,d,o)}if(h=(d&s.childLanes)!==0,dh||h){if(o=Q,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,ih(s,a),gi(o,s,a,-1))}return tj(),o=Ki(Error(p(421))),sj(s,e,d,o)}return a.data==="$?"?(e.flags|=128,e.child=s.child,e=uj.bind(null,s),a._reactRetry=e,null):(s=c.treeContext,yg=Lf(a.nextSibling),xg=e,I=!0,zg=null,s!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=s.id,sg=s.overflow,qg=e),e=qj(e,o.children),e.flags|=4096,e)}function vj(s,e,i){s.lanes|=e;var o=s.alternate;o!==null&&(o.lanes|=e),bh(s.return,e,i)}function wj(s,e,i,o,a){var c=s.memoizedState;c===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=i,c.tailMode=a)}function xj(s,e,i){var o=e.pendingProps,a=o.revealOrder,c=o.tail;if(Xi(s,e,o.children,i),o=L.current,o&2)o=o&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&vj(s,i,e);else if(s.tag===19)vj(s,i,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}o&=1}if(G(L,o),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(i=e.child,a=null;i!==null;)s=i.alternate,s!==null&&Ch(s)===null&&(a=i),i=i.sibling;i=a,i===null?(a=e.child,e.child=null):(a=i.sibling,i.sibling=null),wj(e,!1,a,i,c);break;case"backwards":for(i=null,a=e.child,e.child=null;a!==null;){if(s=a.alternate,s!==null&&Ch(s)===null){e.child=a;break}s=a.sibling,a.sibling=i,i=a,a=s}wj(e,!0,i,null,c);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function Zi(s,e,i){if(s!==null&&(e.dependencies=s.dependencies),rh|=e.lanes,!(i&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(p(153));if(e.child!==null){for(s=e.child,i=Pg(s,s.pendingProps),e.child=i,i.return=e;s.sibling!==null;)s=s.sibling,i=i.sibling=Pg(s,s.pendingProps),i.return=e;i.sibling=null}return e.child}function yj(s,e,i){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,a=e.memoizedProps.value;G(Wg,o._currentValue),o._currentValue=a;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(G(L,L.current&1),e.flags|=128,null):i&e.child.childLanes?oj(s,e,i):(G(L,L.current&1),s=Zi(s,e,i),s!==null?s.sibling:null);G(L,L.current&1);break;case 19:if(o=(i&e.childLanes)!==0,s.flags&128){if(o)return xj(s,e,i);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G(L,L.current),o)break;return null;case 22:case 23:return e.lanes=0,dj(s,e,i)}return Zi(s,e,i)}var zj,Aj,Bj,Cj;zj=function(s,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)s.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};Aj=function(){};Bj=function(s,e,i,o){var a=s.memoizedProps;if(a!==o){s=e.stateNode,xh(uh.current);var c=null;switch(i){case"input":a=Ya(s,a),o=Ya(s,o),c=[];break;case"select":a=A({},a,{value:void 0}),o=A({},o,{value:void 0}),c=[];break;case"textarea":a=gb(s,a),o=gb(s,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(s.onclick=Bf)}ub(i,o);var d;i=null;for(j in a)if(!o.hasOwnProperty(j)&&a.hasOwnProperty(j)&&a[j]!=null)if(j==="style"){var h=a[j];for(d in h)h.hasOwnProperty(d)&&(i||(i={}),i[d]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(ea.hasOwnProperty(j)?c||(c=[]):(c=c||[]).push(j,null));for(j in o){var g=o[j];if(h=a!=null?a[j]:void 0,o.hasOwnProperty(j)&&g!==h&&(g!=null||h!=null))if(j==="style")if(h){for(d in h)!h.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(i||(i={}),i[d]="");for(d in g)g.hasOwnProperty(d)&&h[d]!==g[d]&&(i||(i={}),i[d]=g[d])}else i||(c||(c=[]),c.push(j,i)),i=g;else j==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,h=h?h.__html:void 0,g!=null&&h!==g&&(c=c||[]).push(j,g)):j==="children"?typeof g!="string"&&typeof g!="number"||(c=c||[]).push(j,""+g):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(ea.hasOwnProperty(j)?(g!=null&&j==="onScroll"&&D("scroll",s),c||h===g||(c=[])):(c=c||[]).push(j,g))}i&&(c=c||[]).push("style",i);var j=c;(e.updateQueue=j)&&(e.flags|=4)}};Cj=function(s,e,i,o){i!==o&&(e.flags|=4)};function Dj(s,e){if(!I)switch(s.tailMode){case"hidden":e=s.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?s.tail=null:i.sibling=null;break;case"collapsed":i=s.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:o.sibling=null}}function S(s){var e=s.alternate!==null&&s.alternate.child===s.child,i=0,o=0;if(e)for(var a=s.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=s,a=a.sibling;else for(a=s.child;a!==null;)i|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=s,a=a.sibling;return s.subtreeFlags|=o,s.childLanes=i,e}function Ej(s,e,i){var o=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S(e),null;case 1:return Zf(e.type)&&$f(),S(e),null;case 3:return o=e.stateNode,zh(),E(Wf),E(H),Eh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(s===null||s.child===null)&&(Gg(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(s,e),S(e),null;case 5:Bh(e);var a=xh(wh.current);if(i=e.type,s!==null&&e.stateNode!=null)Bj(s,e,i,o,a),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(p(166));return S(e),null}if(s=xh(uh.current),Gg(e)){o=e.stateNode,i=e.type;var c=e.memoizedProps;switch(o[Of]=e,o[Pf]=c,s=(e.mode&1)!==0,i){case"dialog":D("cancel",o),D("close",o);break;case"iframe":case"object":case"embed":D("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],o);break;case"source":D("error",o);break;case"img":case"image":case"link":D("error",o),D("load",o);break;case"details":D("toggle",o);break;case"input":Za(o,c),D("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D("invalid",o);break;case"textarea":hb(o,c),D("invalid",o)}ub(i,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var h=c[d];d==="children"?typeof h=="string"?o.textContent!==h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,s),a=["children",h]):typeof h=="number"&&o.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,h,s),a=["children",""+h]):ea.hasOwnProperty(d)&&h!=null&&d==="onScroll"&&D("scroll",o)}switch(i){case"input":Va(o),db(o,c,!0);break;case"textarea":Va(o),jb(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,e.updateQueue=o,o!==null&&(e.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=kb(i)),s==="http://www.w3.org/1999/xhtml"?i==="script"?(s=d.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof o.is=="string"?s=d.createElement(i,{is:o.is}):(s=d.createElement(i),i==="select"&&(d=s,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):s=d.createElementNS(s,i),s[Of]=e,s[Pf]=o,zj(s,e,!1,!1),e.stateNode=s;e:{switch(d=vb(i,o),i){case"dialog":D("cancel",s),D("close",s),a=o;break;case"iframe":case"object":case"embed":D("load",s),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D(lf[a],s);a=o;break;case"source":D("error",s),a=o;break;case"img":case"image":case"link":D("error",s),D("load",s),a=o;break;case"details":D("toggle",s),a=o;break;case"input":Za(s,o),a=Ya(s,o),D("invalid",s);break;case"option":a=o;break;case"select":s._wrapperState={wasMultiple:!!o.multiple},a=A({},o,{value:void 0}),D("invalid",s);break;case"textarea":hb(s,o),a=gb(s,o),D("invalid",s);break;default:a=o}ub(i,a),h=a;for(c in h)if(h.hasOwnProperty(c)){var g=h[c];c==="style"?sb(s,g):c==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&nb(s,g)):c==="children"?typeof g=="string"?(i!=="textarea"||g!=="")&&ob(s,g):typeof g=="number"&&ob(s,""+g):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea.hasOwnProperty(c)?g!=null&&c==="onScroll"&&D("scroll",s):g!=null&&ta(s,c,g,d))}switch(i){case"input":Va(s),db(s,o,!1);break;case"textarea":Va(s),jb(s);break;case"option":o.value!=null&&s.setAttribute("value",""+Sa(o.value));break;case"select":s.multiple=!!o.multiple,c=o.value,c!=null?fb(s,!!o.multiple,c,!1):o.defaultValue!=null&&fb(s,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(s.onclick=Bf)}switch(i){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S(e),null;case 6:if(s&&e.stateNode!=null)Cj(s,e,s.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(p(166));if(i=xh(wh.current),xh(uh.current),Gg(e)){if(o=e.stateNode,i=e.memoizedProps,o[Of]=e,(c=o.nodeValue!==i)&&(s=xg,s!==null))switch(s.tag){case 3:Af(o.nodeValue,i,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,i,(s.mode&1)!==0)}c&&(e.flags|=4)}else o=(i.nodeType===9?i:i.ownerDocument).createTextNode(o),o[Of]=e,e.stateNode=o}return S(e),null;case 13:if(E(L),o=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(I&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),o!==null&&o.dehydrated!==null){if(s===null){if(!c)throw Error(p(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S(e),c=!1}else zg!==null&&(Fj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(o=o!==null,o!==(s!==null&&s.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(s===null||L.current&1?T===0&&(T=3):tj())),e.updateQueue!==null&&(e.flags|=4),S(e),null);case 4:return zh(),Aj(s,e),s===null&&sf(e.stateNode.containerInfo),S(e),null;case 10:return ah(e.type._context),S(e),null;case 17:return Zf(e.type)&&$f(),S(e),null;case 19:if(E(L),c=e.memoizedState,c===null)return S(e),null;if(o=(e.flags&128)!==0,d=c.rendering,d===null)if(o)Dj(c,!1);else{if(T!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(d=Ch(s),d!==null){for(e.flags|=128,Dj(c,!1),o=d.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=i,i=e.child;i!==null;)c=i,s=o,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=s,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,s=d.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i=i.sibling;return G(L,L.current&1|2),e.child}s=s.sibling}c.tail!==null&&B()>Gj&&(e.flags|=128,o=!0,Dj(c,!1),e.lanes=4194304)}else{if(!o)if(s=Ch(d),s!==null){if(e.flags|=128,o=!0,i=s.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Dj(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!I)return S(e),null}else 2*B()-c.renderingStartTime>Gj&&i!==1073741824&&(e.flags|=128,o=!0,Dj(c,!1),e.lanes=4194304);c.isBackwards?(d.sibling=e.child,e.child=d):(i=c.last,i!==null?i.sibling=d:e.child=d,c.last=d)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B(),e.sibling=null,i=L.current,G(L,o?i&1|2:i&1),e):(S(e),null);case 22:case 23:return Hj(),o=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?fj&1073741824&&(S(e),e.subtreeFlags&6&&(e.flags|=8192)):S(e),null;case 24:return null;case 25:return null}throw Error(p(156,e.tag))}function Ij(s,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return zh(),E(Wf),E(H),Eh(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E(L),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(p(340));Ig()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return E(L),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V=null;function Lj(s,e){var i=s.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){W(s,e,o)}else i.current=null}function Mj(s,e,i){try{i()}catch(o){W(s,e,o)}}var Nj=!1;function Oj(s,e){if(Cf=dd,s=Me(),Ne(s)){if("selectionStart"in s)var i={start:s.selectionStart,end:s.selectionEnd};else e:{i=(i=s.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{i.nodeType,c.nodeType}catch{i=null;break e}var d=0,h=-1,g=-1,j=0,_=0,$=s,tt=null;t:for(;;){for(var it;$!==i||a!==0&&$.nodeType!==3||(h=d+a),$!==c||o!==0&&$.nodeType!==3||(g=d+o),$.nodeType===3&&(d+=$.nodeValue.length),(it=$.firstChild)!==null;)tt=$,$=it;for(;;){if($===s)break t;if(tt===i&&++j===a&&(h=d),tt===c&&++_===o&&(g=d),(it=$.nextSibling)!==null)break;$=tt,tt=$.parentNode}$=it}i=h===-1||g===-1?null:{start:h,end:g}}else i=null}i=i||{start:0,end:0}}else i=null;for(Df={focusedElem:s,selectionRange:i},dd=!1,V=e;V!==null;)if(e=V,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,V=s;else for(;V!==null;){e=V;try{var st=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(st!==null){var nt=st.memoizedProps,at=st.memoizedState,et=e.stateNode,_e=et.getSnapshotBeforeUpdate(e.elementType===e.type?nt:Ci(e.type,nt),at);et.__reactInternalSnapshotBeforeUpdate=_e}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p(163))}}catch(rt){W(e,e.return,rt)}if(s=e.sibling,s!==null){s.return=e.return,V=s;break}V=e.return}return st=Nj,Nj=!1,st}function Pj(s,e,i){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&s)===s){var c=a.destroy;a.destroy=void 0,c!==void 0&&Mj(e,i,c)}a=a.next}while(a!==o)}}function Qj(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&s)===s){var o=i.create;i.destroy=o()}i=i.next}while(i!==e)}}function Rj(s){var e=s.ref;if(e!==null){var i=s.stateNode;switch(s.tag){case 5:s=i;break;default:s=i}typeof e=="function"?e(s):e.current=s}}function Sj(s){var e=s.alternate;e!==null&&(s.alternate=null,Sj(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Tj(s){return s.tag===5||s.tag===3||s.tag===4}function Uj(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Tj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Vj(s,e,i){var o=s.tag;if(o===5||o===6)s=s.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(s,e):i.insertBefore(s,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(s,i)):(e=i,e.appendChild(s)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Bf));else if(o!==4&&(s=s.child,s!==null))for(Vj(s,e,i),s=s.sibling;s!==null;)Vj(s,e,i),s=s.sibling}function Wj(s,e,i){var o=s.tag;if(o===5||o===6)s=s.stateNode,e?i.insertBefore(s,e):i.appendChild(s);else if(o!==4&&(s=s.child,s!==null))for(Wj(s,e,i),s=s.sibling;s!==null;)Wj(s,e,i),s=s.sibling}var X$1=null,Xj=!1;function Yj(s,e,i){for(i=i.child;i!==null;)Zj(s,e,i),i=i.sibling}function Zj(s,e,i){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,i)}catch{}switch(i.tag){case 5:U||Lj(i,e);case 6:var o=X$1,a=Xj;X$1=null,Yj(s,e,i),X$1=o,Xj=a,X$1!==null&&(Xj?(s=X$1,i=i.stateNode,s.nodeType===8?s.parentNode.removeChild(i):s.removeChild(i)):X$1.removeChild(i.stateNode));break;case 18:X$1!==null&&(Xj?(s=X$1,i=i.stateNode,s.nodeType===8?Kf(s.parentNode,i):s.nodeType===1&&Kf(s,i),bd(s)):Kf(X$1,i.stateNode));break;case 4:o=X$1,a=Xj,X$1=i.stateNode.containerInfo,Xj=!0,Yj(s,e,i),X$1=o,Xj=a;break;case 0:case 11:case 14:case 15:if(!U&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&Mj(i,e,d),a=a.next}while(a!==o)}Yj(s,e,i);break;case 1:if(!U&&(Lj(i,e),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(h){W(i,e,h)}Yj(s,e,i);break;case 21:Yj(s,e,i);break;case 22:i.mode&1?(U=(o=U)||i.memoizedState!==null,Yj(s,e,i),U=o):Yj(s,e,i);break;default:Yj(s,e,i)}}function ak(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var i=s.stateNode;i===null&&(i=s.stateNode=new Kj),e.forEach(function(o){var a=bk.bind(null,s,o);i.has(o)||(i.add(o),o.then(a,a))})}}function ck(s,e){var i=e.deletions;if(i!==null)for(var o=0;o<i.length;o++){var a=i[o];try{var c=s,d=e,h=d;e:for(;h!==null;){switch(h.tag){case 5:X$1=h.stateNode,Xj=!1;break e;case 3:X$1=h.stateNode.containerInfo,Xj=!0;break e;case 4:X$1=h.stateNode.containerInfo,Xj=!0;break e}h=h.return}if(X$1===null)throw Error(p(160));Zj(c,d,a),X$1=null,Xj=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(j){W(a,e,j)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,s),e=e.sibling}function dk(s,e){var i=s.alternate,o=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ck(e,s),ek(s),o&4){try{Pj(3,s,s.return),Qj(3,s)}catch(nt){W(s,s.return,nt)}try{Pj(5,s,s.return)}catch(nt){W(s,s.return,nt)}}break;case 1:ck(e,s),ek(s),o&512&&i!==null&&Lj(i,i.return);break;case 5:if(ck(e,s),ek(s),o&512&&i!==null&&Lj(i,i.return),s.flags&32){var a=s.stateNode;try{ob(a,"")}catch(nt){W(s,s.return,nt)}}if(o&4&&(a=s.stateNode,a!=null)){var c=s.memoizedProps,d=i!==null?i.memoizedProps:c,h=s.type,g=s.updateQueue;if(s.updateQueue=null,g!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&ab(a,c),vb(h,d);var j=vb(h,c);for(d=0;d<g.length;d+=2){var _=g[d],$=g[d+1];_==="style"?sb(a,$):_==="dangerouslySetInnerHTML"?nb(a,$):_==="children"?ob(a,$):ta(a,_,$,j)}switch(h){case"input":bb(a,c);break;case"textarea":ib(a,c);break;case"select":var tt=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var it=c.value;it!=null?fb(a,!!c.multiple,it,!1):tt!==!!c.multiple&&(c.defaultValue!=null?fb(a,!!c.multiple,c.defaultValue,!0):fb(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(nt){W(s,s.return,nt)}}break;case 6:if(ck(e,s),ek(s),o&4){if(s.stateNode===null)throw Error(p(162));a=s.stateNode,c=s.memoizedProps;try{a.nodeValue=c}catch(nt){W(s,s.return,nt)}}break;case 3:if(ck(e,s),ek(s),o&4&&i!==null&&i.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(nt){W(s,s.return,nt)}break;case 4:ck(e,s),ek(s);break;case 13:ck(e,s),ek(s),a=s.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(fk=B())),o&4&&ak(s);break;case 22:if(_=i!==null&&i.memoizedState!==null,s.mode&1?(U=(j=U)||_,ck(e,s),U=j):ck(e,s),ek(s),o&8192){if(j=s.memoizedState!==null,(s.stateNode.isHidden=j)&&!_&&s.mode&1)for(V=s,_=s.child;_!==null;){for($=V=_;V!==null;){switch(tt=V,it=tt.child,tt.tag){case 0:case 11:case 14:case 15:Pj(4,tt,tt.return);break;case 1:Lj(tt,tt.return);var st=tt.stateNode;if(typeof st.componentWillUnmount=="function"){o=tt,i=tt.return;try{e=o,st.props=e.memoizedProps,st.state=e.memoizedState,st.componentWillUnmount()}catch(nt){W(o,i,nt)}}break;case 5:Lj(tt,tt.return);break;case 22:if(tt.memoizedState!==null){gk($);continue}}it!==null?(it.return=tt,V=it):gk($)}_=_.sibling}e:for(_=null,$=s;;){if($.tag===5){if(_===null){_=$;try{a=$.stateNode,j?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=$.stateNode,g=$.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,h.style.display=rb("display",d))}catch(nt){W(s,s.return,nt)}}}else if($.tag===6){if(_===null)try{$.stateNode.nodeValue=j?"":$.memoizedProps}catch(nt){W(s,s.return,nt)}}else if(($.tag!==22&&$.tag!==23||$.memoizedState===null||$===s)&&$.child!==null){$.child.return=$,$=$.child;continue}if($===s)break e;for(;$.sibling===null;){if($.return===null||$.return===s)break e;_===$&&(_=null),$=$.return}_===$&&(_=null),$.sibling.return=$.return,$=$.sibling}}break;case 19:ck(e,s),ek(s),o&4&&ak(s);break;case 21:break;default:ck(e,s),ek(s)}}function ek(s){var e=s.flags;if(e&2){try{e:{for(var i=s.return;i!==null;){if(Tj(i)){var o=i;break e}i=i.return}throw Error(p(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob(a,""),o.flags&=-33);var c=Uj(s);Wj(s,c,a);break;case 3:case 4:var d=o.stateNode.containerInfo,h=Uj(s);Vj(s,h,d);break;default:throw Error(p(161))}}catch(g){W(s,s.return,g)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function hk(s,e,i){V=s,ik(s)}function ik(s,e,i){for(var o=(s.mode&1)!==0;V!==null;){var a=V,c=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Jj;if(!d){var h=a.alternate,g=h!==null&&h.memoizedState!==null||U;h=Jj;var j=U;if(Jj=d,(U=g)&&!j)for(V=a;V!==null;)d=V,g=d.child,d.tag===22&&d.memoizedState!==null?jk(a):g!==null?(g.return=d,V=g):jk(a);for(;c!==null;)V=c,ik(c),c=c.sibling;V=a,Jj=h,U=j}kk(s)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V=c):kk(s)}}function kk(s){for(;V!==null;){var e=V;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U||Qj(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!U)if(i===null)o.componentDidMount();else{var a=e.elementType===e.type?i.memoizedProps:Ci(e.type,i.memoizedProps);o.componentDidUpdate(a,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&sh(e,c,o);break;case 3:var d=e.updateQueue;if(d!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}sh(e,d,i)}break;case 5:var h=e.stateNode;if(i===null&&e.flags&4){i=h;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&i.focus();break;case"img":g.src&&(i.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var j=e.alternate;if(j!==null){var _=j.memoizedState;if(_!==null){var $=_.dehydrated;$!==null&&bd($)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p(163))}U||e.flags&512&&Rj(e)}catch(tt){W(e,e.return,tt)}}if(e===s){V=null;break}if(i=e.sibling,i!==null){i.return=e.return,V=i;break}V=e.return}}function gk(s){for(;V!==null;){var e=V;if(e===s){V=null;break}var i=e.sibling;if(i!==null){i.return=e.return,V=i;break}V=e.return}}function jk(s){for(;V!==null;){var e=V;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{Qj(4,e)}catch(g){W(e,i,g)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var a=e.return;try{o.componentDidMount()}catch(g){W(e,a,g)}}var c=e.return;try{Rj(e)}catch(g){W(e,c,g)}break;case 5:var d=e.return;try{Rj(e)}catch(g){W(e,d,g)}}}catch(g){W(e,e.return,g)}if(e===s){V=null;break}var h=e.sibling;if(h!==null){h.return=e.return,V=h;break}V=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K=0,Q=null,Y=null,Z=0,fj=0,ej=Uf(0),T=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R(){return K&6?B():Ak!==-1?Ak:Ak=B()}function yi(s){return s.mode&1?K&2&&Z!==0?Z&-Z:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(s=C,s!==0||(s=window.event,s=s===void 0?16:jd(s.type)),s):1}function gi(s,e,i,o){if(50<yk)throw yk=0,zk=null,Error(p(185));Ac(s,i,o),(!(K&2)||s!==Q)&&(s===Q&&(!(K&2)&&(qk|=i),T===4&&Ck(s,Z)),Dk(s,o),i===1&&K===0&&!(e.mode&1)&&(Gj=B()+500,fg&&jg()))}function Dk(s,e){var i=s.callbackNode;wc(s,e);var o=uc(s,s===Q?Z:0);if(o===0)i!==null&&bc(i),s.callbackNode=null,s.callbackPriority=0;else if(e=o&-o,s.callbackPriority!==e){if(i!=null&&bc(i),e===1)s.tag===0?ig(Ek.bind(null,s)):hg(Ek.bind(null,s)),Jf(function(){!(K&6)&&jg()}),i=null;else{switch(Dc(o)){case 1:i=fc;break;case 4:i=gc;break;case 16:i=hc;break;case 536870912:i=jc;break;default:i=hc}i=Fk(i,Gk.bind(null,s))}s.callbackPriority=e,s.callbackNode=i}}function Gk(s,e){if(Ak=-1,Bk=0,K&6)throw Error(p(327));var i=s.callbackNode;if(Hk()&&s.callbackNode!==i)return null;var o=uc(s,s===Q?Z:0);if(o===0)return null;if(o&30||o&s.expiredLanes||e)e=Ik(s,o);else{e=o;var a=K;K|=2;var c=Jk();(Q!==s||Z!==e)&&(uk=null,Gj=B()+500,Kk(s,e));do try{Lk();break}catch(h){Mk(s,h)}while(!0);$g(),mk.current=c,K=a,Y!==null?e=0:(Q=null,Z=0,e=T)}if(e!==0){if(e===2&&(a=xc(s),a!==0&&(o=a,e=Nk(s,a))),e===1)throw i=pk,Kk(s,0),Ck(s,o),Dk(s,B()),i;if(e===6)Ck(s,o);else{if(a=s.current.alternate,!(o&30)&&!Ok(a)&&(e=Ik(s,o),e===2&&(c=xc(s),c!==0&&(o=c,e=Nk(s,c))),e===1))throw i=pk,Kk(s,0),Ck(s,o),Dk(s,B()),i;switch(s.finishedWork=a,s.finishedLanes=o,e){case 0:case 1:throw Error(p(345));case 2:Pk(s,tk,uk);break;case 3:if(Ck(s,o),(o&130023424)===o&&(e=fk+500-B(),10<e)){if(uc(s,0)!==0)break;if(a=s.suspendedLanes,(a&o)!==o){R(),s.pingedLanes|=s.suspendedLanes&a;break}s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),e);break}Pk(s,tk,uk);break;case 4:if(Ck(s,o),(o&4194240)===o)break;for(e=s.eventTimes,a=-1;0<o;){var d=31-oc(o);c=1<<d,d=e[d],d>a&&(a=d),o&=~c}if(o=a,o=B()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*lk(o/1960))-o,10<o){s.timeoutHandle=Ff(Pk.bind(null,s,tk,uk),o);break}Pk(s,tk,uk);break;case 5:Pk(s,tk,uk);break;default:throw Error(p(329))}}}return Dk(s,B()),s.callbackNode===i?Gk.bind(null,s):null}function Nk(s,e){var i=sk;return s.current.memoizedState.isDehydrated&&(Kk(s,e).flags|=256),s=Ik(s,e),s!==2&&(e=tk,tk=i,e!==null&&Fj(e)),s}function Fj(s){tk===null?tk=s:tk.push.apply(tk,s)}function Ok(s){for(var e=s;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var a=i[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(s,e){for(e&=~rk,e&=~qk,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var i=31-oc(e),o=1<<i;s[i]=-1,e&=~o}}function Ek(s){if(K&6)throw Error(p(327));Hk();var e=uc(s,0);if(!(e&1))return Dk(s,B()),null;var i=Ik(s,e);if(s.tag!==0&&i===2){var o=xc(s);o!==0&&(e=o,i=Nk(s,o))}if(i===1)throw i=pk,Kk(s,0),Ck(s,e),Dk(s,B()),i;if(i===6)throw Error(p(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,Pk(s,tk,uk),Dk(s,B()),null}function Qk(s,e){var i=K;K|=1;try{return s(e)}finally{K=i,K===0&&(Gj=B()+500,fg&&jg())}}function Rk(s){wk!==null&&wk.tag===0&&!(K&6)&&Hk();var e=K;K|=1;var i=ok.transition,o=C;try{if(ok.transition=null,C=1,s)return s()}finally{C=o,ok.transition=i,K=e,!(K&6)&&jg()}}function Hj(){fj=ej.current,E(ej)}function Kk(s,e){s.finishedWork=null,s.finishedLanes=0;var i=s.timeoutHandle;if(i!==-1&&(s.timeoutHandle=-1,Gf(i)),Y!==null)for(i=Y.return;i!==null;){var o=i;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:zh(),E(Wf),E(H),Eh();break;case 5:Bh(o);break;case 4:zh();break;case 13:E(L);break;case 19:E(L);break;case 10:ah(o.type._context);break;case 22:case 23:Hj()}i=i.return}if(Q=s,Y=s=Pg(s.current,null),Z=fj=e,T=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(i=fh[e],o=i.interleaved,o!==null){i.interleaved=null;var a=o.next,c=i.pending;if(c!==null){var d=c.next;c.next=a,o.next=d}i.pending=o}fh=null}return s}function Mk(s,e){do{var i=Y;try{if($g(),Fh.current=Rh,Ih){for(var o=M.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Ih=!1}if(Hh=0,O=N=M=null,Jh=!1,Kh=0,nk.current=null,i===null||i.return===null){T=1,pk=e,Y=null;break}e:{var c=s,d=i.return,h=i,g=e;if(e=Z,h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var j=g,_=h,$=_.tag;if(!(_.mode&1)&&($===0||$===11||$===15)){var tt=_.alternate;tt?(_.updateQueue=tt.updateQueue,_.memoizedState=tt.memoizedState,_.lanes=tt.lanes):(_.updateQueue=null,_.memoizedState=null)}var it=Ui(d);if(it!==null){it.flags&=-257,Vi(it,d,h,c,e),it.mode&1&&Si(c,j,e),e=it,g=j;var st=e.updateQueue;if(st===null){var nt=new Set;nt.add(g),e.updateQueue=nt}else st.add(g);break e}else{if(!(e&1)){Si(c,j,e),tj();break e}g=Error(p(426))}}else if(I&&h.mode&1){var at=Ui(d);if(at!==null){!(at.flags&65536)&&(at.flags|=256),Vi(at,d,h,c,e),Jg(Ji(g,h));break e}}c=g=Ji(g,h),T!==4&&(T=2),sk===null?sk=[c]:sk.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var et=Ni(c,g,e);ph(c,et);break e;case 1:h=g;var _e=c.type,b=c.stateNode;if(!(c.flags&128)&&(typeof _e.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ri===null||!Ri.has(b)))){c.flags|=65536,e&=-e,c.lanes|=e;var rt=Qi(c,h,e);ph(c,rt);break e}}c=c.return}while(c!==null)}Sk(i)}catch(lt){e=lt,Y===i&&i!==null&&(Y=i=i.return);continue}break}while(!0)}function Jk(){var s=mk.current;return mk.current=Rh,s===null?Rh:s}function tj(){(T===0||T===3||T===2)&&(T=4),Q===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q,Z)}function Ik(s,e){var i=K;K|=2;var o=Jk();(Q!==s||Z!==e)&&(uk=null,Kk(s,e));do try{Tk();break}catch(a){Mk(s,a)}while(!0);if($g(),K=i,mk.current=o,Y!==null)throw Error(p(261));return Q=null,Z=0,T}function Tk(){for(;Y!==null;)Uk(Y)}function Lk(){for(;Y!==null&&!cc();)Uk(Y)}function Uk(s){var e=Vk(s.alternate,s,fj);s.memoizedProps=s.pendingProps,e===null?Sk(s):Y=e,nk.current=null}function Sk(s){var e=s;do{var i=e.alternate;if(s=e.return,e.flags&32768){if(i=Ij(i,e),i!==null){i.flags&=32767,Y=i;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{T=6,Y=null;return}}else if(i=Ej(i,e,fj),i!==null){Y=i;return}if(e=e.sibling,e!==null){Y=e;return}Y=e=s}while(e!==null);T===0&&(T=5)}function Pk(s,e,i){var o=C,a=ok.transition;try{ok.transition=null,C=1,Wk(s,e,i,o)}finally{ok.transition=a,C=o}return null}function Wk(s,e,i,o){do Hk();while(wk!==null);if(K&6)throw Error(p(327));i=s.finishedWork;var a=s.finishedLanes;if(i===null)return null;if(s.finishedWork=null,s.finishedLanes=0,i===s.current)throw Error(p(177));s.callbackNode=null,s.callbackPriority=0;var c=i.lanes|i.childLanes;if(Bc(s,c),s===Q&&(Y=Q=null,Z=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),c=(i.flags&15990)!==0,i.subtreeFlags&15990||c){c=ok.transition,ok.transition=null;var d=C;C=1;var h=K;K|=4,nk.current=null,Oj(s,i),dk(i,s),Oe(Df),dd=!!Cf,Df=Cf=null,s.current=i,hk(i),dc(),K=h,C=d,ok.transition=c}else s.current=i;if(vk&&(vk=!1,wk=s,xk=a),c=s.pendingLanes,c===0&&(Ri=null),mc(i.stateNode),Dk(s,B()),e!==null)for(o=s.onRecoverableError,i=0;i<e.length;i++)a=e[i],o(a.value,{componentStack:a.stack,digest:a.digest});if(Oi)throw Oi=!1,s=Pi,Pi=null,s;return xk&1&&s.tag!==0&&Hk(),c=s.pendingLanes,c&1?s===zk?yk++:(yk=0,zk=s):yk=0,jg(),null}function Hk(){if(wk!==null){var s=Dc(xk),e=ok.transition,i=C;try{if(ok.transition=null,C=16>s?16:s,wk===null)var o=!1;else{if(s=wk,wk=null,xk=0,K&6)throw Error(p(331));var a=K;for(K|=4,V=s.current;V!==null;){var c=V,d=c.child;if(V.flags&16){var h=c.deletions;if(h!==null){for(var g=0;g<h.length;g++){var j=h[g];for(V=j;V!==null;){var _=V;switch(_.tag){case 0:case 11:case 15:Pj(8,_,c)}var $=_.child;if($!==null)$.return=_,V=$;else for(;V!==null;){_=V;var tt=_.sibling,it=_.return;if(Sj(_),_===j){V=null;break}if(tt!==null){tt.return=it,V=tt;break}V=it}}}var st=c.alternate;if(st!==null){var nt=st.child;if(nt!==null){st.child=null;do{var at=nt.sibling;nt.sibling=null,nt=at}while(nt!==null)}}V=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,V=d;else e:for(;V!==null;){if(c=V,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Pj(9,c,c.return)}var et=c.sibling;if(et!==null){et.return=c.return,V=et;break e}V=c.return}}var _e=s.current;for(V=_e;V!==null;){d=V;var b=d.child;if(d.subtreeFlags&2064&&b!==null)b.return=d,V=b;else e:for(d=_e;V!==null;){if(h=V,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Qj(9,h)}}catch(lt){W(h,h.return,lt)}if(h===d){V=null;break e}var rt=h.sibling;if(rt!==null){rt.return=h.return,V=rt;break e}V=h.return}}if(K=a,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,s)}catch{}o=!0}return o}finally{C=i,ok.transition=e}}return!1}function Xk(s,e,i){e=Ji(i,e),e=Ni(s,e,1),s=nh(s,e,1),e=R(),s!==null&&(Ac(s,1,e),Dk(s,e))}function W(s,e,i){if(s.tag===3)Xk(s,s,i);else for(;e!==null;){if(e.tag===3){Xk(e,s,i);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ri===null||!Ri.has(o))){s=Ji(i,s),s=Qi(e,s,1),e=nh(e,s,1),s=R(),e!==null&&(Ac(e,1,s),Dk(e,s));break}}e=e.return}}function Ti(s,e,i){var o=s.pingCache;o!==null&&o.delete(e),e=R(),s.pingedLanes|=s.suspendedLanes&i,Q===s&&(Z&i)===i&&(T===4||T===3&&(Z&130023424)===Z&&500>B()-fk?Kk(s,0):rk|=i),Dk(s,e)}function Yk(s,e){e===0&&(s.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var i=R();s=ih(s,e),s!==null&&(Ac(s,e,i),Dk(s,i))}function uj(s){var e=s.memoizedState,i=0;e!==null&&(i=e.retryLane),Yk(s,i)}function bk(s,e){var i=0;switch(s.tag){case 13:var o=s.stateNode,a=s.memoizedState;a!==null&&(i=a.retryLane);break;case 19:o=s.stateNode;break;default:throw Error(p(314))}o!==null&&o.delete(e),Yk(s,i)}var Vk;Vk=function(s,e,i){if(s!==null)if(s.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(s.lanes&i)&&!(e.flags&128))return dh=!1,yj(s,e,i);dh=!!(s.flags&131072)}else dh=!1,I&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;ij(s,e),s=e.pendingProps;var a=Yf(e,H.current);ch(e,i),a=Nh(null,e,o,s,a,i);var c=Sh();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(o)?(c=!0,cg(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kh(e),a.updater=Ei,e.stateNode=a,a._reactInternals=e,Ii(e,o,s,i),e=jj(null,e,o,!0,c,i)):(e.tag=0,I&&c&&vg(e),Xi(null,e,a,i),e=e.child),e;case 16:o=e.elementType;e:{switch(ij(s,e),s=e.pendingProps,a=o._init,o=a(o._payload),e.type=o,a=e.tag=Zk(o),s=Ci(o,s),a){case 0:e=cj(null,e,o,s,i);break e;case 1:e=hj(null,e,o,s,i);break e;case 11:e=Yi(null,e,o,s,i);break e;case 14:e=$i(null,e,o,Ci(o.type,s),i);break e}throw Error(p(306,o,""))}return e;case 0:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),cj(s,e,o,a,i);case 1:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),hj(s,e,o,a,i);case 3:e:{if(kj(e),s===null)throw Error(p(387));o=e.pendingProps,c=e.memoizedState,a=c.element,lh(s,e),qh(e,o,null,i);var d=e.memoizedState;if(o=d.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ji(Error(p(423)),e),e=lj(s,e,o,i,a);break e}else if(o!==a){a=Ji(Error(p(424)),e),e=lj(s,e,o,i,a);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I=!0,zg=null,i=Vg(e,null,o,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ig(),o===a){e=Zi(s,e,i);break e}Xi(s,e,o,i)}e=e.child}return e;case 5:return Ah(e),s===null&&Eg(e),o=e.type,a=e.pendingProps,c=s!==null?s.memoizedProps:null,d=a.children,Ef(o,a)?d=null:c!==null&&Ef(o,c)&&(e.flags|=32),gj(s,e),Xi(s,e,d,i),e.child;case 6:return s===null&&Eg(e),null;case 13:return oj(s,e,i);case 4:return yh(e,e.stateNode.containerInfo),o=e.pendingProps,s===null?e.child=Ug(e,null,o,i):Xi(s,e,o,i),e.child;case 11:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),Yi(s,e,o,a,i);case 7:return Xi(s,e,e.pendingProps,i),e.child;case 8:return Xi(s,e,e.pendingProps.children,i),e.child;case 12:return Xi(s,e,e.pendingProps.children,i),e.child;case 10:e:{if(o=e.type._context,a=e.pendingProps,c=e.memoizedProps,d=a.value,G(Wg,o._currentValue),o._currentValue=d,c!==null)if(He(c.value,d)){if(c.children===a.children&&!Wf.current){e=Zi(s,e,i);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var h=c.dependencies;if(h!==null){d=c.child;for(var g=h.firstContext;g!==null;){if(g.context===o){if(c.tag===1){g=mh(-1,i&-i),g.tag=2;var j=c.updateQueue;if(j!==null){j=j.shared;var _=j.pending;_===null?g.next=g:(g.next=_.next,_.next=g),j.pending=g}}c.lanes|=i,g=c.alternate,g!==null&&(g.lanes|=i),bh(c.return,i,e),h.lanes|=i;break}g=g.next}}else if(c.tag===10)d=c.type===e.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(p(341));d.lanes|=i,h=d.alternate,h!==null&&(h.lanes|=i),bh(d,i,e),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===e){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}Xi(s,e,a.children,i),e=e.child}return e;case 9:return a=e.type,o=e.pendingProps.children,ch(e,i),a=eh(a),o=o(a),e.flags|=1,Xi(s,e,o,i),e.child;case 14:return o=e.type,a=Ci(o,e.pendingProps),a=Ci(o.type,a),$i(s,e,o,a,i);case 15:return bj(s,e,e.type,e.pendingProps,i);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Ci(o,a),ij(s,e),e.tag=1,Zf(o)?(s=!0,cg(e)):s=!1,ch(e,i),Gi(e,o,a),Ii(e,o,a,i),jj(null,e,o,!0,s,i);case 19:return xj(s,e,i);case 22:return dj(s,e,i)}throw Error(p(156,e.tag))};function Fk(s,e){return ac(s,e)}function $k(s,e,i,o){this.tag=s,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(s,e,i,o){return new $k(s,e,i,o)}function aj(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Zk(s){if(typeof s=="function")return aj(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Da)return 11;if(s===Ga)return 14}return 2}function Pg(s,e){var i=s.alternate;return i===null?(i=Bg(s.tag,e,s.key,s.mode),i.elementType=s.elementType,i.type=s.type,i.stateNode=s.stateNode,i.alternate=s,s.alternate=i):(i.pendingProps=e,i.type=s.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=s.flags&14680064,i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=s.sibling,i.index=s.index,i.ref=s.ref,i}function Rg(s,e,i,o,a,c){var d=2;if(o=s,typeof s=="function")aj(s)&&(d=1);else if(typeof s=="string")d=5;else e:switch(s){case ya:return Tg(i.children,a,c,e);case za:d=8,a|=8;break;case Aa:return s=Bg(12,i,e,a|2),s.elementType=Aa,s.lanes=c,s;case Ea:return s=Bg(13,i,e,a),s.elementType=Ea,s.lanes=c,s;case Fa:return s=Bg(19,i,e,a),s.elementType=Fa,s.lanes=c,s;case Ia:return pj(i,a,c,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Ba:d=10;break e;case Ca:d=9;break e;case Da:d=11;break e;case Ga:d=14;break e;case Ha:d=16,o=null;break e}throw Error(p(130,s==null?s:typeof s,""))}return e=Bg(d,i,e,a),e.elementType=s,e.type=o,e.lanes=c,e}function Tg(s,e,i,o){return s=Bg(7,s,o,e),s.lanes=i,s}function pj(s,e,i,o){return s=Bg(22,s,o,e),s.elementType=Ia,s.lanes=i,s.stateNode={isHidden:!1},s}function Qg(s,e,i){return s=Bg(6,s,null,e),s.lanes=i,s}function Sg(s,e,i){return e=Bg(4,s.children!==null?s.children:[],s.key,e),e.lanes=i,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function al(s,e,i,o,a){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function bl(s,e,i,o,a,c,d,h,g){return s=new al(s,e,i,h,g),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),s.current=c,c.stateNode=s,c.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(c),s}function cl(s,e,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:o==null?null:""+o,children:s,containerInfo:e,implementation:i}}function dl(s){if(!s)return Vf;s=s._reactInternals;e:{if(Vb(s)!==s||s.tag!==1)throw Error(p(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p(171))}if(s.tag===1){var i=s.type;if(Zf(i))return bg(s,i,e)}return e}function el(s,e,i,o,a,c,d,h,g){return s=bl(i,o,!0,s,a,c,d,h,g),s.context=dl(null),i=s.current,o=R(),a=yi(i),c=mh(o,a),c.callback=e??null,nh(i,c,a),s.current.lanes=a,Ac(s,a,o),Dk(s,o),s}function fl(s,e,i,o){var a=e.current,c=R(),d=yi(a);return i=dl(i),e.context===null?e.context=i:e.pendingContext=i,e=mh(c,d),e.payload={element:s},o=o===void 0?null:o,o!==null&&(e.callback=o),s=nh(a,e,d),s!==null&&(gi(s,a,d,c),oh(s,a,d)),d}function gl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function hl(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var i=s.retryLane;s.retryLane=i!==0&&i<e?i:e}}function il(s,e){hl(s,e),(s=s.alternate)&&hl(s,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(s){console.error(s)};function ll(s){this._internalRoot=s}ml.prototype.render=ll.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(p(409));fl(s,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;Rk(function(){fl(null,s,null,null)}),e[uf]=null}};function ml(s){this._internalRoot=s}ml.prototype.unstable_scheduleHydration=function(s){if(s){var e=Hc();s={blockedOn:null,target:s,priority:e};for(var i=0;i<Qc.length&&e!==0&&e<Qc[i].priority;i++);Qc.splice(i,0,s),i===0&&Vc(s)}};function nl(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ol(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(s,e,i,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var j=gl(d);c.call(j)}}var d=el(e,o,s,0,null,!1,!1,"",pl);return s._reactRootContainer=d,s[uf]=d.current,sf(s.nodeType===8?s.parentNode:s),Rk(),d}for(;a=s.lastChild;)s.removeChild(a);if(typeof o=="function"){var h=o;o=function(){var j=gl(g);h.call(j)}}var g=bl(s,0,!1,null,null,!1,!1,"",pl);return s._reactRootContainer=g,s[uf]=g.current,sf(s.nodeType===8?s.parentNode:s),Rk(function(){fl(e,g,i,o)}),g}function rl(s,e,i,o,a){var c=i._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var h=a;a=function(){var g=gl(d);h.call(g)}}fl(e,d,s,a)}else d=ql(i,e,s,a,o);return gl(d)}Ec=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var i=tc(e.pendingLanes);i!==0&&(Cc(e,i|1),Dk(e,B()),!(K&6)&&(Gj=B()+500,jg()))}break;case 13:Rk(function(){var o=ih(s,1);if(o!==null){var a=R();gi(o,s,1,a)}}),il(s,1)}};Fc=function(s){if(s.tag===13){var e=ih(s,134217728);if(e!==null){var i=R();gi(e,s,134217728,i)}il(s,134217728)}};Gc=function(s){if(s.tag===13){var e=yi(s),i=ih(s,e);if(i!==null){var o=R();gi(i,s,e,o)}il(s,e)}};Hc=function(){return C};Ic=function(s,e){var i=C;try{return C=s,e()}finally{C=i}};yb=function(s,e,i){switch(e){case"input":if(bb(s,i),e=i.name,i.type==="radio"&&e!=null){for(i=s;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var o=i[e];if(o!==s&&o.form===s.form){var a=Db(o);if(!a)throw Error(p(90));Wa(o),bb(o,a)}}}break;case"textarea":ib(s,i);break;case"select":e=i.value,e!=null&&fb(s,!!i.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Zb(s),s===null?null:s.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(s,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p(200));return cl(s,e,null,i)};reactDom_production_min.createRoot=function(s,e){if(!nl(s))throw Error(p(299));var i=!1,o="",a=kl;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=bl(s,1,!1,null,null,i,!1,o,a),s[uf]=e.current,sf(s.nodeType===8?s.parentNode:s),new ll(e)};reactDom_production_min.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(p(188)):(s=Object.keys(s).join(","),Error(p(268,s)));return s=Zb(e),s=s===null?null:s.stateNode,s};reactDom_production_min.flushSync=function(s){return Rk(s)};reactDom_production_min.hydrate=function(s,e,i){if(!ol(e))throw Error(p(200));return rl(null,s,e,!0,i)};reactDom_production_min.hydrateRoot=function(s,e,i){if(!nl(s))throw Error(p(405));var o=i!=null&&i.hydratedSources||null,a=!1,c="",d=kl;if(i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),e=el(e,null,s,1,i??null,a,!1,c,d),s[uf]=e.current,sf(s),o)for(s=0;s<o.length;s++)i=o[s],a=i._getVersion,a=a(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,a]:e.mutableSourceEagerHydrationData.push(i,a);return new ml(e)};reactDom_production_min.render=function(s,e,i){if(!ol(e))throw Error(p(200));return rl(null,s,e,!1,i)};reactDom_production_min.unmountComponentAtNode=function(s){if(!ol(s))throw Error(p(40));return s._reactRootContainer?(Rk(function(){rl(null,null,s,!1,function(){s._reactRootContainer=null,s[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(s,e,i,o){if(!ol(i))throw Error(p(200));if(s==null||s._reactInternals===void 0)throw Error(p(38));return rl(s,e,i,!1,o)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(s){console.error(s)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const scriptRel="modulepreload",assetsURL=function(s){return"/goldenpricelist/"+s},seen={},__vitePreload=function(e,i,o){let a=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),h=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));a=Promise.allSettled(i.map(g=>{if(g=assetsURL(g),g in seen)return;seen[g]=!0;const j=g.endsWith(".css"),_=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const $=document.createElement("link");if($.rel=j?"stylesheet":scriptRel,j||($.as="script"),$.crossOrigin="",$.href=g,h&&$.setAttribute("nonce",h),document.head.appendChild($),j)return new Promise((tt,it)=>{$.addEventListener("load",tt),$.addEventListener("error",()=>it(new Error(`Unable to preload CSS for ${g}`)))})}))}function c(d){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=d,window.dispatchEvent(h),!h.defaultPrevented)throw d}return a.then(d=>{for(const h of d||[])h.status==="rejected"&&c(h.reason);return e().catch(c)})},resolveFetch$3=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...i)=>__vitePreload(async()=>{const{default:o}=await Promise.resolve().then(()=>browser);return{default:o}},void 0).then(({default:o})=>o(...i)):e=fetch,(...i)=>e(...i)};class FunctionsError extends Error{constructor(e,i="FunctionsError",o){super(e),this.name=i,this.context=o}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};class FunctionsClient{constructor(e,{headers:i={},customFetch:o,region:a=FunctionRegion.Any}={}){this.url=e,this.headers=i,this.region=a,this.fetch=resolveFetch$3(o)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,i={}){var o;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:a,method:c,body:d}=i;let h={},{region:g}=i;g||(g=this.region);const j=new URL(`${this.url}/${e}`);g&&g!=="any"&&(h["x-region"]=g,j.searchParams.set("forceFunctionRegion",g));let _;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",_=d):typeof d=="string"?(h["Content-Type"]="text/plain",_=d):typeof FormData<"u"&&d instanceof FormData?_=d:(h["Content-Type"]="application/json",_=JSON.stringify(d)));const $=yield this.fetch(j.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:_}).catch(nt=>{throw new FunctionsFetchError(nt)}),tt=$.headers.get("x-relay-error");if(tt&&tt==="true")throw new FunctionsRelayError($);if(!$.ok)throw new FunctionsHttpError($);let it=((o=$.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),st;return it==="application/json"?st=yield $.json():it==="application/octet-stream"?st=yield $.blob():it==="text/event-stream"?st=$:it==="multipart/form-data"?st=yield $.formData():st=yield $.text(),{data:st,error:null,response:$}}catch(a){return{data:null,error:a,response:a instanceof FunctionsHttpError||a instanceof FunctionsRelayError?a.context:void 0}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,i){return this.headers=Object.assign({},this.headers),this.headers[e]=i,this}then(e,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var d,h,g;let j=null,_=null,$=null,tt=c.status,it=c.statusText;if(c.ok){if(this.method!=="HEAD"){const et=await c.text();et===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?_=et:_=JSON.parse(et))}const nt=(d=this.headers.Prefer)===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),at=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");nt&&at&&at.length>1&&($=parseInt(at[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(j={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,$=null,tt=406,it="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const nt=await c.text();try{j=JSON.parse(nt),Array.isArray(j)&&c.status===404&&(_=[],j=null,tt=200,it="OK")}catch{c.status===404&&nt===""?(tt=204,it="No Content"):j={message:nt}}if(j&&this.isMaybeSingle&&(!((g=j==null?void 0:j.details)===null||g===void 0)&&g.includes("0 rows"))&&(j=null,tt=200,it="OK"),j&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(j)}return{error:j,data:_,count:$,status:tt,statusText:it}});return this.shouldThrowOnError||(a=a.catch(c=>{var d,h,g;return{error:{message:`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(g=c==null?void 0:c.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),a.then(e,i)}returns(){return this}overrideTypes(){return this}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(e){let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const d=c?`${c}.order`:"order",h=this.url.searchParams.get(d);return this.url.searchParams.set(d,`${h?`${h},`:""}${e}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${e}`),this.url.searchParams.set(d,`${i-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:d="text"}={}){var h;const g=[e?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),j=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${d}; for="${j}"; options=${g};`,d==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(e,i){return this.url.searchParams.append(e,`eq.${i}`),this}neq(e,i){return this.url.searchParams.append(e,`neq.${i}`),this}gt(e,i){return this.url.searchParams.append(e,`gt.${i}`),this}gte(e,i){return this.url.searchParams.append(e,`gte.${i}`),this}lt(e,i){return this.url.searchParams.append(e,`lt.${i}`),this}lte(e,i){return this.url.searchParams.append(e,`lte.${i}`),this}like(e,i){return this.url.searchParams.append(e,`like.${i}`),this}likeAllOf(e,i){return this.url.searchParams.append(e,`like(all).{${i.join(",")}}`),this}likeAnyOf(e,i){return this.url.searchParams.append(e,`like(any).{${i.join(",")}}`),this}ilike(e,i){return this.url.searchParams.append(e,`ilike.${i}`),this}ilikeAllOf(e,i){return this.url.searchParams.append(e,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(e,i){return this.url.searchParams.append(e,`ilike(any).{${i.join(",")}}`),this}is(e,i){return this.url.searchParams.append(e,`is.${i}`),this}in(e,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(e,`in.(${o})`),this}contains(e,i){return typeof i=="string"?this.url.searchParams.append(e,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(e,`cs.{${i.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(i)}`),this}containedBy(e,i){return typeof i=="string"?this.url.searchParams.append(e,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(e,`cd.{${i.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(i)}`),this}rangeGt(e,i){return this.url.searchParams.append(e,`sr.${i}`),this}rangeGte(e,i){return this.url.searchParams.append(e,`nxl.${i}`),this}rangeLt(e,i){return this.url.searchParams.append(e,`sl.${i}`),this}rangeLte(e,i){return this.url.searchParams.append(e,`nxr.${i}`),this}rangeAdjacent(e,i){return this.url.searchParams.append(e,`adj.${i}`),this}overlaps(e,i){return typeof i=="string"?this.url.searchParams.append(e,`ov.${i}`):this.url.searchParams.append(e,`ov.{${i.join(",")}}`),this}textSearch(e,i,{config:o,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const d=o===void 0?"":`(${o})`;return this.url.searchParams.append(e,`${c}fts${d}.${i}`),this}match(e){return Object.entries(e).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(e,i,o){return this.url.searchParams.append(e,`not.${i}.${o}`),this}or(e,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,i,o){return this.url.searchParams.append(e,`${i}.${o}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(e,{headers:i={},schema:o,fetch:a}){this.url=e,this.headers=i,this.schema=o,this.fetch=a}select(e,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let c=!1;const d=(e??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",d),o&&(this.headers.Prefer=`count=${o}`),new PostgrestFilterBuilder_1$2.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:i,defaultToNull:o=!0}={}){const a="POST",c=[];if(this.headers.Prefer&&c.push(this.headers.Prefer),i&&c.push(`count=${i}`),o||c.push("missing=default"),this.headers.Prefer=c.join(","),Array.isArray(e)){const d=e.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(d.length>0){const h=[...new Set(d)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){const d="POST",h=[`resolution=${o?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&h.push(this.headers.Prefer),a&&h.push(`count=${a}`),c||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(e)){const g=e.reduce((j,_)=>j.concat(Object.keys(_)),[]);if(g.length>0){const j=[...new Set(g)].map(_=>`"${_}"`);this.url.searchParams.set("columns",j.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:i}={}){const o="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),this.headers.Prefer=a.join(","),new PostgrestFilterBuilder_1$2.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const i="DELETE",o=[];return e&&o.push(`count=${e}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new PostgrestFilterBuilder_1$2.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var constants={},version$4={};Object.defineProperty(version$4,"__esModule",{value:!0});version$4.version=void 0;version$4.version="0.0.0-automated";Object.defineProperty(constants,"__esModule",{value:!0});constants.DEFAULT_HEADERS=void 0;const version_1=version$4;constants.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${version_1.version}`};var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2),constants_1=constants;let PostgrestClient$1=class Gt{constructor(e,{headers:i={},schema:o,fetch:a}={}){this.url=e,this.headers=Object.assign(Object.assign({},constants_1.DEFAULT_HEADERS),i),this.schemaName=o,this.fetch=a}from(e){const i=new URL(`${this.url}/${e}`);return new PostgrestQueryBuilder_1$1.default(i,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Gt(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,i={},{head:o=!1,get:a=!1,count:c}={}){let d;const h=new URL(`${this.url}/rpc/${e}`);let g;o||a?(d=o?"HEAD":"GET",Object.entries(i).filter(([_,$])=>$!==void 0).map(([_,$])=>[_,Array.isArray($)?`{${$.join(",")}}`:`${$}`]).forEach(([_,$])=>{h.searchParams.append(_,$)})):(d="POST",g=i);const j=Object.assign({},this.headers);return c&&(j.Prefer=`count=${c}`),new PostgrestFilterBuilder_1$1.default({method:d,url:h,headers:j,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default;class WebSocketFactory{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const i=parseInt(process.versions.node.split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let i=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(i+=`

Suggested solution: ${e.workaround}`),new Error(i)}static createWebSocket(e,i){const o=this.getWebSocketConstructor();return new o(e,i)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const version$3="2.15.1",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(s){s.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,i){return e.constructor===ArrayBuffer?i(this._binaryDecode(e)):i(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const i=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,i,o)}_decodeBroadcast(e,i,o){const a=i.getUint8(1),c=i.getUint8(2);let d=this.HEADER_LENGTH+2;const h=o.decode(e.slice(d,d+a));d=d+a;const g=o.decode(e.slice(d,d+c));d=d+c;const j=JSON.parse(o.decode(e.slice(d,e.byteLength)));return{ref:null,topic:h,event:g,payload:j}}}class Timer{constructor(e,i){this.callback=e,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(s,e,i={})=>{var o;const a=(o=i.skipTypes)!==null&&o!==void 0?o:[];return Object.keys(e).reduce((c,d)=>(c[d]=convertColumn(d,s,e,a),c),{})},convertColumn=(s,e,i,o)=>{const a=e.find(h=>h.name===s),c=a==null?void 0:a.type,d=i[s];return c&&!o.includes(c)?convertCell(c,d):noop$1(d)},convertCell=(s,e)=>{if(s.charAt(0)==="_"){const i=s.slice(1,s.length);return toArray(e,i)}switch(s){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=s=>s,toBoolean=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},toNumber=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},toJson=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},toArray=(s,e)=>{if(typeof s!="string")return s;const i=s.length-1,o=s[i];if(s[0]==="{"&&o==="}"){let c;const d=s.slice(1,i);try{c=JSON.parse("["+d+"]")}catch{c=d?d.split(","):[]}return c.map(h=>convertCell(e,h))}return s},toTimestampString=s=>typeof s=="string"?s.replace(" ","T"):s,httpEndpointURL=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Push{constructor(e,i,o={},a=DEFAULT_TIMEOUT){this.channel=e,this.event=i,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,i){var o;return this._hasReceived(e)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:e,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:i}){this.recHooks.filter(o=>o.status===e).forEach(o=>o.callback(i))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,i){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:c,onLeave:d,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,a,c,d),this.pendingDiffs.forEach(g=>{this.state=RealtimePresence.syncDiff(this.state,g,c,d)}),this.pendingDiffs=[],h()}),this.channel._on(o.diff,{},a=>{const{onJoin:c,onLeave:d,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=RealtimePresence.syncDiff(this.state,a,c,d),h())}),this.onJoin((a,c,d)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:c,newPresences:d})}),this.onLeave((a,c,d)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:c,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,i,o,a){const c=this.cloneDeep(e),d=this.transformState(i),h={},g={};return this.map(c,(j,_)=>{d[j]||(g[j]=_)}),this.map(d,(j,_)=>{const $=c[j];if($){const tt=_.map(at=>at.presence_ref),it=$.map(at=>at.presence_ref),st=_.filter(at=>it.indexOf(at.presence_ref)<0),nt=$.filter(at=>tt.indexOf(at.presence_ref)<0);st.length>0&&(h[j]=st),nt.length>0&&(g[j]=nt)}else h[j]=_}),this.syncDiff(c,{joins:h,leaves:g},o,a)}static syncDiff(e,i,o,a){const{joins:c,leaves:d}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(c,(h,g)=>{var j;const _=(j=e[h])!==null&&j!==void 0?j:[];if(e[h]=this.cloneDeep(g),_.length>0){const $=e[h].map(it=>it.presence_ref),tt=_.filter(it=>$.indexOf(it.presence_ref)<0);e[h].unshift(...tt)}o(h,_,g)}),this.map(d,(h,g)=>{let j=e[h];if(!j)return;const _=g.map($=>$.presence_ref);j=j.filter($=>_.indexOf($.presence_ref)<0),e[h]=j,a(h,j,g),j.length===0&&delete e[h]}),e}static map(e,i){return Object.getOwnPropertyNames(e).map(o=>i(o,e[o]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((i,o)=>{const a=e[o];return"metas"in a?i[o]=a.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):i[o]=a,i},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,i={config:{}},o){this.topic=e,this.params=i,this.socket=o,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(a,c)=>{this._trigger(this._replyEventName(c),a)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,i=this.timeout){var o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,g=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(tt=>tt.filter))!==null&&a!==void 0?a:[],j=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0,_={},$={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:j}),postgres_changes:g,private:h};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(tt=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,tt)),this._onClose(()=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:$},_)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:tt})=>{var it;if(this.socket.setAuth(),tt===void 0){e==null||e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const st=this.bindings.postgres_changes,nt=(it=st==null?void 0:st.length)!==null&&it!==void 0?it:0,at=[];for(let et=0;et<nt;et++){const _e=st[et],{filter:{event:b,schema:rt,table:lt,filter:ot}}=_e,dt=tt&&tt[et];if(dt&&dt.event===b&&dt.schema===rt&&dt.table===lt&&dt.filter===ot)at.push(Object.assign(Object.assign({},_e),{id:dt.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=at,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",tt=>{this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(tt).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,i={}){return await this.send({type:"presence",event:"track",payload:e},i.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,i,o){return this.state===CHANNEL_STATES.joined&&e===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,i,o)}async send(e,i={}){var o,a;if(!this._canPush()&&e.type==="broadcast"){const{event:c,payload:d}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:d,private:this.private}]})};try{const j=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=j.body)===null||a===void 0?void 0:a.cancel()),j.ok?"ok":"error"}catch(j){return j.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var d,h,g;const j=this._push(e.type,e,i.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(d=this.params)===null||d===void 0?void 0:d.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),j.receive("ok",()=>c("ok")),j.receive("error",()=>c("error")),j.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new Push(this,CHANNEL_EVENTS.leave,{},e),o.receive("ok",()=>{i(),a("ok")}).receive("timeout",()=>{i(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(e,i,o){const a=new AbortController,c=setTimeout(()=>a.abort(),o),d=await this.socket.fetch(e,Object.assign(Object.assign({},i),{signal:a.signal}));return clearTimeout(c),d}_push(e,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Push(this,e,i,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(e,i,o){return i}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,i,o){var a,c;const d=e.toLocaleLowerCase(),{close:h,error:g,leave:j,join:_}=CHANNEL_EVENTS;if(o&&[h,g,j,_].indexOf(d)>=0&&o!==this._joinRef())return;let tt=this._onMessage(d,i,o);if(i&&!tt)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(it=>{var st,nt,at;return((st=it.filter)===null||st===void 0?void 0:st.event)==="*"||((at=(nt=it.filter)===null||nt===void 0?void 0:nt.event)===null||at===void 0?void 0:at.toLocaleLowerCase())===d}).map(it=>it.callback(tt,o)):(c=this.bindings[d])===null||c===void 0||c.filter(it=>{var st,nt,at,et,_e,b;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in it){const rt=it.id,lt=(st=it.filter)===null||st===void 0?void 0:st.event;return rt&&((nt=i.ids)===null||nt===void 0?void 0:nt.includes(rt))&&(lt==="*"||(lt==null?void 0:lt.toLocaleLowerCase())===((at=i.data)===null||at===void 0?void 0:at.type.toLocaleLowerCase()))}else{const rt=(_e=(et=it==null?void 0:it.filter)===null||et===void 0?void 0:et.event)===null||_e===void 0?void 0:_e.toLocaleLowerCase();return rt==="*"||rt===((b=i==null?void 0:i.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return it.type.toLocaleLowerCase()===d}).map(it=>{if(typeof tt=="object"&&"ids"in tt){const st=tt.data,{schema:nt,table:at,commit_timestamp:et,type:_e,errors:b}=st;tt=Object.assign(Object.assign({},{schema:nt,table:at,commit_timestamp:et,eventType:_e,new:{},old:{},errors:b}),this._getPayloadRecords(st))}it.callback(tt,o)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,i,o){const a=e.toLocaleLowerCase(),c={type:a,filter:i,callback:o};return this.bindings[a]?this.bindings[a].push(c):this.bindings[a]=[c],this}_off(e,i){const o=e.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var c;return!(((c=a.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===o&&RealtimeChannel.isEqual(a.filter,i))})),this}static isEqual(e,i){if(Object.keys(e).length!==Object.keys(i).length)return!1;for(const o in e)if(e[o]!==i[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},i=>e(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const i={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(i.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(i.old=convertChangeData(e.columns,e.old_record)),i}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let c;return a?c=a:typeof fetch>"u"?c=(...d)=>__vitePreload(async()=>{const{default:h}=await Promise.resolve().then(()=>browser);return{default:h}},void 0).then(({default:h})=>h(...d)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...d)=>c(...d)},!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const i=e.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(e,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},e?this.conn.close(e,i??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const i=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const e=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,i,o){this.logger(e,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,i={config:{}}){const o=`realtime:${e}`,a=this.getChannels().find(c=>c.topic===o);if(a)return a;{const c=new RealtimeChannel(`realtime:${e}`,i,this);return this.channels.push(c),c}}push(e){const{topic:i,event:o,payload:a,ref:c}=e,d=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${i} ${o} (${c})`,a),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let i=this.channels.find(o=>o.topic===e&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${e}"`),i.unsubscribe())}_remove(e){this.channels=this.channels.filter(i=>i.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,i=>{i.topic==="phoenix"&&i.event==="phx_reply"&&this.heartbeatCallback(i.payload.status==="ok"?"ok":"error"),i.ref&&i.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:a,payload:c,ref:d}=i,h=d?`(${d})`:"",g=c.status||"";this.log("receive",`${g} ${o} ${a} ${h}`.trim(),c),this.channels.filter(j=>j._isMember(o)).forEach(j=>j._trigger(a,c,d)),this._triggerStateCallbacks("message",i)})}_clearTimer(e){var i;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this.workerRef.terminate()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var i;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,i){if(Object.keys(i).length===0)return e;const o=e.match(/\?/)?"&":"?",a=new URLSearchParams(i);return`${e}${o}${a}`}_workerObjectUrl(e){let i;if(e)i=e;else{const o=new Blob([WORKER_SCRIPT],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(e,i=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(e=null){let i;e?i=e:this.accessToken?i=await this.accessToken():i=this.accessTokenValue,this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(o=>{const a={access_token:i,version:DEFAULT_VERSION};i&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(CHANNEL_EVENTS.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(i=>{this.log("error",`error setting auth in ${e}`,i)})}_triggerStateCallbacks(e,i){try{this.stateChangeCallbacks[e].forEach(o=>{try{o(i)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(o){this.log("error",`error triggering ${e} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var i,o,a,c,d,h,g,j;if(this.transport=(i=e==null?void 0:e.transport)!==null&&i!==void 0?i:null,this.timeout=(o=e==null?void 0:e.timeout)!==null&&o!==void 0?o:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(a=e==null?void 0:e.heartbeatIntervalMs)!==null&&a!==void 0?a:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:_=>RECONNECT_INTERVALS[_-1]||DEFAULT_RECONNECT_FALLBACK,this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:(_,$)=>$(JSON.stringify(_)),this.decode=(j=e==null?void 0:e.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class StorageError extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class StorageApiError extends StorageError{constructor(e,i,o){super(e),this.name="StorageApiError",this.status=i,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageUnknownError extends StorageError{constructor(e,i){super(e),this.name="StorageUnknownError",this.originalError=i}}var __awaiter$6=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};const resolveFetch$2=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...i)=>__vitePreload(async()=>{const{default:o}=await Promise.resolve().then(()=>browser);return{default:o}},void 0).then(({default:o})=>o(...i)):e=fetch,(...i)=>e(...i)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0)).Response:Response}),recursiveToCamel=s=>{if(Array.isArray(s))return s.map(i=>recursiveToCamel(i));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([i,o])=>{const a=i.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[a]=recursiveToCamel(o)}),e},isPlainObject=s=>{if(typeof s!="object"||s===null)return!1;const e=Object.getPrototypeOf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var __awaiter$5=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};const _getErrorMessage$1=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),handleError$1=(s,e,i)=>__awaiter$5(void 0,void 0,void 0,function*(){const o=yield resolveResponse();s instanceof o&&!(i!=null&&i.noResolveJson)?s.json().then(a=>{const c=s.status||500,d=(a==null?void 0:a.statusCode)||c+"";e(new StorageApiError(_getErrorMessage$1(a),c,d))}).catch(a=>{e(new StorageUnknownError(_getErrorMessage$1(a),a))}):e(new StorageUnknownError(_getErrorMessage$1(s),s))}),_getRequestParams$1=(s,e,i,o)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"||!o?a:(isPlainObject(o)?(a.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),a.body=JSON.stringify(o)):a.body=o,e!=null&&e.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),i))};function _handleRequest$1(s,e,i,o,a,c){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((d,h)=>{s(i,_getRequestParams$1(e,o,a,c)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>d(g)).catch(g=>handleError$1(g,h,o))})})}function get(s,e,i,o){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(s,"GET",e,i,o)})}function post(s,e,i,o,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(s,"POST",e,o,a,i)})}function put(s,e,i,o,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(s,"PUT",e,o,a,i)})}function head(s,e,i,o){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(s,"HEAD",e,Object.assign(Object.assign({},i),{noResolveJson:!0}),o)})}function remove(s,e,i,o,a){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(s,"DELETE",e,o,a,i)})}var __awaiter$4=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,i={},o,a){this.url=e,this.headers=i,this.bucketId=o,this.fetch=resolveFetch$2(a)}uploadOrUpdate(e,i,o,a){return __awaiter$4(this,void 0,void 0,function*(){try{let c;const d=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(d.upsert)});const g=d.metadata;typeof Blob<"u"&&o instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",o)):typeof FormData<"u"&&o instanceof FormData?(c=o,c.append("cacheControl",d.cacheControl),g&&c.append("metadata",this.encodeMetadata(g))):(c=o,h["cache-control"]=`max-age=${d.cacheControl}`,h["content-type"]=d.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),a!=null&&a.headers&&(h=Object.assign(Object.assign({},h),a.headers));const j=this._removeEmptyFolders(i),_=this._getFinalPath(j),$=yield(e=="PUT"?put:post)(this.fetch,`${this.url}/object/${_}`,c,Object.assign({headers:h},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:j,id:$.Id,fullPath:$.Key},error:null}}catch(c){if(isStorageError(c))return{data:null,error:c};throw c}})}upload(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,i,o)})}uploadToSignedUrl(e,i,o,a){return __awaiter$4(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),d=this._getFinalPath(c),h=new URL(this.url+`/object/upload/sign/${d}`);h.searchParams.set("token",i);try{let g;const j=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},a),_=Object.assign(Object.assign({},this.headers),{"x-upsert":String(j.upsert)});typeof Blob<"u"&&o instanceof Blob?(g=new FormData,g.append("cacheControl",j.cacheControl),g.append("",o)):typeof FormData<"u"&&o instanceof FormData?(g=o,g.append("cacheControl",j.cacheControl)):(g=o,_["cache-control"]=`max-age=${j.cacheControl}`,_["content-type"]=j.contentType);const $=yield put(this.fetch,h.toString(),g,{headers:_});return{data:{path:c,fullPath:$.Key},error:null}}catch(g){if(isStorageError(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,i){return __awaiter$4(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e);const a=Object.assign({},this.headers);i!=null&&i.upsert&&(a["x-upsert"]="true");const c=yield post(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:a}),d=new URL(this.url+c.url),h=d.searchParams.get("token");if(!h)throw new StorageError("No token returned by API");return{data:{signedUrl:d.toString(),path:e,token:h},error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}update(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,i,o)})}move(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}copy(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:i,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}createSignedUrl(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),c=yield post(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:i},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const d=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${d}`)},{data:c,error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}createSignedUrls(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){try{const a=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:i,paths:e},{headers:this.headers}),c=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:a.map(d=>Object.assign(Object.assign({},d),{signedUrl:d.signedURL?encodeURI(`${this.url}${d.signedURL}${c}`):null})),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}download(e,i){return __awaiter$4(this,void 0,void 0,function*(){const a=typeof(i==null?void 0:i.transform)<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString((i==null?void 0:i.transform)||{}),d=c?`?${c}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield get(this.fetch,`${this.url}/${a}/${h}${d}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(isStorageError(h))return{data:null,error:h};throw h}})}info(e){return __awaiter$4(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{const o=yield get(this.fetch,`${this.url}/object/info/${i}`,{headers:this.headers});return{data:recursiveToCamel(o),error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}exists(e){return __awaiter$4(this,void 0,void 0,function*(){const i=this._getFinalPath(e);try{return yield head(this.fetch,`${this.url}/object/${i}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(isStorageError(o)&&o instanceof StorageUnknownError){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}})}getPublicUrl(e,i){const o=this._getFinalPath(e),a=[],c=i!=null&&i.download?`download=${i.download===!0?"":i.download}`:"";c!==""&&a.push(c);const h=typeof(i==null?void 0:i.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((i==null?void 0:i.transform)||{});g!==""&&a.push(g);let j=a.join("&");return j!==""&&(j=`?${j}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${o}${j}`)}}}remove(e){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}list(e,i,o){return __awaiter$4(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),i),{prefix:e||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},o),error:null}}catch(a){if(isStorageError(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const i=[];return e.width&&i.push(`width=${e.width}`),e.height&&i.push(`height=${e.height}`),e.resize&&i.push(`resize=${e.resize}`),e.format&&i.push(`format=${e.format}`),e.quality&&i.push(`quality=${e.quality}`),i.join("&")}}const version$2="2.10.5",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};class StorageBucketApi{constructor(e,i={},o,a){const c=new URL(e);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),i),this.fetch=resolveFetch$2(o)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(isStorageError(e))return{data:null,error:e};throw e}})}getBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}createBucket(e,i={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}updateBucket(e,i){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(isStorageError(o))return{data:null,error:o};throw o}})}emptyBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}deleteBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if(isStorageError(i))return{data:null,error:i};throw i}})}}class StorageClient extends StorageBucketApi{constructor(e,i={},o,a){super(e,i,o,a)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}}const version$1="2.55.0";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};const resolveFetch$1=s=>{let e;return s?e=s:typeof fetch>"u"?e=nodeFetch:e=fetch,(...i)=>e(...i)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(s,e,i)=>{const o=resolveFetch$1(i),a=resolveHeadersConstructor();return(c,d)=>__awaiter$2(void 0,void 0,void 0,function*(){var h;const g=(h=yield e())!==null&&h!==void 0?h:s;let j=new a(d==null?void 0:d.headers);return j.has("apikey")||j.set("apikey",s),j.has("Authorization")||j.set("Authorization",`Bearer ${g}`),o(c,Object.assign(Object.assign({},d),{headers:j}))})};var __awaiter$1=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};function ensureTrailingSlash(s){return s.endsWith("/")?s:s+"/"}function applySettingDefaults(s,e){var i,o;const{db:a,auth:c,realtime:d,global:h}=s,{db:g,auth:j,realtime:_,global:$}=e,tt={db:Object.assign(Object.assign({},g),a),auth:Object.assign(Object.assign({},j),c),realtime:Object.assign(Object.assign({},_),d),storage:{},global:Object.assign(Object.assign(Object.assign({},$),h),{headers:Object.assign(Object.assign({},(i=$==null?void 0:$.headers)!==null&&i!==void 0?i:{}),(o=h==null?void 0:h.headers)!==null&&o!==void 0?o:{})}),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return s.accessToken?tt.accessToken=s.accessToken:delete tt.accessToken,tt}const version="2.71.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(e,i,o){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function isAuthError(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class AuthApiError extends AuthError{constructor(e,i,o){super(e,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function isAuthApiError(s){return isAuthError(s)&&s.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,i){super(e),this.name="AuthUnknownError",this.originalError=i}}class CustomAuthError extends AuthError{constructor(e,i,o,a){super(e,o,a),this.name=i,this.status=o}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(s){return isAuthError(s)&&s.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,i=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(s){return isAuthError(s)&&s.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,i=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,i){super(e,"AuthRetryableFetchError",i,void 0)}}function isAuthRetryableFetchError(s){return isAuthError(s)&&s.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,i,o){super(e,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const s=new Array(128);for(let e=0;e<s.length;e+=1)s[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)s[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)s[TO_BASE64URL[e].charCodeAt(0)]=e;return s})();function byteToBase64URL(s,e,i){if(s!==null)for(e.queue=e.queue<<8|s,e.queuedBits+=8;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(TO_BASE64URL[o]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const o=e.queue>>e.queuedBits-6&63;i(TO_BASE64URL[o]),e.queuedBits-=6}}function byteFromBase64URL(s,e,i){const o=FROM_BASE64URL[s];if(o>-1)for(e.queue=e.queue<<6|o,e.queuedBits+=6;e.queuedBits>=8;)i(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function stringFromBase64URL(s){const e=[],i=d=>{e.push(String.fromCodePoint(d))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},c=d=>{stringFromUTF8(d,o,i)};for(let d=0;d<s.length;d+=1)byteFromBase64URL(s.charCodeAt(d),a,c);return e.join("")}function codepointToUTF8(s,e){if(s<=127){e(s);return}else if(s<=2047){e(192|s>>6),e(128|s&63);return}else if(s<=65535){e(224|s>>12),e(128|s>>6&63),e(128|s&63);return}else if(s<=1114111){e(240|s>>18),e(128|s>>12&63),e(128|s>>6&63),e(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function stringToUTF8(s,e){for(let i=0;i<s.length;i+=1){let o=s.charCodeAt(i);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(s.charCodeAt(i+1)-56320&65535|a)+65536,i+=1}codepointToUTF8(o,e)}}function stringFromUTF8(s,e,i){if(e.utf8seq===0){if(s<=127){i(s);return}for(let o=1;o<6;o+=1)if(!(s>>7-o&1)){e.utf8seq=o;break}if(e.utf8seq===2)e.codepoint=s&31;else if(e.utf8seq===3)e.codepoint=s&15;else if(e.utf8seq===4)e.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|s&63,e.utf8seq-=1,e.utf8seq===0&&i(e.codepoint)}}function base64UrlToUint8Array(s){const e=[],i={queue:0,queuedBits:0},o=a=>{e.push(a)};for(let a=0;a<s.length;a+=1)byteFromBase64URL(s.charCodeAt(a),i,o);return new Uint8Array(e)}function stringToUint8Array(s){const e=[];return stringToUTF8(s,i=>e.push(i)),new Uint8Array(e)}function bytesToBase64URL(s){const e=[],i={queue:0,queuedBits:0},o=a=>{e.push(a)};return s.forEach(a=>byteToBase64URL(a,i,o)),byteToBase64URL(null,i,o),e.join("")}function expiresAt(s){return Math.round(Date.now()/1e3)+s}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(s){const e={},i=new URL(s);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((a,c)=>{e[c]=a})}catch{}return i.searchParams.forEach((o,a)=>{e[a]=o}),e}const resolveFetch=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...i)=>__vitePreload(async()=>{const{default:o}=await Promise.resolve().then(()=>browser);return{default:o}},void 0).then(({default:o})=>o(...i)):e=fetch,(...i)=>e(...i)},looksLikeFetchResponse=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",setItemAsync=async(s,e,i)=>{await s.setItem(e,JSON.stringify(i))},getItemAsync=async(s,e)=>{const i=await s.getItem(e);if(!i)return null;try{return JSON.parse(i)}catch{return i}},removeItemAsync=async(s,e)=>{await s.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,i)=>{this.resolve=e,this.reject=i})}}Deferred.promiseConstructor=Promise;function decodeJWT(s){const e=s.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let o=0;o<e.length;o++)if(!BASE64URL_REGEX.test(e[o]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function retryable(s,e){return new Promise((o,a)=>{(async()=>{for(let c=0;c<1/0;c++)try{const d=await s(c);if(!e(c,null,d)){o(d);return}}catch(d){if(!e(c,d)){a(d);return}}})()})}function dec2hex(s){return("0"+s.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let a="";for(let c=0;c<56;c++)a+=i.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(s){const i=new TextEncoder().encode(s),o=await crypto.subtle.digest("SHA-256",i),a=new Uint8Array(o);return Array.from(a).map(c=>String.fromCharCode(c)).join("")}async function generatePKCEChallenge(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const i=await sha256(s);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(s,e,i=!1){const o=generatePKCEVerifier();let a=o;i&&(a+="/PASSWORD_RECOVERY"),await setItemAsync(s,`${e}-code-verifier`,a);const c=await generatePKCEChallenge(o);return[c,o===c?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(s){const e=s.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(s){if(!s)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(s<=e)throw new Error("JWT has expired")}function getAlgorithm(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(s){if(!UUID_REGEX.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const s={};return new Proxy(s,{get:(e,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function deepClone(s){return JSON.parse(JSON.stringify(s))}var __rest$1=function(s,e){var i={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&e.indexOf(o)<0&&(i[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(i[o[a]]=s[o[a]]);return i};const _getErrorMessage=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),NETWORK_ERROR_CODES=[502,503,504];async function handleError(s){var e;if(!looksLikeFetchResponse(s))throw new AuthRetryableFetchError(_getErrorMessage(s),0);if(NETWORK_ERROR_CODES.includes(s.status))throw new AuthRetryableFetchError(_getErrorMessage(s),s.status);let i;try{i=await s.json()}catch(c){throw new AuthUnknownError(_getErrorMessage(c),c)}let o;const a=parseResponseAPIVersion(s);if(a&&a.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(i),s.status,((e=i.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(o==="session_not_found")throw new AuthSessionMissingError}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((c,d)=>c&&typeof d=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(i),s.status,i.weak_password.reasons);throw new AuthApiError(_getErrorMessage(i),s.status||500,o)}const _getRequestParams=(s,e,i,o)=>{const a={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),i))};async function _request(s,e,i,o){var a;const c=Object.assign({},o==null?void 0:o.headers);c[API_VERSION_HEADER_NAME]||(c[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),o!=null&&o.jwt&&(c.Authorization=`Bearer ${o.jwt}`);const d=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(d.redirect_to=o.redirectTo);const h=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",g=await _handleRequest(s,e,i+h,{headers:c,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function _handleRequest(s,e,i,o,a,c){const d=_getRequestParams(e,o,a,c);let h;try{h=await s(i,Object.assign({},d))}catch(g){throw console.error(g),new AuthRetryableFetchError(_getErrorMessage(g),0)}if(h.ok||await handleError(h),o!=null&&o.noResolveJson)return h;try{return await h.json()}catch(g){await handleError(g)}}function _sessionResponse(s){var e;let i=null;hasSession(s)&&(i=Object.assign({},s),s.expires_at||(i.expires_at=expiresAt(s.expires_in)));const o=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:i,user:o},error:null}}function _sessionResponsePassword(s){const e=_sessionResponse(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(e.data.weak_password=s.weak_password),e}function _userResponse(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function _ssoResponse(s){return{data:s,error:null}}function _generateLinkResponse(s){const{action_link:e,email_otp:i,hashed_token:o,redirect_to:a,verification_type:c}=s,d=__rest$1(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:i,hashed_token:o,redirect_to:a,verification_type:c},g=Object.assign({},d);return{data:{properties:h,user:g},error:null}}function _noResolveJsonResponse(s){return s}function hasSession(s){return s.access_token&&s.refresh_token&&s.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];var __rest=function(s,e){var i={};for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&e.indexOf(o)<0&&(i[o]=s[o]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(s);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(s,o[a])&&(i[o[a]]=s[o[a]]);return i};class GoTrueAdminApi{constructor({url:e="",headers:i={},fetch:o}){this.url=e,this.headers=i,this.fetch=resolveFetch(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,i=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}async inviteUserByEmail(e,i={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async generateLink(e){try{const{options:i}=e,o=__rest(e,["options"]),a=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:_generateLinkResponse,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(isAuthError(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async listUsers(e){var i,o,a,c,d,h,g;try{const j={nextPage:null,lastPage:0,total:0},_=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=e==null?void 0:e.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(c=(a=e==null?void 0:e.perPage)===null||a===void 0?void 0:a.toString())!==null&&c!==void 0?c:""},xform:_noResolveJsonResponse});if(_.error)throw _.error;const $=await _.json(),tt=(d=_.headers.get("x-total-count"))!==null&&d!==void 0?d:0,it=(g=(h=_.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return it.length>0&&(it.forEach(st=>{const nt=parseInt(st.split(";")[0].split("=")[1].substring(0,1)),at=JSON.parse(st.split(";")[1].split("=")[1]);j[`${at}Page`]=nt}),j.total=parseInt(tt)),{data:Object.assign(Object.assign({},$),j),error:null}}catch(j){if(isAuthError(j))return{data:{users:[]},error:j};throw j}}async getUserById(e){validateUUID(e);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(i){if(isAuthError(i))return{data:{user:null},error:i};throw i}}async updateUserById(e,i){validateUUID(e);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:i,headers:this.headers,xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async deleteUser(e,i=!1){validateUUID(e);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:i},xform:_userResponse})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async _listFactors(e){validateUUID(e.userId);try{const{data:i,error:o}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:i,error:o}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _deleteFactor(e){validateUUID(e.userId),validateUUID(e.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}}function memoryLocalStorageAdapter(s={}){return{getItem:e=>s[e]||null,setItem:(e,i)=>{s[e]=i},removeItem:e=>{delete s[e]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(s,e,i){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const o=new globalThis.AbortController;return e>0&&setTimeout(()=>{o.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,a.name);try{return await i()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,a.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(internals.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(s,e,i){return await i()}const GLOBAL_JWKS={};class GoTrueClient{constructor(e){var i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new GoTrueAdminApi({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=resolveFetch(a.fetch),this.lock=a.lock||lockNoOp,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:isBrowser()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var e,i;return(i=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,i;return(i=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const i=parseParametersFromURL(window.location.href);let o="none";if(this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce"),isBrowser()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:c}=await this._getSessionFromURL(i,o);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),isAuthImplicitGrantRedirectError(c)){const g=(e=c.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:d,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",d,"redirect type",h),await this._saveSession(d),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return isAuthError(i)?{error:i}:{error:new AuthUnknownError("Unexpected error during initialization",i)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var i,o,a;try{const c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=e==null?void 0:e.options)===null||a===void 0?void 0:a.captchaToken}},xform:_sessionResponse}),{data:d,error:h}=c;if(h||!d)return{data:{user:null,session:null},error:h};const g=d.session,j=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:j,session:g},error:null}}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(e){var i,o,a;try{let c;if("email"in e){const{email:_,password:$,options:tt}=e;let it=null,st=null;this.flowType==="pkce"&&([it,st]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:tt==null?void 0:tt.emailRedirectTo,body:{email:_,password:$,data:(i=tt==null?void 0:tt.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:tt==null?void 0:tt.captchaToken},code_challenge:it,code_challenge_method:st},xform:_sessionResponse})}else if("phone"in e){const{phone:_,password:$,options:tt}=e;c=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:_,password:$,data:(o=tt==null?void 0:tt.data)!==null&&o!==void 0?o:{},channel:(a=tt==null?void 0:tt.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:tt==null?void 0:tt.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:d,error:h}=c;if(h||!d)return{data:{user:null,session:null},error:h};const g=d.session,j=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:j,session:g},error:null}}catch(c){if(isAuthError(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(e){try{let i;if("email"in e){const{email:c,password:d,options:h}=e;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:c,password:d,options:h}=e;i=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:o,error:a}=i;return a?{data:{user:null,session:null},error:a}:!o||!o.session||!o.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOAuth(e){var i,o,a,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(i=e.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:i}=e;if(i==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}async signInWithSolana(e){var i,o,a,c,d,h,g,j,_,$,tt,it;let st,nt;if("message"in e)st=e.message,nt=e.signature;else{const{chain:at,wallet:et,statement:_e,options:b}=e;let rt;if(isBrowser())if(typeof et=="object")rt=et;else{const ot=window;if("solana"in ot&&typeof ot.solana=="object"&&("signIn"in ot.solana&&typeof ot.solana.signIn=="function"||"signMessage"in ot.solana&&typeof ot.solana.signMessage=="function"))rt=ot.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof et!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");rt=et}const lt=new URL((i=b==null?void 0:b.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in rt&&rt.signIn){const ot=await rt.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:lt.host,uri:lt.href}),_e?{statement:_e}:null));let dt;if(Array.isArray(ot)&&ot[0]&&typeof ot[0]=="object")dt=ot[0];else if(ot&&typeof ot=="object"&&"signedMessage"in ot&&"signature"in ot)dt=ot;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in dt&&"signature"in dt&&(typeof dt.signedMessage=="string"||dt.signedMessage instanceof Uint8Array)&&dt.signature instanceof Uint8Array)st=typeof dt.signedMessage=="string"?dt.signedMessage:new TextDecoder().decode(dt.signedMessage),nt=dt.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in rt)||typeof rt.signMessage!="function"||!("publicKey"in rt)||typeof rt!="object"||!rt.publicKey||!("toBase58"in rt.publicKey)||typeof rt.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");st=[`${lt.host} wants you to sign in with your Solana account:`,rt.publicKey.toBase58(),..._e?["",_e,""]:[""],"Version: 1",`URI: ${lt.href}`,`Issued At: ${(a=(o=b==null?void 0:b.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((h=b==null?void 0:b.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((g=b==null?void 0:b.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((j=b==null?void 0:b.signInWithSolana)===null||j===void 0)&&j.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!(($=(_=b==null?void 0:b.signInWithSolana)===null||_===void 0?void 0:_.resources)===null||$===void 0)&&$.length?["Resources",...b.signInWithSolana.resources.map(dt=>`- ${dt}`)]:[]].join(`
`);const ot=await rt.signMessage(new TextEncoder().encode(st),"utf8");if(!ot||!(ot instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");nt=ot}}try{const{data:at,error:et}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:st,signature:bytesToBase64URL(nt)},!((tt=e.options)===null||tt===void 0)&&tt.captchaToken?{gotrue_meta_security:{captcha_token:(it=e.options)===null||it===void 0?void 0:it.captchaToken}}:null),xform:_sessionResponse});if(et)throw et;return!at||!at.session||!at.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(at.session&&(await this._saveSession(at.session),await this._notifyAllSubscribers("SIGNED_IN",at.session)),{data:Object.assign({},at),error:et})}catch(at){if(isAuthError(at))return{data:{user:null,session:null},error:at};throw at}}async _exchangeCodeForSession(e){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(i??"").split("/");try{const{data:c,error:d}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:o},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),d)throw d;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:a??null}),error:d})}catch(c){if(isAuthError(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(e){try{const{options:i,provider:o,token:a,access_token:c,nonce:d}=e,h=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:c,nonce:d,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:_sessionResponse}),{data:g,error:j}=h;return j?{data:{user:null,session:null},error:j}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:j})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithOtp(e){var i,o,a,c,d;try{if("email"in e){const{email:h,options:g}=e;let j=null,_=null;this.flowType==="pkce"&&([j,_]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:$}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:j,code_challenge_method:_},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:$}}if("phone"in e){const{phone:h,options:g}=e,{data:j,error:_}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(c=g==null?void 0:g.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(d=g==null?void 0:g.channel)!==null&&d!==void 0?d:"sms"}});return{data:{user:null,session:null,messageId:j==null?void 0:j.message_id},error:_}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(h){if(isAuthError(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var i,o;try{let a,c;"options"in e&&(a=(i=e.options)===null||i===void 0?void 0:i.redirectTo,c=(o=e.options)===null||o===void 0?void 0:o.captchaToken);const{data:d,error:h}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:a,xform:_sessionResponse});if(h)throw h;if(!d)throw new Error("An error occurred on token verification.");const g=d.session,j=d.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:j,session:g},error:null}}catch(a){if(isAuthError(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var i,o,a;try{let c=null,d=null;return this.flowType==="pkce"&&([c,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(o=(i=e.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=e==null?void 0:e.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:d}),headers:this.headers,xform:_ssoResponse})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:i},error:o}=e;if(o)throw o;if(!i)throw new AuthSessionMissingError;const{error:a}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(isAuthError(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const i=`${this.url}/resend`;if("email"in e){const{email:o,type:a,options:c}=e,{error:d}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:d}}else if("phone"in e){const{phone:o,type:a,options:c}=e,{data:d,error:h}=await _request(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:h}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async i=>i))}async _acquireLock(e,i){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await e(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const i=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?e=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const o=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",e.expires_at),!o){if(this.userStorage){const d=await getItemAsync(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=userNotAvailableProxy()}if(this.storage.isServer&&e.user){let d=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,j,_)=>(!d&&j==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),d=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,j,_))})}return{data:{session:e},error:null}}const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{session:null},error:c}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async i=>{var o,a,c;const{data:d,error:h}=i;if(h)throw h;return!(!((o=d.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(a=d.session)===null||a===void 0?void 0:a.access_token)!==null&&c!==void 0?c:void 0,xform:_userResponse})})}catch(i){if(isAuthError(i))return isAuthSessionMissingError(i)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:i};throw i}}async updateUser(e,i={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,i))}async _updateUser(e,i={}){try{return await this._useSession(async o=>{const{data:a,error:c}=o;if(c)throw c;if(!a.session)throw new AuthSessionMissingError;const d=a.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:j,error:_}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:d.access_token,xform:_userResponse});if(_)throw _;return d.user=j.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),{data:{user:d.user},error:null}})}catch(o){if(isAuthError(o))return{data:{user:null},error:o};throw o}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const i=Date.now()/1e3;let o=i,a=!0,c=null;const{payload:d}=decodeJWT(e.access_token);if(d.exp&&(o=d.exp,a=o<=i),a){const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;c={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(i){if(isAuthError(i))return{data:{session:null,user:null},error:i};throw i}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async i=>{var o;if(!e){const{data:d,error:h}=i;if(h)throw h;e=(o=d.session)!==null&&o!==void 0?o:void 0}if(!(e!=null&&e.refresh_token))throw new AuthSessionMissingError;const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{user:null,session:null},error:c}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(i){if(isAuthError(i))return{data:{user:null,session:null},error:i};throw i}}async _getSessionFromURL(e,i){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:_e,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const rt=new URL(window.location.href);return rt.searchParams.delete("code"),window.history.replaceState(window.history.state,"",rt.toString()),{data:{session:_e.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:c,refresh_token:d,expires_in:h,expires_at:g,token_type:j}=e;if(!c||!h||!d||!j)throw new AuthImplicitGrantRedirectError("No session defined in URL");const _=Math.round(Date.now()/1e3),$=parseInt(h);let tt=_+$;g&&(tt=parseInt(g));const it=tt-_;it*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${it}s, should have been closer to ${$}s`);const st=tt-$;_-st>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",st,tt,_):_-st<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",st,tt,_);const{data:nt,error:at}=await this._getUser(c);if(at)throw at;const et={provider_token:o,provider_refresh_token:a,access_token:c,expires_in:$,expires_at:tt,refresh_token:d,token_type:j,user:nt.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:et,redirectType:e.type},error:null}}catch(o){if(isAuthError(o))return{data:{session:null,redirectType:null},error:o};throw o}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const i=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&i)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:a,error:c}=i;if(c)return{error:c};const d=(o=a.session)===null||o===void 0?void 0:o.access_token;if(d){const{error:h}=await this.admin.signOut(d,e);if(h&&!(isAuthApiError(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const i=uuid(),o={id:i,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(e){return await this._useSession(async i=>{var o,a;try{const{data:{session:c},error:d}=i;if(d)throw d;await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,i={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(c){if(isAuthError(c))return{data:null,error:c};throw c}}async getUserIdentities(){var e;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return{data:{identities:(e=i.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async linkIdentity(e){var i;try{const{data:o,error:a}=await this._useSession(async c=>{var d,h,g,j,_;const{data:$,error:tt}=c;if(tt)throw tt;const it=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",it,{headers:this.headers,jwt:(_=(j=$.session)===null||j===void 0?void 0:j.access_token)!==null&&_!==void 0?_:void 0})});if(a)throw a;return isBrowser()&&!(!((i=e.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),{data:{provider:e.provider,url:o==null?void 0:o.url},error:null}}catch(o){if(isAuthError(o))return{data:{provider:e.provider,url:null},error:o};throw o}}async unlinkIdentity(e){try{return await this._useSession(async i=>{var o,a;const{data:c,error:d}=i;if(d)throw d;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(o=c.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const i=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await retryable(async a=>(a>0&&await sleep(200*Math.pow(2,a-1)),this._debug(i,"refreshing attempt",a),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(a,c)=>{const d=200*Math.pow(2,a);return c&&isAuthRetryableFetchError(c)&&Date.now()+d-o<AUTO_REFRESH_TICK_DURATION_MS})}catch(o){if(this._debug(i,"error",o),isAuthError(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(i,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",i,"url",o),isBrowser()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:e,url:o},error:null}}async _recoverAndRefresh(){var e,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await getItemAsync(this.storage,this.storageKey);if(a&&this.userStorage){let d=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:a.user},await setItemAsync(this.userStorage,this.storageKey+"-user",d)),a.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:userNotAvailableProxy()}else if(a&&!a.user&&!a.user){const d=await getItemAsync(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(a.user=d.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,a)):a.user=userNotAvailableProxy()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const c=((i=a.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(o,`session has${c?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),c){if(this.autoRefreshToken&&a.refresh_token){const{error:d}=await this._callRefreshToken(a.refresh_token);d&&(console.error(d),isAuthRetryableFetchError(d)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:h}=await this._getUser(a.access_token);!h&&(d!=null&&d.user)?(a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(o,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(e){var i,o;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Deferred;const{data:c,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!c.session)throw new AuthSessionMissingError;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={session:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(a,"error",c),isAuthError(c)){const d={session:null,error:c};return isAuthRetryableFetchError(c)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(d),d}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(c),c}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,i,o=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:e,session:i});const c=[],d=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,i)}catch(g){c.push(g)}});if(await Promise.all(d),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const i=Object.assign({},e),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:i.user});const a=Object.assign({},i);delete a.user;const c=deepClone(a);await setItemAsync(this.storage,this.storageKey,c)}else{const a=deepClone(i);await setItemAsync(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),a<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const i=`#_onVisibilityChanged(${e})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,i,o){const a=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[c,d]=await getCodeChallengeAndMethod(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(d)}`});a.push(h.toString())}if(o!=null&&o.queryParams){const c=new URLSearchParams(o.queryParams);a.push(c.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async i=>{var o;const{data:a,error:c}=i;return c?{data:null,error:c}:await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _enroll(e){try{return await this._useSession(async i=>{var o,a;const{data:c,error:d}=i;if(d)return{data:null,error:d};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:j}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(o=c==null?void 0:c.session)===null||o===void 0?void 0:o.access_token});return j?{data:null,error:j}:(e.factorType==="totp"&&(!((a=g==null?void 0:g.totp)===null||a===void 0)&&a.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:c}=i;if(c)return{data:null,error:c};const{data:d,error:h}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async i=>{var o;const{data:a,error:c}=i;return c?{data:null,error:c}:await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(isAuthError(i))return{data:null,error:i};throw i}})}async _challengeAndVerify(e){const{data:i,error:o}=await this._challenge({factorId:e.factorId});return o?{data:null,error:o}:await this._verify({factorId:e.factorId,challengeId:i.id,code:e.code})}async _listFactors(){const{data:{user:e},error:i}=await this.getUser();if(i)return{data:null,error:i};const o=(e==null?void 0:e.factors)||[],a=o.filter(d=>d.factor_type==="totp"&&d.status==="verified"),c=o.filter(d=>d.factor_type==="phone"&&d.status==="verified");return{data:{all:o,totp:a,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var i,o;const{data:{session:a},error:c}=e;if(c)return{data:null,error:c};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:d}=decodeJWT(a.access_token);let h=null;d.aal&&(h=d.aal);let g=h;((o=(i=a.user.factors)===null||i===void 0?void 0:i.filter($=>$.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");const _=d.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:_},error:null}}))}async fetchJwk(e,i={keys:[]}){let o=i.keys.find(h=>h.kid===e);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(h=>h.kid===e),o&&this.jwks_cached_at+JWKS_TTL>a)return o;const{data:c,error:d}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=a,o=c.keys.find(h=>h.kid===e),!o)?null:o}async getClaims(e,i={}){try{let o=e;if(!o){const{data:it,error:st}=await this.getSession();if(st||!it.session)return{data:null,error:st};o=it.session.access_token}const{header:a,payload:c,signature:d,raw:{header:h,payload:g}}=decodeJWT(o);i!=null&&i.allowExpired||validateExp(c.exp);const j=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!j){const{error:it}=await this.getUser(o);if(it)throw it;return{data:{claims:c,header:a,signature:d},error:null}}const _=getAlgorithm(a.alg),$=await crypto.subtle.importKey("jwk",j,_,!0,["verify"]);if(!await crypto.subtle.verify(_,$,d,stringToUint8Array(`${h}.${g}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:c,header:a,signature:d},error:null}}catch(o){if(isAuthError(o))return{data:null,error:o};throw o}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(e){super(e)}}var __awaiter=function(s,e,i,o){function a(c){return c instanceof i?c:new i(function(d){d(c)})}return new(i||(i=Promise))(function(c,d){function h(_){try{j(o.next(_))}catch($){d($)}}function g(_){try{j(o.throw(_))}catch($){d($)}}function j(_){_.done?c(_.value):a(_.value).then(h,g)}j((o=o.apply(s,e||[])).next())})};class SupabaseClient{constructor(e,i,o){var a,c,d;if(this.supabaseUrl=e,this.supabaseKey=i,!e)throw new Error("supabaseUrl is required.");if(!i)throw new Error("supabaseKey is required.");const h=ensureTrailingSlash(e),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const j=`sb-${g.hostname.split(".")[0]}-auth-token`,_={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:j}),global:DEFAULT_GLOBAL_OPTIONS},$=applySettingDefaults(o??{},_);this.storageKey=(a=$.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(c=$.global.headers)!==null&&c!==void 0?c:{},$.accessToken?(this.accessToken=$.accessToken,this.auth=new Proxy({},{get:(tt,it)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(it)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((d=$.auth)!==null&&d!==void 0?d:{},this.headers,$.global.fetch),this.fetch=fetchWithAuth(i,this._getAccessToken.bind(this),$.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},$.realtime)),this.rest=new PostgrestClient(new URL("rest/v1",g).href,{headers:this.headers,schema:$.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,o==null?void 0:o.storage),$.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,i={},o={}){return this.rest.rpc(e,i,o)}channel(e,i={config:{}}){return this.realtime.channel(e,i)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,i;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:o}=yield this.auth.getSession();return(i=(e=o.session)===null||e===void 0?void 0:e.access_token)!==null&&i!==void 0?i:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:i,detectSessionInUrl:o,storage:a,storageKey:c,flowType:d,lock:h,debug:g},j,_){const $={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},$),j),storageKey:c,autoRefreshToken:e,persistSession:i,detectSessionInUrl:o,storage:a,flowType:d,lock:h,debug:g,fetch:_,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((i,o)=>{this._handleTokenChanged(i,"CLIENT",o==null?void 0:o.access_token)})}_handleTokenChanged(e,i,o){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==o?this.changedAccessToken=o:e==="SIGNED_OUT"&&(this.realtime.setAuth(),i=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(s,e,i)=>new SupabaseClient(s,e,i);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const e=s.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl="https://nmlroqlmtelytoghuyos.supabase.co",supabaseAnonKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5tbHJvcWxtdGVseXRvZ2h1eW9zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxMTA0OTgsImV4cCI6MjA3MDY4NjQ5OH0.qnAd6-BSzNMZux6RxtQmGr5OyPYkne--y1ekccVlCeE";let supabase=null;try{supabase=createClient(supabaseUrl,supabaseAnonKey,{auth:{persistSession:!1,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),console.log(" Supabase client initialized for mobile")}catch(s){console.error("Failed to initialize Supabase client (Mobile):",s),supabase=null}const AuthContext=reactExports.createContext(void 0),useAuth=()=>{const s=reactExports.useContext(AuthContext);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},AuthProvider=({children:s})=>{const[e,i]=reactExports.useState(null),[o,a]=reactExports.useState(null),[c,d]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{if(!supabase){const st={id:"local-user",email:"local@user.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),aud:"authenticated",role:"authenticated"};i(st),a({user:st});return}const{data:{session:tt}}=await supabase.auth.getSession();a(tt),i((tt==null?void 0:tt.user)??null);const{data:{subscription:it}}=supabase.auth.onAuthStateChange(async(st,nt)=>{a(nt),i((nt==null?void 0:nt.user)??null)});return()=>it.unsubscribe()}catch(tt){console.error("Auth initialization failed:",tt);const it={id:"local-user",email:"local@user.com",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),aud:"authenticated",role:"authenticated"};i(it),a({user:it})}finally{d(!1)}})()},[]);const _={user:e,session:o,loading:c,signIn:async($,tt)=>{if(!supabase)return{error:{message:"Supabase not configured"}};const{error:it}=await supabase.auth.signInWithPassword({email:$,password:tt});return{error:it}},signUp:async($,tt)=>{if(!supabase)return{error:{message:"Supabase not configured"}};const{error:it}=await supabase.auth.signUp({email:$,password:tt});return{error:it}},signOut:async()=>{supabase&&await supabase.auth.signOut()}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:_,children:s})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(s,e)=>{const i=reactExports.forwardRef(({color:o="currentColor",size:a=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:h="",children:g,...j},_)=>reactExports.createElement("svg",{ref:_,...defaultAttributes,width:a,height:a,stroke:o,strokeWidth:d?Number(c)*24/Number(a):c,className:["lucide",`lucide-${toKebabCase(s)}`,h].join(" "),...j},[...e.map(([$,tt])=>reactExports.createElement($,tt)),...Array.isArray(g)?g:[g]]));return i.displayName=`${s}`,i};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowUp=createLucideIcon("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calculator=createLucideIcon("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CreditCard=createLucideIcon("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Database=createLucideIcon("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Download=createLucideIcon("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Filter=createLucideIcon("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const List=createLucideIcon("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Loader2=createLucideIcon("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minus=createLucideIcon("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Package=createLucideIcon("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pen=createLucideIcon("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Receipt=createLucideIcon("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Settings=createLucideIcon("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ShoppingCart=createLucideIcon("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquarePen=createLucideIcon("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UserCheck=createLucideIcon("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WifiOff=createLucideIcon("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PriceListContext=reactExports.createContext(void 0),usePriceList=()=>{const s=reactExports.useContext(PriceListContext);if(!s)throw new Error("usePriceList must be used within a PriceListProvider");return s},capitalizeWords=s=>s.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),PriceListProvider=({children:s})=>{useAuth();const[e,i]=reactExports.useState([]),[o,a]=reactExports.useState(""),[c,d]=reactExports.useState("date-desc"),[h,g]=reactExports.useState(!0),[j,_]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{g(!0),_(null),console.log("Loading items from localStorage first for PWA");const b=localStorage.getItem("priceListItems"),rt=b?JSON.parse(b).map(lt=>({...lt,grossPrice:lt.grossPrice||0,createdAt:new Date(lt.createdAt),lastEditedAt:lt.lastEditedAt?new Date(lt.lastEditedAt):void 0})):[];i(rt),console.log(`Loaded ${rt.length} items from localStorage`);try{if(!supabase){console.log("Supabase not available, using localStorage only");return}console.log("Attempting background sync with Supabase...");const{data:lt,error:ot}=await supabase.from("price_items").select("*").order("created_at",{ascending:!1});if(ot){console.warn("Supabase sync failed, continuing with localStorage:",ot);return}const dt=(lt||[]).map(pt=>({id:pt.id,name:pt.name,price:pt.price,grossPrice:pt.gross_price??0,createdAt:new Date(pt.created_at),lastEditedAt:pt.last_edited_at?new Date(pt.last_edited_at):void 0}));JSON.stringify(dt)!==JSON.stringify(rt)&&(i(dt),localStorage.setItem("priceListItems",JSON.stringify(dt.map(pt=>{var mt;return{...pt,createdAt:pt.createdAt.toISOString(),lastEditedAt:(mt=pt.lastEditedAt)==null?void 0:mt.toISOString()}})))),console.log(`Loaded ${dt.length} items from Supabase`);const ht=supabase.channel("price_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"price_items"},pt=>{if(console.log("Real-time update received:",pt),pt.eventType==="INSERT"){const mt={id:pt.new.id,name:pt.new.name,price:pt.new.price,grossPrice:pt.new.gross_price||0,createdAt:new Date(pt.new.created_at),lastEditedAt:pt.new.last_edited_at?new Date(pt.new.last_edited_at):void 0};i(xt=>[mt,...xt.filter(ct=>ct.id!==mt.id)])}else if(pt.eventType==="UPDATE"){const mt={id:pt.new.id,name:pt.new.name,price:pt.new.price,grossPrice:pt.new.gross_price||0,createdAt:new Date(pt.new.created_at),lastEditedAt:pt.new.last_edited_at?new Date(pt.new.last_edited_at):void 0};i(xt=>xt.map(ct=>ct.id===mt.id?mt:ct))}else pt.eventType==="DELETE"&&i(mt=>mt.filter(xt=>xt.id!==pt.old.id))}).subscribe();return()=>{ht.unsubscribe()}}catch(lt){console.warn("Supabase failed, falling back to localStorage:",lt)}}catch(b){console.error("Failed to load items:",b),_("Failed to load items. Using offline mode."),i([])}finally{g(!1)}})()},[]);const $=async(_e,b,rt)=>{var lt,ot,dt;try{console.log(" Adding item (Mobile Safari):",{name:_e,price:b,grossPrice:rt});const ht=capitalizeWords(_e);if(!ht||ht.trim().length===0)throw new Error("Item name is required");if(isNaN(b)||b<=0)throw new Error("Valid price is required");if(isNaN(rt)||rt<=0)throw new Error("Valid gross price is required");const pt={id:crypto.randomUUID(),name:ht,price:b,grossPrice:rt,createdAt:new Date};if(supabase){console.log(" Sending to Supabase (Mobile):",{id:pt.id,name:pt.name,price:pt.price,gross_price:pt.grossPrice,created_at:pt.createdAt.toISOString()});const mt=supabase.from("price_items").insert({id:pt.id,name:pt.name,price:pt.price,gross_price:pt.grossPrice,created_at:pt.createdAt.toISOString()}),xt=new Promise((vt,_t)=>{setTimeout(()=>_t(new Error("Request timeout - please check your connection")),15e3)}),{error:ct}=await Promise.race([mt,xt]);if(ct)throw console.error(" Supabase error (Mobile):",ct),(lt=ct.message)!=null&&lt.includes("timeout")||(ot=ct.message)!=null&&ot.includes("network")?new Error("Network error. Please check your internet connection and try again."):(dt=ct.message)!=null&&dt.includes("duplicate")||ct.code==="23505"?new Error("An item with this name already exists."):ct;i(vt=>[pt,...vt]),console.log(" Item added to Supabase successfully (Mobile):",pt)}else{const mt=[pt,...e];i(mt),localStorage.setItem("priceListItems",JSON.stringify(mt.map(xt=>{var ct;return{...xt,createdAt:xt.createdAt.toISOString(),lastEditedAt:(ct=xt.lastEditedAt)==null?void 0:ct.toISOString()}}))),console.log("Item added to localStorage successfully:",pt)}}catch(ht){throw console.error("Failed to add item:",ht),_("Failed to add item. Please try again."),ht}},tt=async(_e,b,rt,lt)=>{var ot;try{const dt=capitalizeWords(b),ht=e.find(mt=>mt.id===_e);if(!ht)throw new Error("Item not found");const pt={...ht,name:dt,price:rt,grossPrice:lt,lastEditedAt:new Date};if(supabase){const{error:mt}=await supabase.from("price_items").update({name:pt.name,price:pt.price,gross_price:pt.grossPrice,last_edited_at:(ot=pt.lastEditedAt)==null?void 0:ot.toISOString()}).eq("id",_e);if(mt)throw mt;i(xt=>xt.map(ct=>ct.id===_e?pt:ct)),console.log("Item updated in Supabase successfully")}else{const mt=e.map(xt=>xt.id===_e?pt:xt);i(mt),localStorage.setItem("priceListItems",JSON.stringify(mt.map(xt=>{var ct;return{...xt,createdAt:xt.createdAt.toISOString(),lastEditedAt:(ct=xt.lastEditedAt)==null?void 0:ct.toISOString()}}))),console.log("Item updated in localStorage successfully")}}catch(dt){throw console.error("Failed to update item:",dt),_("Failed to update item. Please try again."),dt}},it=async _e=>{try{if(supabase){const{error:b}=await supabase.from("price_items").delete().eq("id",_e);if(b)throw b;i(rt=>rt.filter(lt=>lt.id!==_e)),console.log("Item deleted from Supabase successfully")}else{const b=e.filter(rt=>rt.id!==_e);i(b),localStorage.setItem("priceListItems",JSON.stringify(b.map(rt=>{var lt;return{...rt,createdAt:rt.createdAt.toISOString(),lastEditedAt:(lt=rt.lastEditedAt)==null?void 0:lt.toISOString()}}))),console.log("Item deleted from localStorage successfully")}}catch(b){throw console.error("Failed to delete item:",b),_("Failed to delete item. Please try again."),b}},st=async _e=>{try{if(g(!0),supabase){const{error:b}=await supabase.from("price_items").delete().neq("id","");if(b)throw b;const rt=_e.map(ot=>{var dt;return{id:ot.id,name:ot.name,price:ot.price,created_at:ot.createdAt.toISOString(),last_edited_at:(dt=ot.lastEditedAt)==null?void 0:dt.toISOString()}}),{error:lt}=await supabase.from("price_items").insert(rt);if(lt)throw lt;i(_e),console.log(`Successfully imported ${_e.length} items to Supabase`)}else i(_e),localStorage.setItem("priceListItems",JSON.stringify(_e.map(b=>{var rt;return{...b,createdAt:b.createdAt.toISOString(),lastEditedAt:(rt=b.lastEditedAt)==null?void 0:rt.toISOString()}}))),console.log(`Successfully imported ${_e.length} items to localStorage`)}catch(b){throw console.error("Failed to import items:",b),_("Failed to import items. Please try again."),b}finally{g(!1)}},nt=_e=>{if(!_e.trim())return at(e,c);const b=_e.toLowerCase(),rt=e.filter(lt=>lt.name.toLowerCase().includes(b));return at(rt,c)},at=(_e,b)=>{const rt=[..._e];switch(b){case"name-asc":return rt.sort((lt,ot)=>lt.name.localeCompare(ot.name));case"name-desc":return rt.sort((lt,ot)=>ot.name.localeCompare(lt.name));case"price-asc":return rt.sort((lt,ot)=>lt.price-ot.price);case"price-desc":return rt.sort((lt,ot)=>ot.price-lt.price);case"date-asc":return rt.sort((lt,ot)=>lt.createdAt.getTime()-ot.createdAt.getTime());case"date-desc":return rt.sort((lt,ot)=>ot.createdAt.getTime()-lt.createdAt.getTime());default:return rt}},et={items:e,addItem:$,updateItem:tt,deleteItem:it,importItems:st,searchItems:nt,searchQuery:o,setSearchQuery:a,sortOption:c,setSortOption:d,isLoading:h,error:j};return jsxRuntimeExports.jsx(PriceListContext.Provider,{value:et,children:s})},AddItemForm=()=>{const{addItem:s,items:e}=usePriceList(),[i,o]=reactExports.useState(""),[a,c]=reactExports.useState(""),[d,h]=reactExports.useState(""),[g,j]=reactExports.useState(""),[_,$]=reactExports.useState(!1),[tt,it]=reactExports.useState(!1),st=async nt=>{if(nt.preventDefault(),console.log(" Form submission started (Mobile):",{name:i,price:a,grossPrice:d}),!i||i.trim().length===0){j("Please enter an item name");return}if(!a||a.trim().length===0){j("Please enter a price");return}if(!d||d.trim().length===0){j("Please enter a gross price");return}if(!i.trim()){j("Please enter an item name");return}if(e.find(b=>b.name.toLowerCase()===i.trim().toLowerCase())){j(`Item "${i.trim()}" already exists in the price list`);return}const et=parseFloat(a);if(isNaN(et)||et<=0){j("Please enter a valid price");return}const _e=parseFloat(d);if(isNaN(_e)||_e<=0){j("Please enter a valid gross price");return}try{it(!0),j(""),console.log(" Calling addItem with (Mobile):",{name:i.trim(),price:Math.round(et*100)/100,grossPrice:Math.round(_e*100)/100});const b=s(i.trim(),Math.round(et*100)/100,Math.round(_e*100)/100),rt=new Promise((lt,ot)=>{setTimeout(()=>ot(new Error("Operation timed out. Please try again.")),2e4)});await Promise.race([b,rt]),console.log(" Item added successfully (Mobile), resetting form"),o(""),c(""),h(""),$(!1)}catch(b){console.error(" Form submission error (Mobile):",b),b instanceof Error?b.message.includes("timeout")||b.message.includes("network")?j("Connection timeout. Please check your internet and try again."):b.message.includes("duplicate")?j("This item already exists in your price list."):j(b.message||"Failed to add item. Please try again."):j("Failed to add item. Please try again.")}finally{it(!1)}};return jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:jsxRuntimeExports.jsx("div",{className:"w-full px-6 py-4",children:_?jsxRuntimeExports.jsxs("form",{onSubmit:st,className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200 w-full max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"itemName",className:"block text-base font-medium text-gray-700 mb-2",children:"Item Name"}),jsxRuntimeExports.jsx("input",{id:"itemName",type:"text",value:i,onChange:nt=>{const at=nt.target.value.split(" ").map(et=>et.charAt(0).toUpperCase()+et.slice(1).toLowerCase()).join(" ");o(at)},disabled:tt,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter item name"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"itemPrice",className:"block text-base font-medium text-gray-700",children:"Price (Rs)"}),jsxRuntimeExports.jsx("label",{htmlFor:"grossPrice",className:"block text-base font-medium text-gray-700",children:"Gross Price (Rs)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("input",{id:"itemPrice",type:"number",value:a,onChange:nt=>c(nt.target.value),step:"0.01",min:"0.01",disabled:tt,className:"flex-1 px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0.00"}),jsxRuntimeExports.jsx("input",{id:"grossPrice",type:"number",value:d,onChange:nt=>h(nt.target.value),step:"0.01",min:"0.01",disabled:tt,className:"flex-1 px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"0.00"})]})]}),g&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-base mb-4",children:g}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:tt,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-blue-300 disabled:cursor-not-allowed",children:tt?"Adding...":"Add Item"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{$(!1),o(""),c(""),h(""),j("")},disabled:tt,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>$(!0),className:"w-full max-w-md mx-auto bg-blue-500 hover:bg-blue-600 text-white py-4 px-6 rounded-lg flex items-center justify-center transition-colors duration-200 shadow-sm text-lg",children:[jsxRuntimeExports.jsx(Plus,{size:22,className:"mr-3"}),jsxRuntimeExports.jsx("span",{children:"Add New Item"})]})})})},SwipeableItem=({item:s,onEdit:e,onDelete:i})=>{const[o,a]=reactExports.useState(0),[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState(0),[j,_]=reactExports.useState(!1),[$,tt]=reactExports.useState(!1),it=reactExports.useRef(null),st=reactExports.useRef(null),nt=`Rs ${s.price.toFixed(2)}`,at=()=>st.current?st.current.scrollWidth>st.current.clientWidth:!1,et=()=>{o>0&&(tt(!0),setTimeout(()=>tt(!1),300)),a(0)};reactExports.useEffect(()=>{const ct=vt=>{it.current&&!it.current.contains(vt.target)&&o>0&&et()};if(o>0)return document.addEventListener("mousedown",ct),document.addEventListener("touchstart",ct),()=>{document.removeEventListener("mousedown",ct),document.removeEventListener("touchstart",ct)}},[o]);const _e=ct=>{d(!0),g(ct)},b=(ct,vt)=>{if(!c)return;if(it.current){const jt=it.current.getBoundingClientRect();if(!(vt>=jt.top&&vt<=jt.bottom)){rt();return}}const _t=h-ct;_t>=0&&a(Math.min(_t,140))},rt=()=>{d(!1),o>=25?(tt(!0),a(140),setTimeout(()=>tt(!1),300)):(tt(!0),a(0),setTimeout(()=>tt(!1),300))},lt=ct=>{_e(ct.touches[0].clientX)},ot=ct=>{c&&ct.preventDefault(),b(ct.touches[0].clientX,ct.touches[0].clientY)},dt=ct=>{rt()},ht=ct=>{ct.button===0&&(ct.preventDefault(),_e(ct.clientX))};reactExports.useEffect(()=>{const ct=_t=>{b(_t.clientX,_t.clientY)},vt=()=>{rt()};if(c)return document.addEventListener("mousemove",ct),document.addEventListener("mouseup",vt),()=>{document.removeEventListener("mousemove",ct),document.removeEventListener("mouseup",vt)}},[c,h,o]);const pt=()=>{at()&&o===0?_(!0):o>0&&et()},mt=ct=>{ct.stopPropagation(),e(s),et()},xt=ct=>{ct.stopPropagation(),i(s.id),et()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:it,className:"relative h-16 overflow-hidden rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"absolute top-0 right-0 h-full flex",style:{width:"150px",transform:`translateX(${150-o}px)`,transition:$||!c?"transform 0.3s ease-out":"none",zIndex:20},children:[jsxRuntimeExports.jsx("button",{className:"w-[75px] bg-blue-500 flex items-center justify-center hover:bg-blue-600 transition-colors",onClick:mt,children:jsxRuntimeExports.jsx(SquarePen,{className:"text-white",size:20})}),jsxRuntimeExports.jsx("button",{className:"w-[75px] bg-red-500 flex items-center justify-center hover:bg-red-600 transition-colors",onClick:xt,children:jsxRuntimeExports.jsx(Trash2,{className:"text-white",size:20})})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 h-full flex items-center justify-center font-semibold text-gray-800 whitespace-nowrap rounded-r-lg",onTouchStart:lt,onTouchMove:ot,onTouchEnd:dt,onMouseDown:ht,onClick:o>0?et:void 0,style:{width:`${nt.length*8+16}px`,fontSize:"16px",zIndex:15,transform:`translateX(-${o}px)`,transition:$||!c?"transform 0.3s ease-out":"none",userSelect:"none",WebkitUserSelect:"none",cursor:o>0?"pointer":"grab",backgroundColor:"#fef3c7",touchAction:"pan-y"},children:nt}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 h-full cursor-pointer rounded-l-lg",style:{width:`calc(100% - ${nt.length*8+16}px)`,userSelect:"none",WebkitUserSelect:"none",touchAction:"pan-y",backgroundColor:"#fef3c7",zIndex:10},onTouchStart:lt,onTouchMove:ot,onTouchEnd:dt,onMouseDown:ht,onClick:pt,children:jsxRuntimeExports.jsx("div",{className:"relative h-full flex items-center px-4 pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center w-full",children:[jsxRuntimeExports.jsx("div",{ref:st,className:"font-semibold text-gray-900 truncate",style:{fontSize:"16px",zIndex:12,maxWidth:"100%"},children:s.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 truncate",style:{fontSize:"11px",zIndex:12,maxWidth:"100%"},children:["Gross Price: Rs ",s.grossPrice.toFixed(2)]}),s.lastEditedAt&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 truncate",style:{fontSize:"11px",zIndex:12,maxWidth:"100%"},children:["Last edited on ",s.lastEditedAt.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",s.lastEditedAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})})})]}),j&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg overflow-hidden animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Item Details"}),jsxRuntimeExports.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsx("p",{className:"text-gray-800 font-medium leading-relaxed",children:s.name})}),jsxRuntimeExports.jsx("div",{className:"text-right",children:jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-gray-900",children:nt})})]})})})]})},EditItemModal=({item:s,onClose:e,onSave:i})=>{const{items:o}=usePriceList(),[a,c]=reactExports.useState(""),[d,h]=reactExports.useState(""),[g,j]=reactExports.useState(""),[_,$]=reactExports.useState(""),[tt,it]=reactExports.useState(!1);if(reactExports.useEffect(()=>{s&&(c(s.name),h(s.price.toString()),j(s.grossPrice.toString()))},[s]),!s)return null;const st=async nt=>{if(nt.preventDefault(),!a.trim()){$("Please enter an item name");return}if(o.find(b=>b.id!==s.id&&b.name.toLowerCase()===a.trim().toLowerCase())){$(`Item "${a.trim()}" already exists in the price list`);return}const et=parseFloat(d);if(isNaN(et)||et<=0){$("Please enter a valid price");return}const _e=parseFloat(g);if(isNaN(_e)||_e<=0){$("Please enter a valid gross price");return}try{it(!0),$(""),await i(s.id,a.trim(),Math.round(et*100)/100,Math.round(_e*100)/100)}catch{$("Failed to update item. Please try again.")}finally{it(!1)}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden animate-fade-in",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Edit Item"}),jsxRuntimeExports.jsx("button",{onClick:e,disabled:tt,className:"text-gray-500 hover:text-gray-700 transition-colors disabled:cursor-not-allowed",children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsxs("form",{onSubmit:st,className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"editItemName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Name"}),jsxRuntimeExports.jsx("input",{id:"editItemName",type:"text",value:a,onChange:nt=>{const at=nt.target.value.split(" ").map(et=>et.charAt(0).toUpperCase()+et.slice(1).toLowerCase()).join(" ");c(at)},disabled:tt,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("label",{htmlFor:"editItemPrice",className:"block text-sm font-medium text-gray-700",children:"Price (Rs)"}),jsxRuntimeExports.jsx("label",{htmlFor:"editGrossPrice",className:"block text-sm font-medium text-gray-700",children:"Gross Price (Rs)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("input",{id:"editItemPrice",type:"number",value:d,onChange:nt=>h(nt.target.value),step:"0.01",min:"0.01",disabled:tt,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"}),jsxRuntimeExports.jsx("input",{id:"editGrossPrice",type:"number",value:g,onChange:nt=>j(nt.target.value),step:"0.01",min:"0.01",disabled:tt,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"})]})]}),_&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-sm mb-4",children:_}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:e,disabled:tt,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:tt,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200 disabled:bg-blue-300 disabled:cursor-not-allowed",children:tt?"Saving...":"Save Changes"})]})]})]})})},ConfirmationModal=({isOpen:s,title:e,message:i,confirmText:o="Confirm",cancelText:a="Cancel",onConfirm:c,onCancel:d,type:h="danger"})=>{if(!s)return null;const j=(()=>{switch(h){case"danger":return{iconBg:"bg-red-100",iconColor:"text-red-600",confirmBtn:"bg-red-500 hover:bg-red-600 focus:ring-red-500"};case"warning":return{iconBg:"bg-yellow-100",iconColor:"text-yellow-600",confirmBtn:"bg-yellow-500 hover:bg-yellow-600 focus:ring-yellow-500"};case"info":return{iconBg:"bg-blue-100",iconColor:"text-blue-600",confirmBtn:"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500"};default:return{iconBg:"bg-red-100",iconColor:"text-red-600",confirmBtn:"bg-red-500 hover:bg-red-600 focus:ring-red-500"}}})();return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-sm overflow-hidden animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-4",children:[jsxRuntimeExports.jsx("div",{className:`${j.iconBg} p-3 rounded-full`,children:jsxRuntimeExports.jsx(AlertTriangle,{className:`${j.iconColor}`,size:24})}),jsxRuntimeExports.jsx("button",{onClick:d,className:"text-gray-400 hover:text-gray-600 transition-colors",children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:i})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200 font-medium",children:a}),jsxRuntimeExports.jsx("button",{onClick:c,className:`flex-1 px-4 py-2 text-white rounded-lg transition-colors duration-200 font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 ${j.confirmBtn}`,children:o})]})]})})})},EmptyState=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center bg-yellow-50 rounded-lg mx-4 border border-yellow-200",children:[jsxRuntimeExports.jsx(ArrowUp,{size:32,className:"text-blue-500 animate-bounce mb-6"}),jsxRuntimeExports.jsx("div",{className:"bg-yellow-100 p-6 rounded-full mb-6 border border-yellow-300",children:jsxRuntimeExports.jsx(List,{size:48,className:"text-yellow-600"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-yellow-800 mb-3",children:"Your price list is empty"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700 mb-8 max-w-md text-lg",children:'Add your first item using the "Add New Item" button above'})]}),LoadingSpinner=({message:s="Loading..."})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:[jsxRuntimeExports.jsx(Loader2,{className:"animate-spin text-blue-500 mb-4",size:32}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-center",children:s})]}),ErrorMessage=({message:s,onRetry:e})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-red-50 p-4 rounded-full mb-4",children:jsxRuntimeExports.jsx(AlertCircle,{className:"text-red-500",size:32})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-center mb-4 max-w-sm",children:s}),e&&jsxRuntimeExports.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[jsxRuntimeExports.jsx(RefreshCw,{size:16}),"Try Again"]})]}),PriceList=()=>{const{items:s,updateItem:e,deleteItem:i,searchItems:o,searchQuery:a,isLoading:c,error:d}=usePriceList(),[h,g]=reactExports.useState(null),[j,_]=reactExports.useState(null),[$,tt]=reactExports.useState(!1),it=o(a),st=rt=>{g(rt)},nt=async(rt,lt,ot,dt)=>{try{await e(rt,lt,ot,dt),g(null)}catch{}},at=rt=>{const lt=s.find(ot=>ot.id===rt);lt&&_(lt)},et=async()=>{if(j)try{tt(!0),await i(j.id),_(null)}catch{}finally{tt(!1)}},_e=()=>{_(null)},b=()=>{window.location.reload()};return c?jsxRuntimeExports.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100vh - 60px - 84px - 64px)",minHeight:"200px"},children:jsxRuntimeExports.jsx(LoadingSpinner,{message:"Loading your price list..."})}):d?jsxRuntimeExports.jsx("div",{className:"overflow-y-auto",style:{height:"calc(100vh - 60px - 84px - 64px)",minHeight:"200px"},children:jsxRuntimeExports.jsx(ErrorMessage,{message:d,onRetry:b})}):jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto",style:{height:"calc(100vh - 64px - 84px - 64px)",minHeight:"200px"},children:[jsxRuntimeExports.jsxs("div",{className:"w-full px-6 pb-6",children:[jsxRuntimeExports.jsx("div",{style:{height:"25px"}}),it.length===0&&(a?jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-lg",children:['No items found matching "',a,'"']})}):jsxRuntimeExports.jsx(EmptyState,{})),it.map(rt=>jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsx(SwipeableItem,{item:rt,onEdit:st,onDelete:at})},rt.id))]}),h&&jsxRuntimeExports.jsx(EditItemModal,{item:h,onClose:()=>g(null),onSave:nt}),jsxRuntimeExports.jsx(ConfirmationModal,{isOpen:!!j,title:"Delete Item",message:`Are you sure you want to delete "${j==null?void 0:j.name}"? This action cannot be undone.`,confirmText:$?"Deleting...":"Delete",cancelText:"Cancel",type:"danger",onConfirm:et,onCancel:_e})]})},SearchBar=()=>{const{searchQuery:s,setSearchQuery:e,sortOption:i,setSortOption:o}=usePriceList(),[a,c]=React.useState(!1),d=[{value:"name-asc",label:"Name (A-Z)"},{value:"name-desc",label:"Name (Z-A)"},{value:"price-asc",label:"Price (Low to High)"},{value:"price-desc",label:"Price (High to Low)"},{value:"date-asc",label:"Oldest First"},{value:"date-desc",label:"Newest First"}];return jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 p-4 shadow-sm sticky top-[64px] z-30",children:jsxRuntimeExports.jsxs("div",{className:"w-full",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex items-center",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(Search,{size:20,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{type:"text",value:s,onChange:h=>e(h.target.value),placeholder:"Search items...",className:"block w-full pl-12 pr-12 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),jsxRuntimeExports.jsx("button",{onClick:()=>c(!a),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:jsxRuntimeExports.jsx(Filter,{size:20,className:`${i!=="date-desc"?"text-blue-500":"text-gray-400"}`})})]}),a&&jsxRuntimeExports.jsx("div",{className:"mt-3 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden animate-fade-in",children:jsxRuntimeExports.jsxs("div",{className:"p-3",children:[jsxRuntimeExports.jsx("p",{className:"text-base font-medium text-gray-700 mb-2 px-3",children:"Sort by:"}),d.map(h=>jsxRuntimeExports.jsx("button",{onClick:()=>{o(h.value),c(!1)},className:`w-full text-left px-4 py-3 text-base rounded-md transition-colors ${i===h.value?"bg-blue-50 text-blue-700":"hover:bg-gray-100 text-gray-700"}`,children:h.label},h.value))]})})]})})},CreditContext=reactExports.createContext(void 0),useCredit=()=>{const s=reactExports.useContext(CreditContext);if(s===void 0)throw new Error("useCredit must be used within a CreditProvider");return s},CreditProvider=({children:s})=>{const[e,i]=reactExports.useState([]),[o,a]=reactExports.useState([]),[c,d]=reactExports.useState([]),[h,g]=reactExports.useState(!0),[j,_]=reactExports.useState(null),$=async()=>{try{g(!0),_(null),console.log("Using localStorage for credit data");const xt=localStorage.getItem("creditClients"),ct=localStorage.getItem("creditTransactions"),vt=localStorage.getItem("creditPayments"),_t=xt?JSON.parse(xt).map(Et=>({...Et,createdAt:new Date(Et.createdAt),lastTransactionAt:new Date(Et.lastTransactionAt)})):[],jt=ct?JSON.parse(ct).map(Et=>({...Et,date:new Date(Et.date)})):[],yt=vt?JSON.parse(vt).map(Et=>({...Et,date:new Date(Et.date)})):[];i(_t),a(jt),d(yt),console.log(`Loaded ${_t.length} clients, ${jt.length} transactions, ${yt.length} payments from localStorage`)}catch(xt){console.error("Error loading credit data:",xt),_(xt instanceof Error?xt.message:"Failed to load data")}finally{g(!1)}};reactExports.useEffect(()=>{$()},[]);const tt=async xt=>{try{const ct=xt.trim().split(" ").map(ft=>ft.charAt(0).toUpperCase()+ft.slice(1).toLowerCase()).join(" ");if(e.find(ft=>ft.name.toLowerCase()===ct.toLowerCase())){const ft=new Error(`Client "${ct}" already exists`);throw ft.name="DuplicateClientError",ft}const jt=e.map(ft=>ft.id).filter(ft=>ft.match(/^G\d{3}$/)).map(ft=>parseInt(ft.substring(1))).sort((ft,wt)=>ft-wt);let yt=1;for(const ft of jt)if(ft===yt)yt++;else break;const Et=`G${yt.toString().padStart(3,"0")}`;if(e.find(ft=>ft.id===Et)){const ft=new Error(`Client with ID "${Et}" already exists`);throw ft.name="DuplicateClientError",ft}const gt={id:Et,name:ct,totalDebt:0,createdAt:new Date,lastTransactionAt:new Date,bottlesOwed:{beer:0,guinness:0,malta:0,coca:0,chopines:0}};return i(ft=>{const wt=[...ft,gt];return localStorage.setItem("creditClients",JSON.stringify(wt.map(bt=>({...bt,createdAt:bt.createdAt.toISOString(),lastTransactionAt:bt.lastTransactionAt.toISOString()})))),console.log("Client saved to localStorage, total clients:",wt.length),wt}),gt}catch(ct){throw ct instanceof Error&&ct.name==="DuplicateClientError"||console.error("Error adding client:",ct),ct}},it=async xt=>{try{const ct=e.map(yt=>yt.id===xt.id?xt:yt),vt=ct.find(yt=>yt.id===xt.id),_t=ct.filter(yt=>yt.id!==xt.id),jt=vt?[..._t,vt]:ct;i(jt),localStorage.setItem("creditClients",JSON.stringify(jt.map(yt=>({...yt,createdAt:yt.createdAt.toISOString(),lastTransactionAt:yt.lastTransactionAt.toISOString()}))))}catch(ct){throw console.error("Error updating client:",ct),ct}},st=xt=>{const ct=e.find(jt=>jt.id===xt);if(!ct)return;const _t=[...e.filter(jt=>jt.id!==xt),ct];i(_t),localStorage.setItem("creditClients",JSON.stringify(_t.map(jt=>({...jt,createdAt:jt.createdAt.toISOString(),lastTransactionAt:jt.lastTransactionAt.toISOString()})))),console.log(" Moved client to rightmost position:",ct.name)},nt=async xt=>{try{const ct=e.filter(jt=>jt.id!==xt),vt=o.filter(jt=>jt.clientId!==xt),_t=c.filter(jt=>jt.clientId!==xt);i(ct),a(vt),d(_t),localStorage.setItem("creditClients",JSON.stringify(ct.map(jt=>({...jt,createdAt:jt.createdAt.toISOString(),lastTransactionAt:jt.lastTransactionAt.toISOString()})))),localStorage.setItem("creditTransactions",JSON.stringify(vt.map(jt=>({...jt,date:jt.date.toISOString()})))),localStorage.setItem("creditPayments",JSON.stringify(_t.map(jt=>({...jt,date:jt.date.toISOString()}))))}catch(ct){throw console.error("Error deleting client:",ct),ct}},at=xt=>{if(!xt.trim())return e;const ct=xt.toLowerCase();return e.filter(vt=>vt.name.toLowerCase().includes(ct)||vt.id.toLowerCase().includes(ct))},et=xt=>{const ct=e.find(vt=>vt.id===xt);return(ct==null?void 0:ct.totalDebt)||0},_e=xt=>{const ct=e.find(vt=>vt.id===xt);return(ct==null?void 0:ct.bottlesOwed)||{beer:0,guinness:0,malta:0,coca:0,chopines:0}},mt={clients:e,transactions:o,payments:c,loading:h,error:j,addClient:tt,updateClient:it,deleteClient:nt,searchClients:at,getClientTotalDebt:et,getClientBottlesOwed:_e,getClientTransactions:xt=>o.filter(ct=>ct.clientId===xt),getClientPayments:xt=>c.filter(ct=>ct.clientId===xt),moveClientToFront:st,addTransaction:async(xt,ct,vt)=>{try{console.log(" CreditContext: Adding transaction:",{clientId:xt.id,description:ct,amount:vt});const _t={id:crypto.randomUUID(),clientId:xt.id,description:ct,amount:vt,date:new Date,type:"debt"};a(jt=>{const yt=[...jt,_t];return localStorage.setItem("creditTransactions",JSON.stringify(yt.map(Et=>({...Et,date:Et.date.toISOString()})))),yt}),i(jt=>{const yt=jt.map(Et=>Et.id===xt.id?{...Et,totalDebt:Et.totalDebt+vt,lastTransactionAt:new Date}:Et);return localStorage.setItem("creditClients",JSON.stringify(yt.map(Et=>({...Et,createdAt:Et.createdAt.toISOString(),lastTransactionAt:Et.lastTransactionAt.toISOString()})))),yt}),console.log(" CreditContext: Transaction added to localStorage successfully")}catch(_t){throw console.error("Error adding transaction:",_t),_t}},addPartialPayment:async(xt,ct)=>{try{const vt={id:crypto.randomUUID(),clientId:xt,amount:ct,date:new Date,type:"partial"},_t=[...c,vt];d(_t);const jt=et(xt),yt=Math.max(0,jt-ct),Et=e.map(ut=>ut.id===xt?{...ut,totalDebt:yt,lastTransactionAt:new Date}:ut);i(Et),localStorage.setItem("creditPayments",JSON.stringify(_t.map(ut=>({...ut,date:ut.date.toISOString()})))),localStorage.setItem("creditClients",JSON.stringify(Et.map(ut=>({...ut,createdAt:ut.createdAt.toISOString(),lastTransactionAt:ut.lastTransactionAt.toISOString()}))))}catch(vt){throw console.error("Error adding partial payment:",vt),vt}},settleClient:async xt=>{try{const ct=et(xt);let vt=c;if(ct>0){const yt={id:crypto.randomUUID(),clientId:xt,amount:ct,date:new Date,type:"full"};vt=[...c,yt],d(vt)}const _t=o.filter(yt=>yt.clientId!==xt);a(_t);const jt=e.map(yt=>yt.id===xt?{...yt,totalDebt:0,lastTransactionAt:new Date,bottlesOwed:{beer:0,guinness:0,malta:0,coca:0,chopines:0}}:yt);i(jt),localStorage.setItem("creditPayments",JSON.stringify(vt.map(yt=>({...yt,date:yt.date.toISOString()})))),localStorage.setItem("creditTransactions",JSON.stringify(_t.map(yt=>({...yt,date:yt.date.toISOString()})))),localStorage.setItem("creditClients",JSON.stringify(jt.map(yt=>({...yt,createdAt:yt.createdAt.toISOString(),lastTransactionAt:yt.lastTransactionAt.toISOString()}))))}catch(ct){throw console.error("Error settling client:",ct),ct}},returnBottles:async(xt,ct)=>{try{const vt=_e(xt),_t={beer:Math.max(0,vt.beer-(ct.beer||0)),guinness:Math.max(0,vt.guinness-(ct.guinness||0)),malta:Math.max(0,vt.malta-(ct.malta||0)),coca:Math.max(0,vt.coca-(ct.coca||0)),chopines:Math.max(0,vt.chopines-(ct.chopines||0))},jt=e.map(yt=>yt.id===xt?{...yt,bottlesOwed:_t,lastTransactionAt:new Date}:yt);i(jt),localStorage.setItem("creditClients",JSON.stringify(jt.map(yt=>({...yt,createdAt:yt.createdAt.toISOString(),lastTransactionAt:yt.lastTransactionAt.toISOString()}))))}catch(vt){throw console.error("Error returning bottles:",vt),vt}},refreshData:async()=>{await $()}};return jsxRuntimeExports.jsx(CreditContext.Provider,{value:mt,children:s})};class AddToHomescreenUtility{constructor(e={}){this.options={appName:"Golden Pricelist",appIconUrl:"https://jarivatoi.github.io/goldenpricelist/icon-192.png",...e}}show(){if(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0||window.matchMedia("(display-mode: fullscreen)").matches||window.matchMedia("(display-mode: minimal-ui)").matches){console.log(" App is already installed as PWA, skipping prompt");return}const i=localStorage.getItem("addToHomescreen-lastShown"),o=Date.now(),a=24*60*60*1e3;if(i&&o-parseInt(i)<a){console.log(" Add to homescreen shown recently, skipping");return}localStorage.setItem("addToHomescreen-lastShown",o.toString()),console.log(" Showing add to homescreen prompt"),this.showModal()}showModal(){const e=()=>{const j=navigator.userAgent.toLowerCase(),_=j.includes("android");return j.includes("tablet")||_&&!j.includes("mobile")||window.innerWidth>=768},i=document.createElement("div");i.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 999999;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    `;const o=document.createElement("div");o.style.cssText=`
      background: white;
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      text-align: center;
    `;const a=document.createElement("img");a.src=this.options.appIconUrl,a.style.cssText=`
      width: 64px;
      height: 64px;
      border-radius: 12px;
      margin-bottom: 16px;
    `,a.onerror=()=>a.style.display="none";const c=document.createElement("h3");c.textContent=`Install ${this.options.appName}`,c.style.cssText=`
      margin: 0 0 12px 0;
      font-size: 20px;
      font-weight: 600;
      color: #1a1a1a;
    `;const d=document.createElement("p");d.textContent=`Add ${this.options.appName} to your home screen for quick access!`,d.style.cssText=`
      margin: 0 0 24px 0;
      font-size: 16px;
      color: #666;
    `;const h=document.createElement("div");h.style.cssText=`
      background: #f0f9ff;
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 20px;
      text-align: left;
    `,e()?h.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;"> How to install on Android tablet:</div>
        <div style="font-size: 14px; color: #0c4a6e; line-height: 1.5;">
          1. Tap the <strong>Menu</strong> button () in your browser<br>
          2. Look for <strong>"Install app"</strong> or <strong>"Add to Home screen"</strong><br>
          3. Tap <strong>"Install"</strong> or <strong>"Add"</strong> to confirm<br>
          4. The app will appear on your home screen
        </div>
      `:h.innerHTML=`
        <div style="font-weight: 600; margin-bottom: 8px; color: #0369a1;"> How to install:</div>
        <div style="font-size: 14px; color: #0c4a6e; line-height: 1.5;">
          1. Tap the <strong>Share</strong> button <span style="font-size: 18px;"></span><br>
          2. Scroll down and tap <strong>"Add to Home Screen"</strong><br>
          3. Tap <strong>"Add"</strong> to confirm
        </div>
      `;const g=document.createElement("button");g.textContent="Maybe Later",g.style.cssText=`
      background: #f3f4f6;
      border: none;
      border-radius: 8px;
      padding: 12px 24px;
      font-size: 16px;
      color: #5f6368;
      cursor: pointer;
      width: 100%;
    `,g.onclick=()=>document.body.removeChild(i),i.onclick=j=>{j.target===i&&document.body.removeChild(i)},o.appendChild(a),o.appendChild(c),o.appendChild(d),o.appendChild(h),o.appendChild(g),i.appendChild(o),document.body.appendChild(i),setTimeout(()=>{document.body.contains(i)&&document.body.removeChild(i)},15e3)}}const AddToHomescreen=()=>(reactExports.useEffect(()=>{const e=(()=>{const o=navigator.userAgent.toLowerCase(),a=o.includes("android");return o.includes("tablet")||a&&!o.includes("mobile")||window.innerWidth>=768})()?2e3:3e3,i=setTimeout(()=>{new AddToHomescreenUtility().show()},e);return()=>clearTimeout(i)},[]),null),TabNavigation=({activeTab:s,onTabChange:e})=>{const i=[{id:"Over",label:"Over",icon:BarChart3},{id:"PriceList",label:"PriceList",icon:List},{id:"Order",label:"Order",icon:ShoppingCart},{id:"Credit",label:"Credit",icon:CreditCard}];return jsxRuntimeExports.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 shadow-sm z-20 w-full",children:jsxRuntimeExports.jsx("div",{className:"w-full",children:jsxRuntimeExports.jsx("div",{className:"flex overflow-x-auto",children:i.map(o=>{const a=o.icon,c=s===o.id;return jsxRuntimeExports.jsxs("button",{onClick:()=>e(o.id),className:`flex-1 min-w-0 flex items-center justify-center py-3 px-4 text-sm sm:text-base font-medium transition-colors duration-200 whitespace-nowrap ${c?"text-blue-600 border-b-2 border-blue-600 bg-blue-50 transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-gray-50"}`,children:[jsxRuntimeExports.jsx(a,{size:c?20:18,className:"mr-1 sm:mr-2 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"truncate",children:o.label})]},o.id)})})})})},ClientDetailModal=({client:s,onClose:e,onQuickAdd:i})=>{const{getClientTransactions:o,getClientPayments:a,getClientTotalDebt:c,updateClient:d,moveClientToFront:h}=useCredit(),[g,j]=React.useState(!1),[_,$]=React.useState(s.name),[tt,it]=React.useState(!1),st=o(s.id),nt=a(s.id),at=c(s.id),et=()=>{e()},_e=()=>{h(s.id),e()},b=async()=>{if(!_.trim()||_.trim()===s.name){j(!1),$(s.name);return}it(!0);try{const ot={...s,name:_.trim().split(" ").map(dt=>dt.charAt(0).toUpperCase()+dt.slice(1).toLowerCase()).join(" ")};await d(ot),j(!1)}catch{alert("Failed to update client name"),$(s.name)}finally{it(!1)}},rt=()=>{j(!1),$(s.name)},lt=jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-hidden",style:{height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-2xl max-h-[80vh] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{children:[g?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:ot=>$(ot.target.value),className:"text-2xl font-semibold text-gray-900 bg-transparent border-b-2 border-blue-500 focus:outline-none",disabled:tt,autoFocus:!0,onKeyDown:ot=>{ot.key==="Enter"&&b(),ot.key==="Escape"&&rt()}}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:b,disabled:tt,className:"px-2 py-1 text-xs bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:tt?"...":""}),jsxRuntimeExports.jsx("button",{onClick:rt,disabled:tt,className:"px-2 py-1 text-xs bg-gray-500 text-white rounded hover:bg-gray-600 disabled:opacity-50",children:""})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:s.name}),jsxRuntimeExports.jsx("button",{onClick:()=>j(!0),className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",title:"Edit client name",children:jsxRuntimeExports.jsx(Pen,{size:16})})]}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Client ID: ",s.id]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[i&&jsxRuntimeExports.jsxs("button",{onClick:()=>{i(s),et()},className:"bg-green-500 hover:bg-green-600 text-white p-2 rounded-lg transition-colors flex items-center gap-2",title:`Add transaction for ${s.name}`,children:[jsxRuntimeExports.jsx(Plus,{size:20}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Quick Add"})]}),jsxRuntimeExports.jsx("button",{onClick:_e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 160px)"},children:[jsxRuntimeExports.jsxs("div",{className:"bg-red-50 rounded-lg p-4 mb-6",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Outstanding Balance"}),jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-red-600",children:["Rs ",at.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Receipt,{size:20,className:"text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Items Taken"})]}),st.filter(ot=>ot.amount>=0).length===0?jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-center py-4",children:"No transactions found"}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:st.sort((ot,dt)=>dt.date.getTime()-ot.date.getTime()).filter(ot=>ot.amount>=0).map(ot=>jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:`${ot.amount>0?"flex justify-between items-start":""} mb-2`,children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:ot.description}),ot.amount>0&&jsxRuntimeExports.jsx("span",{className:`text-lg font-semibold ${ot.description.toLowerCase().includes("returned")?"text-green-600":"text-red-600"}`,children:ot.description.toLowerCase().includes("returned")?"Returned":`Rs ${ot.amount.toFixed(2)}`}),ot.amount===0&&ot.description.toLowerCase().includes("returned")&&jsxRuntimeExports.jsx("span",{className:"text-lg font-semibold text-green-600",children:"Returned"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx(Calendar,{size:14}),jsxRuntimeExports.jsxs("span",{children:[ot.date.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",ot.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]},ot.id))})]}),nt.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(CreditCard,{size:20,className:"text-green-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Payment History"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:nt.map(ot=>jsxRuntimeExports.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:ot.type==="partial"?"Partial Payment":"Full Settlement"}),jsxRuntimeExports.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["-Rs ",ot.amount.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[jsxRuntimeExports.jsx(Calendar,{size:14}),jsxRuntimeExports.jsxs("span",{children:[ot.date.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," at ",ot.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]},ot.id))})]})]}),jsxRuntimeExports.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex-shrink-0",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Total to be settled:"}),jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-red-600",children:["Rs ",at.toFixed(2)]})]}),jsxRuntimeExports.jsx("button",{onClick:_e,className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Close"})]})})]})});return reactDomExports.createPortal(lt,document.body)},ClientActionModal=({client:s,onClose:e,onResetCalculator:i})=>{const{addPartialPayment:o,settleClient:a,getClientTotalDebt:c,returnBottles:d,getClientBottlesOwed:h,getClientTransactions:g,addTransaction:j}=useCredit(),[_,$]=reactExports.useState(!1),[tt,it]=reactExports.useState(!1),[st,nt]=reactExports.useState(""),[at,et]=reactExports.useState({}),[_e,b]=reactExports.useState(!1),rt=c(s.id),lt=h(s.id),ot=g(s.id),dt=async()=>{const ut=parseFloat(st);if(isNaN(ut)||ut<=0||ut>rt){alert("Please enter a valid payment amount");return}try{b(!0),await o(s.id,ut),i&&i(),e()}catch(gt){console.error("Error processing partial payment:",gt),alert("Failed to process payment")}finally{b(!1)}},ht=async()=>{try{b(!0),await a(s.id),e(),i&&i()}catch(ut){console.error("Error settling client:",ut),alert("Failed to settle client")}finally{b(!1)}},pt=()=>{const ut={};return console.log(" Processing transactions for returnable items..."),ot.forEach(gt=>{var At,Rt,Pt,$t,Bt;if(gt.type==="payment"||gt.description.toLowerCase().includes("returned")){console.log(` Skipping transaction: "${gt.description}" (type: ${gt.type})`);return}const ft=gt.description.toLowerCase();if(console.log(` Processing: "${gt.description}" (amount: ${gt.amount})`),!ft.includes("chopine")&&!ft.includes("bouteille")){console.log(` Skipping: "${gt.description}" (no chopine/bouteille)`);return}const wt=/(\d+)\s+chopines?(?:\s+([^,]*))?/gi;let bt;for(;(bt=wt.exec(ft))!==null;){const Tt=parseInt(bt[1]),Nt=((At=bt[2])==null?void 0:At.trim())||"",kt=Nt?`Chopine ${Nt}`:"Chopine";console.log(` Adding ${Tt} ${kt} from: "${gt.description}"`),ut[kt]||(ut[kt]={total:0,transactions:[]}),ut[kt].total+=Tt,ut[kt].transactions.push({id:gt.id,description:gt.description,amount:gt.amount,quantity:Tt})}const Lt=/(\d+)\s+(?:(\d+(?:\.\d+)?L)\s+)?bouteilles?(?:\s+([^,]*))?/gi;let It;for(;(It=Lt.exec(ft))!==null;){const Tt=parseInt(It[1]),Nt=((Rt=It[2])==null?void 0:Rt.trim())||"",kt=((Pt=It[3])==null?void 0:Pt.trim())||"";let Ct;Nt&&kt?Ct=`${Nt} ${kt}`:kt?Ct=`Bouteille ${kt}`:Nt?Ct=`${Nt} Bouteille`:Ct="Bouteille",console.log(` Adding ${Tt} ${Ct} from: "${gt.description}"`),ut[Ct]||(ut[Ct]={total:0,transactions:[]}),ut[Ct].total+=Tt,ut[Ct].transactions.push({id:gt.id,description:gt.description,amount:gt.amount,quantity:Tt})}if(ft.includes("bouteille")&&!Lt.test(ft)){const Tt=ft.match(/(\d+(?:\.\d+)?L)/i),Nt=ft.match(/bouteilles?\s+([^,]*)/i),kt=(($t=Nt==null?void 0:Nt[1])==null?void 0:$t.trim())||"";let Ct;Tt&&kt?Ct=`${Tt[1]} ${kt}`:kt?Ct=`Bouteille ${kt}`:Tt?Ct=`${Tt[1]} Bouteille`:Ct="Bouteille",console.log(` Adding 1 ${Ct} (no number) from: "${gt.description}"`),ut[Ct]||(ut[Ct]={total:0,transactions:[]}),ut[Ct].total+=1,ut[Ct].transactions.push({id:gt.id,description:gt.description,amount:gt.amount,quantity:1})}if(ft.includes("chopine")&&!wt.test(ft)){const Tt=ft.match(/chopines?\s+([^,]*)/i),Nt=((Bt=Tt==null?void 0:Tt[1])==null?void 0:Bt.trim())||"",kt=Nt?`Chopine ${Nt}`:"Chopine";console.log(` Adding 1 ${kt} (no number) from: "${gt.description}"`),ut[kt]||(ut[kt]={total:0,transactions:[]}),ut[kt].total+=1,ut[kt].transactions.push({id:gt.id,description:gt.description,amount:gt.amount,quantity:1})}}),console.log(" Final returnable items:",ut),ut},mt=(ut,gt)=>{et(ft=>({...ft,[ut]:Math.max(0,(ft[ut]||0)+gt)}))},xt=async()=>{try{b(!0);for(const[ut,gt]of Object.entries(at))gt>0&&await ct(ut,gt);i&&i(),e()}catch(ut){console.error("Error processing returns:",ut),alert("Failed to process returns")}finally{b(!1)}},ct=async(ut,gt)=>{console.log(` Processing return of ${gt} ${ut}`);const ft=`Returned: ${gt} ${ut}${gt>1?"s":""}`;try{await j(s,ft,0),console.log(` Successfully processed return of ${gt} ${ut}`)}catch(wt){throw console.error(" Failed to process return:",wt),wt}},vt=ut=>ot.filter(gt=>gt.type==="debt"&&gt.description.toLowerCase().includes("returned")).reduce((gt,ft)=>{const wt=ft.description.toLowerCase();if(wt.includes(ut.toLowerCase())){const bt=wt.match(/returned:\s*(\d+)\s+/);if(bt)return gt+parseInt(bt[1])}return gt},0),_t=pt(),jt={};Object.entries(_t).forEach(([ut,gt])=>{const ft=vt(ut),wt=Math.max(0,gt.total-ft);wt>0&&(jt[ut]={...gt,total:wt})});const yt=Object.keys(jt).sort((ut,gt)=>ut.includes("Chopine")&&!gt.includes("Chopine")?-1:!ut.includes("Chopine")&&gt.includes("Chopine")?1:ut.localeCompare(gt)),Et=jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-hidden p-4",style:{height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s.name}),jsxRuntimeExports.jsxs("div",{className:"text-gray-600",children:[jsxRuntimeExports.jsxs("p",{children:["Outstanding: Rs ",rt.toFixed(2)]}),Object.values(lt).some(ut=>ut>0)&&jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Bottles owed: ",Object.entries(lt).filter(([ut,gt])=>gt>0).map(([ut,gt])=>`${gt} ${ut.charAt(0).toUpperCase()+ut.slice(1)}${gt>1?"s":""}`).join(", ")]})]})]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsx("div",{className:"p-6",children:!_&&!tt?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Choose Action"}),jsxRuntimeExports.jsxs("button",{onClick:()=>it(!0),disabled:_e,className:"w-full flex items-center gap-4 p-4 bg-orange-50 hover:bg-orange-100 rounded-lg border border-orange-200 transition-colors disabled:opacity-50",children:[jsxRuntimeExports.jsx("div",{className:"bg-orange-500 p-2 rounded-full",children:jsxRuntimeExports.jsx(RotateCcw,{size:20,className:"text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:"Return"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Return items or make adjustments"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>$(!0),disabled:_e,className:"w-full flex items-center gap-4 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors disabled:opacity-50",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-500 p-2 rounded-full",children:jsxRuntimeExports.jsx(CreditCard,{size:20,className:"text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:"Partial Payment"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Record a partial payment amount"})]})]}),jsxRuntimeExports.jsxs("button",{onClick:ht,disabled:_e,className:"w-full flex items-center gap-4 p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors disabled:opacity-50",children:[jsxRuntimeExports.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:jsxRuntimeExports.jsx(CheckCircle,{size:20,className:"text-white"})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:"Settle Account"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Mark as fully paid and remove"})]})]})]}):_?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Partial Payment"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount (Rs)"}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("input",{type:"number",value:st,onChange:ut=>nt(ut.target.value),max:rt,min:"0.01",step:"0.01",placeholder:"0.00",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Maximum: Rs ",rt.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>$(!1),disabled:_e,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:dt,disabled:_e||!st,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:_e?"Processing...":"Record Payment"})]})]}):jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>it(!1),className:"text-gray-500 hover:text-gray-700",children:jsxRuntimeExports.jsx(X,{size:20})}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Return Chopine & Bouteille"}),jsxRuntimeExports.jsx("div",{className:"flex-1"}),jsxRuntimeExports.jsxs("button",{onClick:async()=>{if(window.confirm(`Return ALL available Chopine & Bouteille items for ${s.name}? This will mark all returnable containers as returned.`))try{b(!0);const gt={};Object.entries(jt).forEach(([ft,wt])=>{gt[ft]=wt.total});for(const[ft,wt]of Object.entries(gt))wt>0&&await ct(ft,wt);e(),i&&i()}catch(gt){console.error("Error settling all returnables:",gt),alert("Failed to settle all returnables")}finally{b(!1)}},disabled:_e||Object.keys(jt).length===0,className:"bg-red-500 hover:bg-red-600 text-white p-2 rounded-lg transition-colors disabled:opacity-50 flex items-center gap-1",title:"Settle all returnable items",children:[jsxRuntimeExports.jsx(X,{size:16}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Settle All"})]})]}),Object.keys(jt).length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500",children:jsxRuntimeExports.jsx("p",{children:"No Chopine or Bouteille items found in transaction history"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[yt.map(ut=>{const gt=jt[ut];return jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:ut}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Available to return: ",gt.total]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:async()=>{if(window.confirm(`Return all ${gt.total} ${ut}${gt.total>1?"s":""} for ${s.name}?`))try{b(!0),await ct(ut,gt.total),e(),i&&i()}catch(wt){console.error("Error settling item type:",wt),alert(`Failed to settle ${ut}`)}finally{b(!1)}},disabled:_e,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 rounded transition-colors disabled:opacity-50",title:`Settle all ${ut}`,children:jsxRuntimeExports.jsx(X,{size:16})}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>mt(ut,-1),className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center",disabled:!at[ut]||at[ut]===0,children:jsxRuntimeExports.jsx(Minus,{size:16})}),jsxRuntimeExports.jsx("span",{className:"w-12 text-center font-medium text-lg",children:at[ut]||0}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>mt(ut,1),className:"w-8 h-8 bg-orange-500 hover:bg-orange-600 text-white rounded-full flex items-center justify-center",disabled:at[ut]>=gt.total,children:jsxRuntimeExports.jsx(Plus,{size:16})})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-1",children:"Recent transactions:"}),gt.transactions.slice(-2).map((ft,wt)=>{const bt=new Date(ft.date||Date.now());return jsxRuntimeExports.jsxs("p",{className:"truncate",children:[" ",ft.description," (",ft.quantity," ",ut,") - ",bt.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",bt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]},wt)}),ot.filter(wt=>wt.type==="debt"&&wt.description.toLowerCase().includes("returned")&&wt.description.toLowerCase().includes(ut.toLowerCase())).slice(-2).map((wt,bt)=>jsxRuntimeExports.jsxs("p",{className:"truncate text-green-600",children:[" ",wt.description," - ",wt.date.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",wt.date.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]},`returned-${bt}`))]})]},ut)}),jsxRuntimeExports.jsx("button",{className:"w-full px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors disabled:opacity-50",onClick:xt,disabled:_e||Object.values(at).every(ut=>ut===0),children:_e?"Processing...":"Process Returns"})]})]})})]})});return reactDomExports.createPortal(Et,document.body)};class ScrollingTextAnimator{constructor(e){this.animationId=null,this.isScrolling=!1,this.scrollTimeout=null,this.currentPosition=0,this.startTime=0,this.isAnimating=!1,this.container=e.container,this.textElement=e.textElement,this.text=e.text,this.pauseDuration=e.pauseDuration*1e3,this.scrollDuration=e.scrollDuration*1e3,this.easing=e.easing,this.start()}static create(e){return new ScrollingTextAnimator(e)}start(){this.reset(),this.scheduleNextAnimation()}reset(){this.currentPosition=0,this.textElement.style.transform="translateX(0px)",this.isAnimating=!1}scheduleNextAnimation(){this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.startScrollAnimation()},this.pauseDuration)}startScrollAnimation(){if(this.isScrolling)return;const e=this.container.offsetWidth,o=this.textElement.scrollWidth-e;if(o<=0)return;this.isAnimating=!0,this.startTime=performance.now();const a=c=>{if(!this.isAnimating)return;const d=c-this.startTime,h=Math.min(d/this.scrollDuration,1),g=this.applyEasing(h);this.currentPosition=-o*g,this.textElement.style.transform=`translateX(${this.currentPosition}px)`,h<1?this.animationId=requestAnimationFrame(a):(this.isAnimating=!1,setTimeout(()=>{this.startReturnAnimation()},this.pauseDuration))};this.animationId=requestAnimationFrame(a)}startReturnAnimation(){if(this.isScrolling)return;this.isAnimating=!0,this.startTime=performance.now();const e=this.currentPosition,i=o=>{if(!this.isAnimating)return;const a=o-this.startTime,c=Math.min(a/this.scrollDuration,1),d=this.applyEasing(c);this.currentPosition=e+-e*d,this.textElement.style.transform=`translateX(${this.currentPosition}px)`,c<1?this.animationId=requestAnimationFrame(i):(this.isAnimating=!1,this.currentPosition=0,this.scheduleNextAnimation())};this.animationId=requestAnimationFrame(i)}applyEasing(e){switch(this.easing){case"power1.inOut":return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2;case"power2.inOut":return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2;case"linear":return e;default:return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2}}handleScrollStart(){this.isScrolling=!0,this.stop(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.isScrolling=!1,this.scheduleNextAnimation()},1e3)}stop(){this.isAnimating=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.scrollTimeout&&(clearTimeout(this.scrollTimeout),this.scrollTimeout=null)}}const ScrollingText=({text:s,className:e="",children:i,pauseDuration:o=2,scrollDuration:a=6,easing:c="power2.inOut"})=>{const d=reactExports.useRef(null),h=reactExports.useRef(null),[g,j]=reactExports.useState(!1),_=reactExports.useRef(null),$=reactExports.useRef(null);return reactExports.useEffect(()=>{const tt=()=>{if(!d.current||!h.current)return;const nt=d.current,at=h.current;_.current&&(_.current.stop(),_.current=null),$.current&&(window.removeEventListener("scroll",$.current,{passive:!0}),document.removeEventListener("scroll",$.current,{passive:!0}),$.current=null),nt.offsetWidth,at.offsetWidth;const et=nt.offsetWidth,_e=at.scrollWidth,b=s||"children content",rt=b.includes(" "),lt=b.length>30;if(_e>et){j(!0);const ot=rt&&lt?o+1:o,dt=rt&&lt?a+1:a,ht=rt&&lt?"power1.inOut":c;_.current=ScrollingTextAnimator.create({container:nt,textElement:at,text:b,pauseDuration:ot,scrollDuration:dt,easing:ht}),console.log(" Started enhanced TweenMax animation for text:",b);const pt=()=>{_.current&&_.current.handleScrollStart()};window.addEventListener("scroll",pt,{passive:!0}),document.addEventListener("scroll",pt,{passive:!0});let mt=nt.parentElement;for(;mt;)(mt.scrollHeight>mt.clientHeight||mt.scrollWidth>mt.clientWidth)&&mt.addEventListener("scroll",pt,{passive:!0}),mt=mt.parentElement;$.current=pt}else j(!1),console.log(" Text fits in container, no animation needed")};tt();const it=()=>{setTimeout(tt,100)};window.addEventListener("resize",it);const st=new MutationObserver(()=>{setTimeout(tt,50)});return d.current&&st.observe(d.current,{childList:!0,subtree:!0,characterData:!0}),()=>{window.removeEventListener("resize",it),st.disconnect(),$.current&&(window.removeEventListener("scroll",$.current,{passive:!0}),document.removeEventListener("scroll",$.current,{passive:!0}),$.current=null),_.current&&(_.current.stop(),_.current=null)}},[s,i,o,a,c]),reactExports.useEffect(()=>()=>{$.current&&(window.removeEventListener("scroll",$.current,{passive:!0}),document.removeEventListener("scroll",$.current,{passive:!0}),$.current=null),_.current&&(_.current.stop(),_.current=null)},[]),jsxRuntimeExports.jsx("div",{ref:d,className:`w-full ${e}`,style:{position:"relative",width:"100%",maxWidth:"100%",overflow:"hidden"},children:jsxRuntimeExports.jsx("div",{ref:h,className:"whitespace-nowrap",style:{display:"inline-block",minWidth:"100%",maxWidth:"none",overflow:"hidden"},children:i||s})})},ClientCard=({client:s,onLongPress:e,onQuickAdd:i,onResetCalculator:o})=>{const{getClientTotalDebt:a,getClientBottlesOwed:c}=useCredit(),[d,h]=reactExports.useState(!1),[g,j]=reactExports.useState(!1),$=(()=>{const{getClientTransactions:ft}=useCredit(),wt=ft(s.id),bt={};wt.forEach(At=>{var Nt,kt,Ct,Ht,qt;if(At.type==="payment"||At.description.toLowerCase().includes("returned"))return;const Rt=At.description.toLowerCase();if(!Rt.includes("chopine")&&!Rt.includes("bouteille"))return;const Pt=/(\d+)\s+chopines?(?:\s+([^,]*))?/gi;let $t;for(;($t=Pt.exec(Rt))!==null;){const zt=parseInt($t[1]),Ut=((Nt=$t[2])==null?void 0:Nt.trim())||"",Ot=Ut?`Chopine ${Ut}`:"Chopine";bt[Ot]||(bt[Ot]=0),bt[Ot]+=zt}const Bt=/(\d+)\s+(?:(\d+(?:\.\d+)?L)\s+)?bouteilles?(?:\s+([^,]*))?/gi;let Tt;for(;(Tt=Bt.exec(Rt))!==null;){const zt=parseInt(Tt[1]),Ut=((kt=Tt[2])==null?void 0:kt.trim())||"",Ot=((Ct=Tt[3])==null?void 0:Ct.trim())||"";let Dt;Ut&&Ot?Dt=`${Ut} ${Ot}`:Ot?Dt=`Bouteille ${Ot}`:Ut?Dt=`${Ut} Bouteille`:Dt="Bouteille",bt[Dt]||(bt[Dt]=0),bt[Dt]+=zt}if(Rt.includes("bouteille")&&!Bt.test(Rt)){const zt=Rt.match(/(\d+(?:\.\d+)?L)/i),Ut=Rt.match(/bouteilles?\s+([^,]*)/i),Ot=((Ht=Ut==null?void 0:Ut[1])==null?void 0:Ht.trim())||"";let Dt;zt&&Ot?Dt=`${zt[1]} ${Ot}`:Ot?Dt=`Bouteille ${Ot}`:zt?Dt=`${zt[1]} Bouteille`:Dt="Bouteille",bt[Dt]||(bt[Dt]=0),bt[Dt]+=1}if(Rt.includes("chopine")&&!Pt.test(Rt)){const zt=Rt.match(/chopines?\s+([^,]*)/i),Ut=((qt=zt==null?void 0:zt[1])==null?void 0:qt.trim())||"",Ot=Ut?`Chopine ${Ut}`:"Chopine";bt[Ot]||(bt[Ot]=0),bt[Ot]+=1}});const Lt={};wt.filter(At=>At.type==="debt"&&At.description.toLowerCase().includes("returned")).forEach(At=>{const Rt=At.description.toLowerCase();Object.keys(bt).forEach(Pt=>{if(Rt.includes(Pt.toLowerCase())){const $t=Rt.match(/returned:\s*(\d+)\s+/);$t&&(Lt[Pt]||(Lt[Pt]=0),Lt[Pt]+=parseInt($t[1]))}})});const It=[];return Object.entries(bt).forEach(([At,Rt])=>{const Pt=Lt[At]||0,$t=Math.max(0,Rt-Pt);if($t>0){const Bt=wt.filter(kt=>kt.type==="debt"&&!kt.description.toLowerCase().includes("returned")&&kt.description.toLowerCase().includes(At.toLowerCase().split(" ")[0])).sort((kt,Ct)=>new Date(Ct.date||Date.now()).getTime()-new Date(kt.date||Date.now()).getTime())[0],Nt=(Bt?new Date(Bt.date||Date.now()):new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});It.push(`${$t} ${At}${$t>1?"s":""} (${Nt})`)}}),It.length>0?It.join(", "):""})(),[tt,it]=reactExports.useState(0),[st,nt]=reactExports.useState(0),[at,et]=reactExports.useState(0),[_e,b]=reactExports.useState(0),[rt,lt]=reactExports.useState(!1),[ot,dt]=reactExports.useState(!1),ht=reactExports.useRef(null),pt=reactExports.useRef(null),mt=a(s.id),xt=c(s.id),ct=()=>mt<=300||mt<500?"bg-green-100 border-green-200":mt<=1e3?"bg-orange-100 border-orange-200":"bg-red-100 border-red-200",vt=ft=>{const wt=ft.touches[0];it(wt.clientY),nt(wt.clientX),et(wt.clientY),b(wt.clientX),lt(!1),ht.current=setTimeout(()=>{rt||h(!0)},500)},_t=ft=>{if(!tt)return;const wt=ft.touches[0];et(wt.clientY),b(wt.clientX);const bt=tt-wt.clientY;Math.abs(bt)>20&&(lt(!0),ft.preventDefault(),ht.current&&clearTimeout(ht.current),bt>60&&j(!0))},jt=()=>{ht.current&&clearTimeout(ht.current),lt(!1),it(0),nt(0),et(0),b(0)},yt=ft=>{ft.button===0&&(dt(!0),it(ft.clientY),nt(ft.clientX),et(ft.clientY),b(ft.clientX),lt(!1),et(ft.clientY),b(ft.clientX),ht.current=setTimeout(()=>{rt||h(!0)},500),ft.preventDefault())},Et=ft=>{if(!ot)return;et(ft.clientY),b(ft.clientX);const wt=tt-ft.clientY;Math.abs(wt)>8&&(lt(!0),ht.current&&clearTimeout(ht.current),wt>25&&(j(!0),dt(!1),lt(!1)))},ut=()=>{ht.current&&clearTimeout(ht.current),dt(!1),lt(!1),it(0),nt(0),et(0),b(0)};React.useEffect(()=>{const ft=bt=>{if(!ot)return;et(bt.clientY),b(bt.clientX);const Lt=tt-bt.clientY;Math.abs(Lt)>5&&(lt(!0),ht.current&&clearTimeout(ht.current),Lt>20&&(j(!0),dt(!1),lt(!1)))},wt=()=>{ht.current&&clearTimeout(ht.current),dt(!1),lt(!1),it(0),nt(0),et(0),b(0)};if(ot)return document.addEventListener("mousemove",ft),document.addEventListener("mouseup",wt),()=>{document.removeEventListener("mousemove",ft),document.removeEventListener("mouseup",wt)}},[ot,tt,st]);const gt=ft=>{Math.abs(ft.deltaY)>Math.abs(ft.deltaX)&&ft.deltaY<-40&&(j(!0),ft.preventDefault())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{ref:pt,className:`flex-shrink-0 w-56 sm:w-64 rounded-lg shadow-md p-3 sm:p-4 border hover:shadow-lg transition-all duration-300 cursor-pointer select-none transform hover:scale-105 ${ct()}`,onTouchStart:vt,onTouchMove:_t,onTouchEnd:jt,onMouseDown:yt,onMouseMove:Et,onMouseUp:ut,onMouseLeave:ut,onWheel:gt,onClick:()=>!rt&&h(!0),style:{userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",touchAction:"pan-x pan-y",cursor:ot?"grabbing":"grab"},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-2 sm:mb-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:jsxRuntimeExports.jsx(User,{size:18,className:"text-blue-600 sm:w-5 sm:h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-800 truncate text-sm sm:text-base",children:s.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["ID: ",s.id]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-2 sm:mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx(TrendingUp,{size:14,className:"text-red-500 sm:w-4 sm:h-4"}),jsxRuntimeExports.jsx("span",{className:"text-xs sm:text-sm text-gray-600",children:"Outstanding"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xl sm:text-2xl font-bold text-red-600",children:["Rs ",mt.toFixed(2)]}),(xt.beer>0||xt.guinness>0||xt.malta>0||xt.coca>0||xt.chopines>0)&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["+ Bottles: ",Object.entries(xt).filter(([ft,wt])=>wt>0).map(([ft,wt])=>`${wt} ${ft.charAt(0).toUpperCase()+ft.slice(1)}`).join(", ")]})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs sm:text-sm text-gray-500",children:[$?jsxRuntimeExports.jsx("div",{className:"mb-1",children:jsxRuntimeExports.jsx(ScrollingText,{text:`Returnable: ${$}`,className:"text-orange-600 font-medium",pauseDuration:.5,scrollDuration:2.5,easing:"power1.inOut"})}):null,jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{size:12,className:"sm:w-3.5 sm:h-3.5"}),jsxRuntimeExports.jsxs("span",{children:[s.lastTransactionAt.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})," ",s.lastTransactionAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 sm:mt-3 text-center",children:[jsxRuntimeExports.jsx("div",{className:"inline-block w-8 h-1 bg-gray-300 rounded-full"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1 hidden sm:block",children:" Actions | Long press for details"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1 sm:hidden",children:" Actions"})]})]}),d&&jsxRuntimeExports.jsx(ClientDetailModal,{client:s,onClose:()=>h(!1),onQuickAdd:i}),g&&jsxRuntimeExports.jsx(ClientActionModal,{client:s,onClose:()=>j(!1),onResetCalculator:o})]})},ClientSearchModal=({calculatorValue:s,onClose:e,onAddToClient:i,linkedClient:o,onResetCalculator:a})=>{const{clients:c,addClient:d,searchClients:h}=useCredit(),[g,j]=reactExports.useState(""),[_,$]=reactExports.useState(""),[tt,it]=reactExports.useState(!1),[st,nt]=reactExports.useState((o==null?void 0:o.name)||""),[at,et]=reactExports.useState(!1),[_e,b]=reactExports.useState([]),[rt,lt]=reactExports.useState(""),[ot,dt]=reactExports.useState(""),ht=()=>{$(""),b([]),lt(""),dt(""),j(""),it(!1),nt((o==null?void 0:o.name)||""),e()};React.useEffect(()=>{console.log(" ClientSearchModal: Resetting state for calculatorValue:",s),$(""),b([]),lt(""),dt(""),j(""),it(!1),nt((o==null?void 0:o.name)||"")},[s]);const pt=h(g).sort((yt,Et)=>yt.name.localeCompare(Et.name)),mt=yt=>{if(!_.trim()){alert("Please enter a description for this transaction");return}dt("");try{i(yt,_.trim())}catch(Et){dt(Et instanceof Error?Et.message:"Failed to add transaction")}};React.useEffect(()=>{o&&_.trim()},[o,_]);const xt=async()=>{if(!st.trim()){alert("Please enter a client name");return}if(!_.trim()){alert("Please enter a description for this transaction");return}dt(""),et(!0);try{const yt=await d(st);console.log("New client added:",yt),i(yt,_.trim())}catch(yt){if(console.error("Error adding new client:",yt),dt(yt instanceof Error?yt.message:"Failed to add client"),yt instanceof Error&&yt.name==="DuplicateClientError"){nt("");return}}finally{et(!1)}},ct=yt=>{b(ut=>[...ut,_]);const Et=rt?`${rt} ${yt} `:`${yt} `;_.trim()===""?$(Et):$(ut=>ut+", "+Et),lt("")},vt=()=>{if(_e.length>0){const yt=_e[_e.length-1];$(yt),b(Et=>Et.slice(0,-1))}},_t=yt=>{yt==="clear"?($(""),lt(""),b([])):yt==="number-backspace"?lt(Et=>Et.slice(0,-1)):yt==="backspace"?$(Et=>{const ut=Et.split(", ");return ut.length>1?ut.slice(0,-1).join(", "):""}):lt(Et=>Et+yt)},jt=jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-hidden",style:{height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-lg max-h-[80vh] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:o?`Add to ${o.name}`:"Add to Client"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Amount: Rs ",s]})]}),jsxRuntimeExports.jsx("button",{onClick:ht,className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 120px)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Item Description ",rt&&jsxRuntimeExports.jsxs("span",{className:"text-blue-600 font-bold",children:["(",rt,")"]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:_e.length>0&&jsxRuntimeExports.jsx("button",{type:"button",onClick:vt,className:"px-3 py-1 text-xs bg-yellow-500 hover:bg-yellow-600 text-white rounded-md transition-colors",children:"Undo"})})]}),jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:yt=>{let ut=yt.target.value.replace(/\b\w/g,gt=>gt.toUpperCase());ut=ut.replace(/,(?!\s)/g,", "),$(ut)},placeholder:"Enter item or service description...",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),ot&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-red-600 text-sm",children:ot})}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-6 gap-2 mb-2",children:[["1","2","3","4","5"].map(yt=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>_t(yt),className:"px-3 py-2 bg-white hover:bg-gray-100 border border-gray-300 rounded font-medium transition-colors text-sm",children:yt},yt)),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-6 gap-2",children:[["6","7","8","9","0"].map(yt=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>_t(yt),className:"px-3 py-2 bg-white hover:bg-gray-100 border border-gray-300 rounded font-medium transition-colors text-sm",children:yt},yt)),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>_t("number-backspace"),className:"px-3 py-2 bg-orange-500 hover:bg-orange-600 text-white border border-orange-500 rounded font-medium transition-colors text-sm",children:""})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>_t("clear"),className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors text-sm",children:"Clear"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>_t("backspace"),className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors text-sm",children:" Item"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Actions"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:["Food Stuffs","Cig","Rum","Can","Soft Drinks","Cakes","Chopine","Bouteille","1L Bouteille","1.5L Bouteille","0.5L","1.5L","2L"].map(yt=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ct(yt),className:"px-3 py-2 text-sm bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-colors",children:yt},yt))}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ct("Others"),className:"w-full px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-lg transition-colors",children:"Others"})]}),tt?jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:st,onChange:yt=>{const Et=yt.target.value.split(" ").map(ut=>ut.charAt(0).toUpperCase()+ut.slice(1).toLowerCase()).join(" ");nt(Et)},placeholder:"Enter client name...",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>it(!1),className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Back"}),jsxRuntimeExports.jsx("button",{onClick:xt,disabled:at||!st.trim()||!_.trim(),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:at?"Adding...":"Add Client"})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!o&&jsxRuntimeExports.jsxs("div",{className:"relative mb-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(Search,{size:20,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{type:"text",value:g,onChange:yt=>j(yt.target.value),placeholder:"Search clients by name or ID...",className:"block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),!o&&jsxRuntimeExports.jsxs("button",{onClick:()=>it(!0),className:"w-full flex items-center gap-3 p-3 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors mb-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-green-500 p-2 rounded-full",children:jsxRuntimeExports.jsx(Plus,{size:16,className:"text-white"})}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800",children:"Add New Client"})]}),o&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-500 p-2 rounded-full",children:jsxRuntimeExports.jsx(User,{size:16,className:"text-white"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:o.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["ID: ",o.id]})]})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>mt(o),disabled:!_.trim(),className:"w-full mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["Add to ",o.name]})]}),!o&&jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto",children:pt.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500",children:g?"No clients found":"No clients available"}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:pt.map(yt=>jsxRuntimeExports.jsxs("button",{onClick:()=>mt(yt),disabled:!_.trim(),className:"w-full flex items-center gap-3 p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-left disabled:opacity-50 disabled:cursor-not-allowed",children:[jsxRuntimeExports.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:jsxRuntimeExports.jsx(User,{size:16,className:"text-blue-600"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:yt.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",yt.id]})]}),jsxRuntimeExports.jsx("div",{className:"text-right",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-red-600 font-medium",children:["Rs ",yt.totalDebt.toFixed(2)]})})]},yt.id))})})]})]})]})});return reactDomExports.createPortal(jt,document.body)},CreditManagement=()=>{const{clients,searchClients,addTransaction,getClientTotalDebt,deleteClient}=useCredit(),[searchQuery,setSearchQuery]=reactExports.useState(""),[showAllClients,setShowAllClients]=reactExports.useState(!1),[calculatorValue,setCalculatorValue]=reactExports.useState("0"),[calculatorMemory,setCalculatorMemory]=reactExports.useState(0),[selectedClient,setSelectedClient]=reactExports.useState(null),[showClientSearch,setShowClientSearch]=reactExports.useState(!1),[isCalculatorActive,setIsCalculatorActive]=reactExports.useState(!1),[linkedClient,setLinkedClient]=reactExports.useState(null),[showSettings,setShowSettings]=reactExports.useState(!1),[showDeleteConfirm,setShowDeleteConfirm]=reactExports.useState(!1),[clientToDelete,setClientToDelete]=reactExports.useState(null),[deleteConfirmText,setDeleteConfirmText]=reactExports.useState(""),[showDatabaseMenu,setShowDatabaseMenu]=reactExports.useState(!1),filteredClients=showAllClients?searchClients(searchQuery):searchClients(searchQuery).filter(s=>getClientTotalDebt(s.id)>0),sortedClients=[...filteredClients].sort((s,e)=>0),totalDebtAllClients=clients.reduce((s,e)=>s+getClientTotalDebt(e.id),0),handleCalculatorInput=value=>{if(value==="C")setCalculatorValue("0"),setIsCalculatorActive(!1);else if(value==="=")try{const expression=calculatorValue.replace(//g,"*").replace(//g,"/"),cleanExpression=expression.replace(/[+\-*/]+$/,"");if(!cleanExpression||cleanExpression==="")return;const result=eval(cleanExpression);if(!isFinite(result)){setCalculatorValue("Error");return}setCalculatorValue(result.toString())}catch{setCalculatorValue("Error")}else if(value==="CE"){const s=["+","-","*","/"];let e=-1;for(let i=calculatorValue.length-1;i>=0;i--)if(s.includes(calculatorValue[i])){e=i;break}e>=0?setCalculatorValue(calculatorValue.substring(0,e)):(setCalculatorValue("0"),setIsCalculatorActive(!1))}else if(value==="")calculatorValue.length>1?setCalculatorValue(calculatorValue.slice(0,-1)):setCalculatorValue("0");else if(value==="M+")try{const expression=calculatorValue.replace(//g,"*").replace(//g,"/"),cleanExpression=expression.replace(/[+\-*/]+$/,"");if(!cleanExpression||cleanExpression==="")return;const currentValue=eval(cleanExpression);if(!isFinite(currentValue))return;setCalculatorMemory(s=>s+currentValue)}catch{}else value==="MR"?(setCalculatorValue(calculatorMemory.toString()),setIsCalculatorActive(!0)):value==="MC"?setCalculatorMemory(0):value==="*"?(calculatorValue==="0"||calculatorValue==="Error"||calculatorValue==="Infinity"?setCalculatorValue("0"):calculatorValue.match(/[+\-]$/)?setCalculatorValue(calculatorValue.slice(0,-1)+""):setCalculatorValue(calculatorValue+""),setIsCalculatorActive(!0)):value==="/"?(calculatorValue==="0"||calculatorValue==="Error"||calculatorValue==="Infinity"?setCalculatorValue("0"):calculatorValue.match(/[+\-]$/)?setCalculatorValue(calculatorValue.slice(0,-1)+""):setCalculatorValue(calculatorValue+""),setIsCalculatorActive(!0)):value==="+"?(calculatorValue==="0"||calculatorValue==="Error"||calculatorValue==="Infinity"?setCalculatorValue("0+"):calculatorValue.match(/[+\-]$/)?setCalculatorValue(calculatorValue.slice(0,-1)+"+"):setCalculatorValue(calculatorValue+"+"),setIsCalculatorActive(!0)):value==="-"?(calculatorValue==="0"||calculatorValue==="Error"||calculatorValue==="Infinity"?setCalculatorValue("0-"):calculatorValue.match(/[+\-]$/)?setCalculatorValue(calculatorValue.slice(0,-1)+"-"):setCalculatorValue(calculatorValue+"-"),setIsCalculatorActive(!0)):((calculatorValue==="0"||calculatorValue==="Error"||calculatorValue==="Infinity")&&!isNaN(Number(value))?setCalculatorValue(value):setCalculatorValue(calculatorValue+value),setIsCalculatorActive(!0))},handleQuickAdd=s=>{setLinkedClient(s),setShowClientSearch(!0)},handleCalculatorCancel=()=>{setLinkedClient(null),setCalculatorValue("0"),setIsCalculatorActive(!1)},handleResetCalculator=()=>{console.log(" CreditManagement: Resetting calculator"),setCalculatorValue("0"),setIsCalculatorActive(!1),setLinkedClient(null),setShowClientSearch(!1)},handleAddToClient=async(s,e)=>{try{console.log("Adding transaction:",{clientId:s.id,clientName:s.name,description:e,amount:calculatorValue});let i=calculatorValue.replace(//g,"*").replace(//g,"/");i=i.replace(/[+\-*/]+$/,""),(!i||i==="")&&(i="0");let o;try{o=Function('"use strict"; return ('+i+")")(),console.log("Calculated amount:",o,"from expression:",i)}catch(a){throw console.error("Expression evaluation failed:",a),new Error("Please enter a valid amount")}if(isNaN(o)||!isFinite(o)||o<0)throw new Error("Please enter a valid amount");if(!e||!e.trim())throw new Error("Please enter a description");if(!s||!s.id)throw new Error("Invalid client selected");await addTransaction(s,e,o),console.log("Transaction added successfully"),setCalculatorValue("0"),setIsCalculatorActive(!1),setShowClientSearch(!1),setLinkedClient(null)}catch(i){throw console.error("Transaction error:",i),i}},handleDeleteClient=s=>{setClientToDelete(s),setShowDeleteConfirm(!0),setDeleteConfirmText("")},confirmDeleteClient=async()=>{if(!clientToDelete||deleteConfirmText!=="DELETE"){alert("Please type DELETE to confirm");return}try{await deleteClient(clientToDelete.id),setShowDeleteConfirm(!1),setClientToDelete(null),setDeleteConfirmText(""),setShowSettings(!1),alert(`Client ${clientToDelete.name} (${clientToDelete.id}) has been permanently deleted`)}catch{alert("Failed to delete client")}},handleExportDatabase=async()=>{try{const s=new Date,e=s.getDate().toString().padStart(2,"0"),i=(s.getMonth()+1).toString().padStart(2,"0"),o=s.getFullYear(),a=`${e}-${i}-${o}`,c=localStorage.getItem("creditClients"),d=localStorage.getItem("creditTransactions"),h=localStorage.getItem("creditPayments"),g={version:"1.0",exportDate:new Date().toISOString(),creditDatabase:{creditClients:c?JSON.parse(c):[],creditTransactions:d?JSON.parse(d):[],creditPayments:h?JSON.parse(h):[]}},j=JSON.stringify(g,null,2),_=new Blob([j],{type:"application/json"}),$=URL.createObjectURL(_),tt=document.createElement("a");tt.href=$,tt.download=`GoldenPricelist_Credit_${a}.json`,document.body.appendChild(tt),tt.click(),document.body.removeChild(tt),URL.revokeObjectURL($),setShowDatabaseMenu(!1),alert("Credit database exported successfully!")}catch{alert("Error exporting credit database. Please try again.")}},handleImportDatabase=()=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async e=>{var a;const i=(a=e.target.files)==null?void 0:a[0];if(!i)return;const o=new FileReader;o.onload=async c=>{var d;try{const h=(d=c.target)==null?void 0:d.result,g=JSON.parse(h);if(!g.creditDatabase)throw new Error("Invalid credit database file format");window.confirm("This will replace ALL your current credit data (clients, transactions, payments) with the imported database. This action cannot be undone. Are you sure you want to continue?")&&(g.creditDatabase.creditClients&&localStorage.setItem("creditClients",JSON.stringify(g.creditDatabase.creditClients)),g.creditDatabase.creditTransactions&&localStorage.setItem("creditTransactions",JSON.stringify(g.creditDatabase.creditTransactions)),g.creditDatabase.creditPayments&&localStorage.setItem("creditPayments",JSON.stringify(g.creditDatabase.creditPayments)),setShowDatabaseMenu(!1),alert("Credit database imported successfully! Please refresh the page to see the changes."),window.location.reload())}catch{alert("Error importing credit database file. Please check the file format and try again.")}},o.readAsText(i)},s.click(),setShowDatabaseMenu(!1)},getCalculatorAmount=()=>{try{let s=calculatorValue.replace(//g,"*").replace(//g,"/");if(s=s.replace(/[+\-*/]+$/,""),!s||s==="")return 0;const e=Function('"use strict"; return ('+s+")")();return isNaN(e)||!isFinite(e)?0:e}catch{return 0}};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row h-full bg-gray-50 select-none",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 gap-4 lg:gap-6 p-4 lg:p-6 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0 order-2 lg:order-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg lg:text-xl font-semibold text-gray-800",children:["Golden Active Clients",totalDebtAllClients>0?` (Rs ${totalDebtAllClients.toFixed(2)})`:""]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>setShowAllClients(!showAllClients),className:`p-2 rounded-lg transition-colors ${showAllClients?"text-gray-600 hover:text-gray-800 hover:bg-gray-100":"text-blue-600 bg-blue-100 hover:bg-blue-200"}`,title:showAllClients?"Show All Clients":"Show Active Clients Only",children:showAllClients?jsxRuntimeExports.jsx(Users,{size:20}):jsxRuntimeExports.jsx(UserCheck,{size:20})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("button",{onClick:()=>setShowDatabaseMenu(!showDatabaseMenu),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Database Import/Export",children:jsxRuntimeExports.jsx(Database,{size:20})}),showDatabaseMenu&&jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden z-50",children:jsxRuntimeExports.jsxs("div",{className:"py-1",children:[jsxRuntimeExports.jsxs("button",{onClick:handleExportDatabase,className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center transition-colors",children:[jsxRuntimeExports.jsx(Upload,{size:16,className:"mr-3 text-green-600"}),"Export Credit Database"]}),jsxRuntimeExports.jsxs("button",{onClick:handleImportDatabase,className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center transition-colors",children:[jsxRuntimeExports.jsx(Download,{size:16,className:"mr-3 text-blue-600"}),"Import Credit Database"]})]})})]}),jsxRuntimeExports.jsx("button",{onClick:()=>setShowSettings(!0),className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",title:"Client Settings",children:jsxRuntimeExports.jsx(Settings,{size:20})})]})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 mb-4 overflow-hidden w-full min-h-0",children:jsxRuntimeExports.jsx("div",{className:"overflow-x-auto pb-4 h-full w-full min-h-[200px]",children:jsxRuntimeExports.jsx("div",{className:"flex gap-3 min-w-max h-full items-center justify-center",children:sortedClients.length===0?jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center w-full h-32 text-gray-500",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-base sm:text-lg",children:showAllClients?searchQuery?`No clients found matching "${searchQuery}"`:"No clients found":"No clients with outstanding debts"}),jsxRuntimeExports.jsx("p",{className:"text-xs sm:text-sm",children:"Use the calculator to add transactions"})]})}):sortedClients.map(s=>jsxRuntimeExports.jsx(ClientCard,{client:s,onLongPress:()=>setSelectedClient(s),onQuickAdd:handleQuickAdd,onResetCalculator:handleResetCalculator},s.id))})})}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-md mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(Search,{size:20,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{type:"text",value:searchQuery,onChange:s=>setSearchQuery(s.target.value),placeholder:"Search by client name or ID...",className:"block w-full pl-10 pr-4 py-2 lg:py-3 text-base lg:text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),jsxRuntimeExports.jsxs("div",{className:"w-full lg:w-80 bg-white rounded-lg shadow-lg p-4 lg:p-6 order-1 lg:order-2 flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[jsxRuntimeExports.jsx(Calculator,{size:24,className:"text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg lg:text-xl font-semibold text-gray-800",children:"Calculator"}),linkedClient&&jsxRuntimeExports.jsxs("p",{className:"text-xs lg:text-sm text-green-600 font-medium",children:["Adding to: ",linkedClient.name]})]}),linkedClient&&jsxRuntimeExports.jsx("button",{onClick:handleCalculatorCancel,className:"text-gray-500 hover:text-gray-700 transition-colors",title:"Cancel link to client",children:jsxRuntimeExports.jsx(X,{size:20})})]}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-gray-100 rounded-lg p-4 text-right relative",children:[calculatorMemory!==0&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-3 text-xs text-blue-600 font-semibold",children:"M"}),jsxRuntimeExports.jsx("div",{className:"text-xl sm:text-2xl font-mono text-gray-800 min-h-[2rem] flex items-center justify-end overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"truncate max-w-full",title:calculatorValue,children:calculatorValue})})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5 gap-2 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("M+"),className:"bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg font-semibold text-sm",children:"M+"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("MR"),className:"bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg font-semibold text-sm",children:"MR"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("MC"),className:"bg-purple-500 hover:bg-purple-600 text-white p-3 rounded-lg font-semibold text-sm",children:"MC"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("CE"),className:"bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg font-semibold text-sm",children:"CE"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("C"),className:"bg-red-500 hover:bg-red-600 text-white p-3 rounded-lg font-semibold text-sm",children:"C"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("7"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-4 rounded-lg font-semibold text-lg",children:"7"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("8"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"8"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("9"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"9"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("/"),className:"bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-semibold",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput(""),className:"bg-gray-500 hover:bg-gray-600 text-white p-3 rounded-lg font-semibold",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("4"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"4"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("5"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"5"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("6"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"6"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("*"),className:"bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-semibold",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("-"),className:"bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-semibold row-span-2",children:""}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("1"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"1"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("2"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"2"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("3"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"3"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("+"),className:"bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-semibold row-span-2",children:"+"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("0"),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold col-span-2",children:"0"}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("."),className:"bg-gray-200 hover:bg-gray-300 text-gray-800 p-3 rounded-lg font-semibold",children:"."}),jsxRuntimeExports.jsx("button",{onClick:()=>handleCalculatorInput("="),className:"bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg font-semibold",children:"="})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>{if(linkedClient){if(getCalculatorAmount()<=0){alert("Please enter an amount greater than 0");return}setTimeout(()=>{const e=prompt(`Enter description for ${linkedClient.name}:`);e&&e.trim()&&handleAddToClient(linkedClient,e.trim()).catch(i=>{console.error("Failed to add transaction:",i),alert("Failed to add transaction. Please try again.")})},100)}else setShowClientSearch(!0)},disabled:calculatorValue==="Error"||linkedClient&&getCalculatorAmount()<=0,className:`w-full ${linkedClient?"bg-blue-500 hover:bg-blue-600":"bg-green-500 hover:bg-green-600"} disabled:bg-gray-300 disabled:cursor-not-allowed text-white p-4 rounded-lg font-semibold text-lg flex items-center justify-center gap-2`,children:[jsxRuntimeExports.jsx(Plus,{size:20}),linkedClient?`Add to ${linkedClient.name}`:"Add to Client"]})]})]}),selectedClient&&jsxRuntimeExports.jsx(ClientDetailModal,{client:selectedClient,onClose:()=>setSelectedClient(null)}),showSettings&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-hidden",style:{height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Client Settings"}),jsxRuntimeExports.jsx("button",{onClick:()=>setShowSettings(!1),className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 120px)"},children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Manage All Clients"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Here you can permanently delete clients (e.g., if they have passed away). Their ID will become available for new clients."}),jsxRuntimeExports.jsx("div",{className:"max-h-64 overflow-y-auto border border-gray-200 rounded-lg",children:clients.length===0?jsxRuntimeExports.jsx("div",{className:"p-4 text-center text-gray-500",children:"No clients found"}):clients.sort((s,e)=>s.id.localeCompare(e.id)).map(s=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-gray-100 last:border-b-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-800",children:s.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:["ID: ",s.id]}),jsxRuntimeExports.jsxs("span",{className:getClientTotalDebt(s.id)>0?"text-red-600 font-medium":"text-green-600",children:["Rs ",getClientTotalDebt(s.id).toFixed(2)]})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>handleDeleteClient(s),className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:`Delete ${s.name}`,children:jsxRuntimeExports.jsx(Trash2,{size:16})})]},s.id))})]})]})}),document.body),showDeleteConfirm&&clientToDelete&&reactDomExports.createPortal(jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-hidden",style:{height:"100vh"},children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:jsxRuntimeExports.jsx(AlertTriangle,{size:20,className:"text-red-600"})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delete Client"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>{setShowDeleteConfirm(!1),setClientToDelete(null),setDeleteConfirmText("")},className:"text-gray-500 hover:text-gray-700 transition-colors",children:jsxRuntimeExports.jsx(X,{size:24})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 120px)"},children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:[clientToDelete.name," (",clientToDelete.id,")"]}),jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:[jsxRuntimeExports.jsx("p",{className:"text-red-800 font-medium mb-2",children:" This action cannot be undone!"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Client will be permanently deleted"}),jsxRuntimeExports.jsx("li",{children:" All transaction history will be lost"}),jsxRuntimeExports.jsx("li",{children:" All payment records will be lost"}),jsxRuntimeExports.jsxs("li",{children:[' ID "',clientToDelete.id,'" will be available for new clients']})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:'Type "DELETE" to confirm:'}),jsxRuntimeExports.jsx("input",{type:"text",value:deleteConfirmText,onChange:s=>setDeleteConfirmText(s.target.value),placeholder:"Type DELETE",className:"block w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-red-500"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{setShowDeleteConfirm(!1),setClientToDelete(null),setDeleteConfirmText("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),jsxRuntimeExports.jsx("button",{onClick:confirmDeleteClient,disabled:deleteConfirmText!=="DELETE",className:"flex-1 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete Permanently"})]})]})]})}),document.body),showClientSearch&&jsxRuntimeExports.jsx(ClientSearchModal,{calculatorValue,onClose:()=>{setShowClientSearch(!1)},onAddToClient:handleAddToClient,linkedClient,onResetCalculator:handleResetCalculator},`search-modal-${Date.now()}`)]})},OverContext=reactExports.createContext(void 0),useOver=()=>{const s=reactExports.useContext(OverContext);if(!s)throw new Error("useOver must be used within an OverProvider");return s},formatItemName=s=>s.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),OverProvider=({children:s})=>{const[e,i]=reactExports.useState([]),[o,a]=reactExports.useState(""),[c,d]=reactExports.useState(!1),[h,g]=reactExports.useState(null);reactExports.useEffect(()=>{(async()=>{try{if(d(!0),g(null),supabase)try{const{data:nt,error:at}=await supabase.from("over_items").select("*").order("created_at",{ascending:!1});if(at)throw at;const et=(nt||[]).map(b=>({id:b.id,name:b.name,createdAt:new Date(b.created_at),isCompleted:b.is_completed||!1,completedAt:b.completed_at?new Date(b.completed_at):void 0}));i(et),console.log(`Loaded ${et.length} over items from Supabase`);const _e=supabase.channel("over_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"over_items"},b=>{if(console.log("Real-time over items update received:",b),b.eventType==="INSERT"){const rt={id:b.new.id,name:b.new.name,createdAt:new Date(b.new.created_at),isCompleted:b.new.is_completed||!1,completedAt:b.new.completed_at?new Date(b.new.completed_at):void 0};i(lt=>[rt,...lt.filter(ot=>ot.id!==rt.id)])}else if(b.eventType==="UPDATE"){const rt={id:b.new.id,name:b.new.name,createdAt:new Date(b.new.created_at),isCompleted:b.new.is_completed||!1,completedAt:b.new.completed_at?new Date(b.new.completed_at):void 0};i(lt=>lt.map(ot=>ot.id===rt.id?rt:ot))}else b.eventType==="DELETE"&&i(rt=>rt.filter(lt=>lt.id!==b.old.id))}).subscribe();return()=>{_e.unsubscribe()}}catch(nt){console.warn("Failed to load from Supabase, falling back to localStorage:",nt),g("Unable to connect to online data. Using offline data.");const at=localStorage.getItem("overItems"),et=at?JSON.parse(at).map(_e=>({..._e,createdAt:new Date(_e.createdAt),completedAt:_e.completedAt?new Date(_e.completedAt):void 0})):[];i(et),console.log(`Loaded ${et.length} over items from localStorage (fallback)`)}else{console.log("Using localStorage for over items");const nt=localStorage.getItem("overItems"),at=nt?JSON.parse(nt).map(et=>({...et,createdAt:new Date(et.createdAt),completedAt:et.completedAt?new Date(et.completedAt):void 0})):[];i(at),console.log(`Loaded ${at.length} over items from localStorage`)}}catch(nt){console.error("Failed to load over items:",nt),g("Failed to load items. Please try again.")}finally{d(!1)}})()},[]);const it={items:e,addItem:async st=>{try{const nt=formatItemName(st);if(e.find(_e=>_e.name===nt&&!_e.isCompleted))throw new Error(`"${nt}" is already in the list`);const et={id:crypto.randomUUID(),name:nt,createdAt:new Date,isCompleted:!1};if(supabase){const{error:_e}=await supabase.from("over_items").insert({id:et.id,name:et.name,created_at:et.createdAt.toISOString(),is_completed:et.isCompleted});if(_e)throw _e;i(b=>[et,...b]),console.log("Over item added to Supabase successfully:",et)}else{const _e=[et,...e];i(_e),localStorage.setItem("overItems",JSON.stringify(_e.map(b=>{var rt;return{...b,createdAt:b.createdAt.toISOString(),completedAt:(rt=b.completedAt)==null?void 0:rt.toISOString()}}))),console.log("Over item added to localStorage successfully:",et)}}catch(nt){throw g(nt instanceof Error?nt.message:"Failed to add item"),nt}},toggleItem:async st=>{try{const nt=e.find(_e=>_e.id===st);if(!nt)return;const at=!nt.isCompleted,et=at?new Date:void 0;if(supabase){const{error:_e}=await supabase.from("over_items").update({is_completed:at,completed_at:et==null?void 0:et.toISOString()}).eq("id",st);if(_e)throw _e;i(b=>b.map(rt=>rt.id===st?{...rt,isCompleted:at,completedAt:et}:rt)),console.log("Over item toggled in Supabase successfully")}else{const _e=e.map(b=>b.id===st?{...b,isCompleted:at,completedAt:et}:b);i(_e),localStorage.setItem("overItems",JSON.stringify(_e.map(b=>{var rt;return{...b,createdAt:b.createdAt.toISOString(),completedAt:(rt=b.completedAt)==null?void 0:rt.toISOString()}}))),console.log("Over item toggled in localStorage successfully")}}catch(nt){throw g("Failed to update item"),nt}},deleteItem:async st=>{try{if(supabase){const{error:nt}=await supabase.from("over_items").delete().eq("id",st);if(nt)throw nt;i(at=>at.filter(et=>et.id!==st)),console.log("Over item deleted from Supabase successfully")}else{const nt=e.filter(at=>at.id!==st);i(nt),localStorage.setItem("overItems",JSON.stringify(nt.map(at=>{var et;return{...at,createdAt:at.createdAt.toISOString(),completedAt:(et=at.completedAt)==null?void 0:et.toISOString()}}))),console.log("Over item deleted from localStorage successfully")}}catch(nt){throw g("Failed to delete item"),nt}},searchQuery:o,setSearchQuery:a,searchItems:st=>{if(!st.trim())return[...e].sort((et,_e)=>et.isCompleted!==_e.isCompleted?et.isCompleted?1:-1:_e.createdAt.getTime()-et.createdAt.getTime());const nt=st.toLowerCase();return e.filter(et=>et.name.toLowerCase().includes(nt)).sort((et,_e)=>et.isCompleted!==_e.isCompleted?et.isCompleted?1:-1:_e.createdAt.getTime()-et.createdAt.getTime())},isLoading:c,error:h};return jsxRuntimeExports.jsx(OverContext.Provider,{value:it,children:s})},OverManagement=()=>{const{addItem:s,toggleItem:e,deleteItem:i,searchQuery:o,setSearchQuery:a,searchItems:c,isLoading:d,error:h}=useOver(),[g,j]=reactExports.useState(!1),[_,$]=reactExports.useState(""),[tt,it]=reactExports.useState(!1),st=c(o),nt=st.filter(ot=>!ot.isCompleted),at=st.filter(ot=>ot.isCompleted),et=async ot=>{if(ot.preventDefault(),!_.trim()){alert("Please enter an item name");return}try{it(!0),await s(_.trim()),$(""),j(!1)}catch(dt){alert(dt instanceof Error?dt.message:"Failed to add item")}finally{it(!1)}},_e=async ot=>{try{await e(ot)}catch{alert("Failed to update item")}},b=async(ot,dt)=>{if(window.confirm(`Are you sure you want to delete "${dt}"?`))try{await i(ot)}catch{alert("Failed to delete item")}},rt=async()=>{if(nt.length===0)return;if(window.confirm(`Are you sure you want to clear all ${nt.length} items from "Need to Buy"? This action cannot be undone.`))try{for(const dt of nt)await i(dt.id)}catch{alert("Failed to clear items")}},lt=async()=>{if(at.length===0)return;if(window.confirm(`Are you sure you want to clear all ${at.length} bought items? This action cannot be undone.`))try{for(const dt of at)await i(dt.id)}catch{alert("Failed to clear items")}};return d?jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Package,{size:48,className:"text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading items..."})]})}):jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden select-none",children:[jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm p-4",children:g?jsxRuntimeExports.jsxs("form",{onSubmit:et,className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 w-full max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"itemName",className:"block text-base font-medium text-gray-700 mb-2",children:"Item Name"}),jsxRuntimeExports.jsx("input",{id:"itemName",type:"text",value:_,onChange:ot=>{const dt=ot.target.value.split(" ").map(ht=>ht.charAt(0).toUpperCase()+ht.slice(1).toLowerCase()).join(" ");$(dt)},disabled:tt,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed select-text",placeholder:"Enter item name",autoFocus:!0})]}),h&&jsxRuntimeExports.jsx("p",{className:"text-red-500 text-base mb-4",children:h}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:tt,className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-orange-300 disabled:cursor-not-allowed",children:tt?"Adding...":"Add Item"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{j(!1),$("")},disabled:tt,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>j(!0),className:"w-full max-w-md mx-auto bg-orange-500 hover:bg-orange-600 text-white py-3 px-6 rounded-lg flex items-center justify-center transition-colors duration-200 shadow-sm text-lg",children:[jsxRuntimeExports.jsx(Plus,{size:22,className:"mr-3"}),jsxRuntimeExports.jsx("span",{children:"Add Item to Buy"})]})}),jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 p-4 shadow-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-md mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(Search,{size:20,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:ot=>a(ot.target.value),placeholder:"Search items...",className:"block w-full pl-10 pr-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500 select-text"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[st.length===0&&!o&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[jsxRuntimeExports.jsx("div",{className:"bg-orange-50 p-6 rounded-full mb-6",children:jsxRuntimeExports.jsx(ShoppingCart,{size:48,className:"text-orange-500"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"No items to buy"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-8 max-w-md text-lg",children:"Add items that are over or out of stock using the button above"})]}),st.length===0&&o&&jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-lg",children:['No items found matching "',o,'"']})}),nt.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx(ShoppingCart,{size:20,className:"mr-2 text-orange-500"}),"Need to Buy (",nt.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:rt,className:"flex items-center gap-1 px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",title:`Clear all ${nt.length} items`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),jsxRuntimeExports.jsx("span",{children:"Clear All"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:nt.map(ot=>jsxRuntimeExports.jsx(OverItemCard,{item:ot,onToggle:_e,onDelete:b},ot.id))})]}),at.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[jsxRuntimeExports.jsx(Check,{size:20,className:"mr-2 text-green-500"}),"Bought (",at.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:lt,className:"flex items-center gap-1 px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors",title:`Clear all ${at.length} items`,children:[jsxRuntimeExports.jsx(Trash2,{size:14}),jsxRuntimeExports.jsx("span",{children:"Clear All"})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:at.map(ot=>jsxRuntimeExports.jsx(OverItemCard,{item:ot,onToggle:_e,onDelete:b},ot.id))})]})]})]})},OverItemCard=({item:s,onToggle:e,onDelete:i})=>jsxRuntimeExports.jsx("div",{className:`bg-white rounded-lg shadow-sm border p-4 transition-all duration-200 ${s.isCompleted?"bg-green-50 border-green-200":"border-gray-200 hover:shadow-md"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center flex-1",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>e(s.id),className:`mr-3 p-1 rounded-full transition-colors ${s.isCompleted?"bg-green-500 text-white":"border-2 border-gray-300 hover:border-orange-500"}`,children:[s.isCompleted&&jsxRuntimeExports.jsx(Check,{size:16}),!s.isCompleted&&jsxRuntimeExports.jsx("div",{className:"w-4 h-4"})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:`font-medium ${s.isCompleted?"text-gray-500 line-through":"text-gray-800"}`,children:s.name}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:s.isCompleted&&s.completedAt?`Bought on ${s.completedAt.toLocaleDateString("en-GB")} ${s.completedAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`:`Added on ${s.createdAt.toLocaleDateString("en-GB")} ${s.createdAt.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",hour12:!1})}`})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>i(s.id,s.name),className:"ml-3 p-2 text-gray-400 hover:text-red-500 transition-colors",children:jsxRuntimeExports.jsx(X,{size:18})})]})}),OrderContext=reactExports.createContext(void 0),useOrder=()=>{const s=reactExports.useContext(OrderContext);if(!s)throw new Error("useOrder must be used within an OrderProvider");return s},formatName=s=>s.trim().split(" ").filter(e=>e.length>0).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),OrderProvider=({children:s})=>{const[e,i]=reactExports.useState([]),[o,a]=reactExports.useState([]),[c,d]=reactExports.useState([]),[h,g]=reactExports.useState(!1),[j,_]=reactExports.useState(null);reactExports.useEffect(()=>{g(!1)},[]);const dt={categories:e,addCategory:async(ht,pt=15)=>{const mt=formatName(ht);if(e.find(vt=>vt.name.toLowerCase()===mt.toLowerCase()))throw new Error(`Category "${mt}" already exists`);const ct={id:crypto.randomUUID(),name:mt,vatPercentage:pt,createdAt:new Date};return i(vt=>[...vt,ct]),ct},updateCategory:async(ht,pt,mt)=>{const xt=formatName(pt);i(ct=>ct.map(vt=>vt.id===ht?{...vt,name:xt,vatPercentage:mt}:vt))},deleteCategory:async ht=>{i(pt=>pt.filter(mt=>mt.id!==ht)),a(pt=>pt.filter(mt=>mt.categoryId!==ht)),d(pt=>pt.filter(mt=>mt.categoryId!==ht))},itemTemplates:o,getItemTemplatesByCategory:ht=>o.filter(pt=>pt.categoryId===ht),addItemTemplate:async(ht,pt,mt,xt=!1)=>{const ct=formatName(pt),vt=e.find(Et=>Et.id===ht),_t=(vt==null?void 0:vt.vatPercentage)||15;if(o.find(Et=>Et.categoryId===ht&&Et.name.toLowerCase()===ct.toLowerCase()))throw new Error(`Item "${ct}" already exists in this category`);const yt={id:crypto.randomUUID(),categoryId:ht,name:ct,unitPrice:mt,isVatNil:xt,vatPercentage:_t,createdAt:new Date};return a(Et=>[...Et,yt]),yt},updateItemTemplate:async(ht,pt,mt,xt)=>{const ct=formatName(pt);a(vt=>vt.map(_t=>_t.id===ht?{..._t,name:ct,unitPrice:mt,isVatNil:xt}:_t))},deleteItemTemplate:async ht=>{a(pt=>pt.filter(mt=>mt.id!==ht)),d(pt=>pt.map(mt=>({...mt,items:mt.items.filter(xt=>xt.templateId!==ht),totalCost:mt.items.filter(xt=>xt.templateId!==ht).filter(xt=>xt.isAvailable).reduce((xt,ct)=>xt+ct.totalPrice,0)})))},orders:c,getOrdersByCategory:ht=>c.filter(pt=>pt.categoryId===ht).sort((pt,mt)=>mt.orderDate.getTime()-pt.orderDate.getTime()),addOrder:async(ht,pt,mt)=>{const xt=mt.filter(vt=>vt.isAvailable).reduce((vt,_t)=>vt+_t.totalPrice,0),ct={id:crypto.randomUUID(),categoryId:ht,orderDate:pt,items:mt,totalCost:xt,createdAt:new Date};return d(vt=>[...vt,ct]),ct},updateOrder:async(ht,pt,mt)=>{const xt=mt.filter(ct=>ct.isAvailable).reduce((ct,vt)=>ct+vt.totalPrice,0);d(ct=>ct.map(vt=>vt.id===ht?{...vt,orderDate:pt,items:mt,totalCost:xt,lastEditedAt:new Date}:vt))},deleteOrder:async ht=>{d(pt=>pt.filter(mt=>mt.id!==ht))},searchCategories:ht=>{if(!ht.trim())return e;const pt=ht.toLowerCase();return e.filter(mt=>mt.name.toLowerCase().includes(pt))},isLoading:h,error:j};return jsxRuntimeExports.jsx(OrderContext.Provider,{value:dt,children:s})},OrderManagement=()=>{const{categories:s,addCategory:e,updateCategory:i,deleteCategory:o,itemTemplates:a,getItemTemplatesByCategory:c,addItemTemplate:d,updateItemTemplate:h,deleteItemTemplate:g,orders:j,getOrdersByCategory:_,addOrder:$,updateOrder:tt,deleteOrder:it,searchCategories:st,isLoading:nt,error:at}=useOrder(),[et,_e]=reactExports.useState(""),[b,rt]=reactExports.useState(null),[lt,ot]=reactExports.useState("manage"),[dt,ht]=reactExports.useState(!1),[pt,mt]=reactExports.useState(!1),[xt,ct]=reactExports.useState(!1),[vt,_t]=reactExports.useState(""),[jt,yt]=reactExports.useState("15"),[Et,ut]=reactExports.useState(""),[gt,ft]=reactExports.useState(""),[wt,bt]=reactExports.useState(!1),[Lt,It]=reactExports.useState("15"),[At,Rt]=reactExports.useState(null),[Pt,$t]=reactExports.useState(null),[Bt,Tt]=reactExports.useState(null),[Nt,kt]=reactExports.useState(!1),Ct=st(et),Ht=async St=>{if(St.preventDefault(),!vt.trim()||!jt.trim()){alert("Please enter a category name and VAT percentage");return}const Mt=parseFloat(jt);if(isNaN(Mt)||Mt<0||Mt>100){alert("Please enter a valid VAT percentage (0-100)");return}try{kt(!0),await e(vt.trim(),Mt),_t(""),yt("15"),ht(!1)}catch(Ft){alert(Ft instanceof Error?Ft.message:"Failed to add category")}finally{kt(!1)}},qt=async(St,Mt=!1,Ft=15)=>{if(St.preventDefault(),!b||!Et.trim()||!gt.trim()){alert("Please fill in all fields");return}const Vt=parseFloat(gt);if(isNaN(Vt)||Vt<0){alert("Please enter a valid price");return}const Wt=parseFloat(Lt);if(isNaN(Wt)||Wt<0||Wt>100){alert("Please enter a valid VAT percentage (0-100)");return}try{kt(!0),await d(b.id,Et.trim(),Vt,Mt,Wt),ut(""),ft(""),It("15"),bt(!1),mt(!1)}catch(Kt){alert(Kt instanceof Error?Kt.message:"Failed to add item")}finally{kt(!1)}},zt=async(St,Mt,Ft)=>{try{await i(St.id,Mt,Ft),Rt(null)}catch{alert("Failed to update category")}},Ut=async(St,Mt,Ft,Vt)=>{try{await h(St.id,Mt,Ft,Vt),$t(null)}catch{alert("Failed to update item")}},Ot=async St=>{if(window.confirm(`Are you sure you want to delete "${St.name}"? This will also delete all items and orders in this category.`))try{await o(St.id),(b==null?void 0:b.id)===St.id&&rt(null)}catch{alert("Failed to delete category")}},Dt=async St=>{if(window.confirm(`Are you sure you want to delete "${St.name}"? This will also remove it from all orders.`))try{await g(St.id)}catch{alert("Failed to delete item")}};return nt?jsxRuntimeExports.jsx("div",{className:"flex-1 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Package,{size:48,className:"text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Loading orders..."})]})}):jsxRuntimeExports.jsxs("div",{className:"flex-1 flex flex-col bg-gray-50 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm p-4",children:b?jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("button",{onClick:()=>rt(null),className:"text-purple-600 hover:text-purple-700 mb-2",children:" Back to Categories"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:b.name})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>ot("manage"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${lt==="manage"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[jsxRuntimeExports.jsx(Pen,{size:16}),"Manage"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ot("order"),className:`px-4 py-2 rounded-lg flex items-center gap-2 transition-colors ${lt==="order"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[jsxRuntimeExports.jsx(Plus,{size:16}),"Order"]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[dt?jsxRuntimeExports.jsxs("form",{onSubmit:Ht,className:"bg-white rounded-lg shadow-sm p-4 border border-gray-200 w-full max-w-2xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{htmlFor:"categoryName",className:"block text-base font-medium text-gray-700 mb-2",children:"Category Name"}),jsxRuntimeExports.jsx("input",{id:"categoryName",type:"text",value:vt,onChange:St=>_t(St.target.value),disabled:Nt,className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Enter category name",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"submit",disabled:Nt,className:"flex-1 bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-purple-300 disabled:cursor-not-allowed",children:Nt?"Adding...":"Add Category"}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{ht(!1),_t(""),yt("15")},disabled:Nt,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 py-3 px-6 text-lg rounded-md transition-colors duration-200 disabled:bg-gray-100 disabled:cursor-not-allowed",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>ht(!0),className:"w-full max-w-md mx-auto bg-purple-500 hover:bg-purple-600 text-white py-3 px-6 rounded-lg flex items-center justify-center transition-colors duration-200 shadow-sm text-lg",children:[jsxRuntimeExports.jsx(Plus,{size:22,className:"mr-3"}),jsxRuntimeExports.jsx("span",{children:"Add Order Category"})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-md mx-auto",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(Search,{size:20,className:"text-gray-400"})}),jsxRuntimeExports.jsx("input",{type:"text",value:et,onChange:St=>_e(St.target.value),placeholder:"Search categories...",className:"block w-full pl-10 pr-4 py-3 text-lg border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]})})]})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:b?jsxRuntimeExports.jsx("div",{children:lt==="manage"?jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Manage Items"}),jsxRuntimeExports.jsxs("button",{onClick:()=>mt(!0),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),"Add Item"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:c(b.id).map(St=>jsxRuntimeExports.jsx(ItemTemplateCard,{item:St,onEdit:()=>$t(St),onDelete:()=>Dt(St),isEditing:(Pt==null?void 0:Pt.id)===St.id,onSaveEdit:(Mt,Ft,Vt)=>Ut(St,Mt,Ft,Vt),onCancelEdit:()=>$t(null)},St.id))})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Orders"}),jsxRuntimeExports.jsxs("button",{onClick:()=>ct(!0),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{size:16}),"Create New Order"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:_(b.id).map(St=>jsxRuntimeExports.jsx(OrderCard,{order:St,itemTemplates:c(b.id),onDelete:()=>{window.confirm("Are you sure you want to delete this order?")&&it(St.id)},onUpdate:tt},St.id))})]})}):jsxRuntimeExports.jsxs("div",{children:[Ct.length===0&&!et&&jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[jsxRuntimeExports.jsx("div",{className:"bg-purple-50 p-6 rounded-full mb-6",children:jsxRuntimeExports.jsx(Package,{size:48,className:"text-purple-500"})}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-3",children:"No order categories"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-8 max-w-md text-lg",children:"Add your first order category using the button above"})]}),Ct.length===0&&et&&jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-500 text-lg",children:['No categories found matching "',et,'"']})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ct.map(St=>jsxRuntimeExports.jsx(CategoryCard,{category:St,itemsCount:c(St.id).length,ordersCount:_(St.id).length,vatPercentage:St.vatPercentage,onManage:()=>{rt(St),ot("manage")},onOrder:()=>{rt(St),ot("order")},onEdit:()=>Rt(St),onDelete:()=>Ot(St),isEditing:(At==null?void 0:At.id)===St.id,onSaveEdit:(Mt,Ft)=>zt(St,Mt,Ft),onCancelEdit:()=>Rt(null)},St.id))})]})}),pt&&b&&jsxRuntimeExports.jsx(AddItemModal,{category:b,onClose:()=>{mt(!1),ut(""),ft("")},onAdd:qt,itemName:Et,setItemName:ut,itemPrice:gt,setItemPrice:ft,isSubmitting:Nt}),xt&&b&&jsxRuntimeExports.jsx(CreateOrderModal,{category:b,itemTemplates:c(b.id),onClose:()=>ct(!1),onAdd:$}),Bt&&b&&jsxRuntimeExports.jsx(EditOrderModal,{order:Bt,itemTemplates:c(b.id),onClose:()=>Tt(null),onUpdate:tt})]})},CategoryCard=({category:s,itemsCount:e,ordersCount:i,vatPercentage:o,onManage:a,onOrder:c,onEdit:d,onDelete:h,isEditing:g,onSaveEdit:j,onCancelEdit:_})=>{const[$,tt]=reactExports.useState(s.name),[it,st]=reactExports.useState(s.vatPercentage.toString()),nt=()=>{const at=parseFloat(it);$.trim()&&!isNaN(at)&&at>=0&&at<=100&&j($.trim(),at)};return g?jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("input",{type:"text",value:$,onChange:at=>tt(at.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Category name",autoFocus:!0}),jsxRuntimeExports.jsx("input",{type:"number",value:it,onChange:at=>st(at.target.value),min:"0",max:"100",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"VAT percentage"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:nt,className:"flex-1 bg-green-500 text-white px-3 py-1 rounded text-sm",children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:_,className:"flex-1 bg-gray-500 text-white px-3 py-1 rounded text-sm",children:"Cancel"})]})]}):jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200 hover:shadow-lg transition-shadow",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-gray-800 text-lg",children:s.name}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:d,className:"text-blue-500 hover:text-blue-700 p-1",children:jsxRuntimeExports.jsx(Pen,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:h,className:"text-red-500 hover:text-red-700 p-1",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 mb-4",children:jsxRuntimeExports.jsxs("p",{children:[e," items  ",i," orders  VAT ",o,"%"]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:a,className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Pen,{size:16}),"Manage"]}),jsxRuntimeExports.jsxs("button",{onClick:c,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded-md transition-colors flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Plus,{size:16}),"Order"]})]})]})},ItemTemplateCard=({item:s,onEdit:e,onDelete:i,isEditing:o,onSaveEdit:a,onCancelEdit:c})=>{const[d,h]=reactExports.useState(s.name),[g,j]=reactExports.useState(s.unitPrice.toString()),[_,$]=reactExports.useState(s.isVatNil),tt=()=>{const it=parseFloat(g);d.trim()&&!isNaN(it)&&it>=0&&a(d.trim(),it,_)};return o?jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[jsxRuntimeExports.jsx("input",{type:"text",value:d,onChange:it=>h(it.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Item name",autoFocus:!0}),jsxRuntimeExports.jsx("input",{type:"number",value:g,onChange:it=>j(it.target.value),min:"0",step:"0.01",className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Unit price"})]}),jsxRuntimeExports.jsx("div",{className:"mb-3",children:jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:_,onChange:it=>$(it.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"VAT Nil (No VAT applicable)"})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:tt,className:"flex-1 bg-green-500 text-white px-3 py-1 rounded text-sm",children:"Save"}),jsxRuntimeExports.jsx("button",{onClick:c,className:"flex-1 bg-gray-500 text-white px-3 py-1 rounded text-sm",children:"Cancel"})]})]}):jsxRuntimeExports.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-gray-800",children:s.name}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Rs ",s.unitPrice.toFixed(2)]}),s.isVatNil&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded",children:"VAT Nil"}),!s.isVatNil&&jsxRuntimeExports.jsxs("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded",children:["VAT ",s.vatPercentage,"%"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:e,className:"text-blue-500 hover:text-blue-700 p-1",children:jsxRuntimeExports.jsx(Pen,{size:14})}),jsxRuntimeExports.jsx("button",{onClick:i,className:"text-red-500 hover:text-red-700 p-1",children:jsxRuntimeExports.jsx(Trash2,{size:14})})]})]})})},OrderCard=({order:s,itemTemplates:e,onDelete:i,onUpdate:o})=>{const[a,c]=reactExports.useState(s.items),[d,h]=reactExports.useState(!1),[g,j]=reactExports.useState(!1),_=at=>{const et=e.find(_e=>_e.id===at);return(et==null?void 0:et.name)||"Unknown Item"},$=at=>{const et=at.unitPrice,_e=at.isVatNil?0:et*(at.vatPercentage||15)/100,b={id:Date.now().toString(),templateId:at.id,quantity:1,unitPrice:at.unitPrice,isVatNil:at.isVatNil,vatAmount:_e,totalPrice:at.isVatNil?at.unitPrice:at.unitPrice+_e,isAvailable:!0},rt=[...a,b];c(rt),it(rt),j(!1)},tt=(at,et,_e)=>{const b=a.map(rt=>{if(rt.id===at){const lt={...rt,[et]:_e};if(et==="quantity"||et==="unitPrice"||et==="isAvailable"){const ot=lt.quantity*lt.unitPrice;lt.vatAmount=lt.isVatNil?0:ot*.15,lt.totalPrice=ot+lt.vatAmount}return lt}return rt});c(b),it(b)},it=async at=>{try{h(!0),await o(s.id,s.orderDate,at)}catch(et){console.error("Failed to auto-save order:",et)}finally{h(!1)}},st=a.filter(at=>at.isAvailable).reduce((at,et)=>at+et.totalPrice,0),nt=e.filter(at=>!a.some(et=>et.templateId===at.id));return jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{size:16,className:"text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-600",children:s.orderDate.toLocaleDateString("en-GB")}),d&&jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-500",children:"Saving..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx("button",{onClick:()=>j(!0),className:"text-green-500 hover:text-green-700 p-1",title:"Add items to order",children:jsxRuntimeExports.jsx(Plus,{size:16})}),jsxRuntimeExports.jsx("button",{onClick:i,className:"text-red-500 hover:text-red-700 p-1",children:jsxRuntimeExports.jsx(Trash2,{size:16})})]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 mb-3",children:a.map(at=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 p-2 rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:at.quantity,onChange:et=>tt(at.id,"quantity",parseInt(et.target.value)||0),className:"w-12 px-1 py-1 text-xs border border-gray-300 rounded text-center bg-white"}),jsxRuntimeExports.jsxs("span",{className:`text-xs ${at.isAvailable?"":"line-through text-gray-400"}`,children:[_(at.templateId)," @",at.unitPrice.toFixed(2)," + ",at.isVatNil?"VAT Nil":`VAT(Rs ${at.vatAmount.toFixed(2)})`]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:`text-xs ${at.isAvailable?"":"line-through text-gray-400"}`,children:["Rs ",at.totalPrice.toFixed(2)]}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:at.isAvailable,onChange:et=>tt(at.id,"isAvailable",et.target.checked),className:"w-4 h-4"})]})]},at.id))}),g&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-4 border-b",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Add Items to Order"}),jsxRuntimeExports.jsx("button",{onClick:()=>j(!1),className:"text-gray-500 hover:text-gray-700",children:jsxRuntimeExports.jsx(X,{size:20})})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 max-h-64 overflow-y-auto",children:nt.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-8 text-gray-500",children:jsxRuntimeExports.jsx("p",{children:"All available items are already in this order"})}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:nt.map(at=>jsxRuntimeExports.jsxs("button",{onClick:()=>$(at),className:"w-full flex items-center justify-between p-3 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors text-left",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-800",children:at.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:["Rs ",at.unitPrice.toFixed(2)]})]},at.id))})})]})}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-3 flex justify-between items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-800",children:"Total Amount:"}),jsxRuntimeExports.jsxs("span",{className:"font-bold text-green-600 text-lg",children:["Rs ",st.toFixed(2)]})]})]})},AddItemModal=({category:s,onClose:e,onAdd:i,itemName:o,setItemName:a,itemPrice:c,setItemPrice:d,isSubmitting:h})=>{const[g,j]=React.useState(!1),_=$=>{if($.preventDefault(),!o.trim()){alert("Please enter an item name");return}const tt=parseFloat(c);if(isNaN(tt)||tt<0){alert("Please enter a valid price");return}i($,g)};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-md overflow-hidden",children:jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Add Item to ",s.name]}),jsxRuntimeExports.jsxs("form",{onSubmit:_,children:[jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item Name"}),jsxRuntimeExports.jsx("input",{type:"text",value:o,onChange:$=>a($.target.value),placeholder:"e.g., Matinee, Palmal, Rothman",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Price (Rs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:c,onChange:$=>d($.target.value),min:"0",step:"0.01",placeholder:"0.00",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsxs("label",{className:"flex items-center",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:g,onChange:$=>j($.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["VAT Nil (Override ",s.vatPercentage,"% VAT)"]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:e,disabled:h,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:h||!o.trim()||!c.trim(),className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:h?"Adding...":"Add Item"})]})]})]})})})},CreateOrderModal=({category:s,itemTemplates:e,onClose:i,onAdd:o})=>{const[a,c]=reactExports.useState(new Date().toISOString().split("T")[0]),[d,h]=reactExports.useState([]),[g,j]=reactExports.useState(!1);React.useEffect(()=>{const tt=e.map(it=>({id:it.id,templateId:it.id,quantity:0,unitPrice:it.unitPrice,vatAmount:0,totalPrice:0,isAvailable:!0}));h(tt)},[e]);const _=async tt=>{tt.preventDefault();const it=d.filter(st=>st.quantity>0);if(it.length===0){alert("Please add at least one item with quantity greater than 0");return}try{j(!0),await o(s.id,new Date(a),it),i()}catch{alert("Failed to create order")}finally{j(!1)}},$=d.reduce((tt,it)=>tt+it.totalPrice,0);return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Create Order - ",s.name]}),jsxRuntimeExports.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:jsxRuntimeExports.jsx(X,{size:24})})]})}),jsxRuntimeExports.jsxs("form",{onSubmit:_,className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:a,onChange:tt=>c(tt.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-medium text-yellow-800 mb-2",children:"No Items Available"}),jsxRuntimeExports.jsx("p",{className:"text-yellow-700",children:"Please add items to this category first before creating an order."})]})}):jsxRuntimeExports.jsx("div",{className:"overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full border-collapse",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{className:"bg-gray-50",children:[jsxRuntimeExports.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Item"}),jsxRuntimeExports.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Quantity"}),jsxRuntimeExports.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Unit Price"}),jsxRuntimeExports.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"VAT (15%)"}),jsxRuntimeExports.jsx("th",{className:"border border-gray-300 px-4 py-2 text-center",children:"Total Price"})]})}),jsxRuntimeExports.jsx("tbody",{children:e.map(tt=>{var it;return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:tt.name}),jsxRuntimeExports.jsx("td",{className:"border border-gray-300 px-4 py-2",children:jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:((it=d.find(st=>st.templateId===tt.id))==null?void 0:it.quantity)||0,onChange:st=>{const nt=parseInt(st.target.value)||0,at=d.findIndex(et=>et.templateId===tt.id);if(nt===0)at>=0&&h(et=>et.filter((_e,b)=>b!==at));else{const et=tt.isVatNil?0:tt.unitPrice*nt*tt.vatPercentage/100,_e=tt.unitPrice*nt+et,b={id:at>=0?d[at].id:Date.now().toString(),templateId:tt.id,quantity:nt,unitPrice:tt.unitPrice,isVatNil:tt.isVatNil,vatAmount:et,totalPrice:_e,isAvailable:!0};at>=0?h(rt=>rt.map((lt,ot)=>ot===at?b:lt)):h(rt=>[...rt,b])}},className:"w-20 px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})}),jsxRuntimeExports.jsxs("td",{className:"border border-gray-300 px-4 py-2 text-right",children:["Rs ",tt.unitPrice.toFixed(2)]}),jsxRuntimeExports.jsx("td",{className:"border border-gray-300 px-4 py-2 text-right",children:(()=>{const st=d.find(nt=>nt.templateId===tt.id);return!st||st.quantity===0?"Rs 0.00":tt.isVatNil?"VAT Nil":`Rs ${st.vatAmount.toFixed(2)}`})()}),jsxRuntimeExports.jsx("td",{className:"border border-gray-300 px-4 py-2 text-right font-semibold",children:(()=>{const st=d.find(nt=>nt.templateId===tt.id);return!st||st.quantity===0?"Rs 0.00":`Rs ${st.totalPrice.toFixed(2)}`})()})]},tt.id)})})]})})}),jsxRuntimeExports.jsxs("div",{className:"p-6 border-t bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-xl font-semibold text-gray-800",children:"Total Amount:"}),jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["Rs ",$.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:i,disabled:g,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:g||e.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:g?"Creating...":"Create Order"})]})]})]})]})})},EditOrderModal=({order:s,itemTemplates:e,onClose:i,onUpdate:o})=>{const[a,c]=reactExports.useState(s.orderDate.toISOString().split("T")[0]),[d,h]=reactExports.useState(s.items),[g,j]=reactExports.useState(!1),_=(st,nt,at)=>{h(et=>et.map(_e=>{if(_e.id===st){const b={..._e,[nt]:at};if(nt==="quantity"||nt==="unitPrice"||nt==="isAvailable"){const rt=b.quantity*b.unitPrice,lt=e.find(ht=>ht.id===b.templateId),ot=rt,dt=lt&&lt.isVatNil?0:ot*(lt&&lt.vatPercentage||15)/100;b.vatAmount=b.isVatNil?0:dt,b.totalPrice=rt+b.vatAmount,b.isAvailable||(b.vatAmount=0,b.totalPrice=0)}return b}return _e}))},$=async st=>{if(st.preventDefault(),e.length===0){alert("Cannot update order: No items available in this category");return}const nt=d.filter(at=>at.quantity>0);if(nt.length===0){alert("Please add at least one item with quantity greater than 0");return}try{j(!0),await o(s.id,new Date(a),nt),i()}catch{alert("Failed to update order")}finally{j(!1)}},tt=d.filter(st=>st.isAvailable).reduce((st,nt)=>st+nt.totalPrice,0),it=st=>{const nt=e.find(at=>at.id===st);return(nt==null?void 0:nt.name)||"Unknown Item"};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-xl shadow-lg w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-6 border-b",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Edit Order"}),jsxRuntimeExports.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:jsxRuntimeExports.jsx(X,{size:24})})]})}),jsxRuntimeExports.jsxs("form",{onSubmit:$,className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:a,onChange:st=>c(st.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-12",children:jsxRuntimeExports.jsxs("div",{className:"bg-red-50 p-6 rounded-lg border border-red-200",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-medium text-red-800 mb-2",children:"No Items Available"}),jsxRuntimeExports.jsx("p",{className:"text-red-700",children:"Cannot edit this order because there are no items in this category."}),jsxRuntimeExports.jsx("button",{onClick:i,className:"mt-4 px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Close"})]})}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:d.map(st=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"number",min:"0",value:st.quantity,onChange:nt=>_(st.id,"quantity",parseInt(nt.target.value)||0),className:"w-16 px-2 py-1 border border-gray-300 rounded text-center"}),jsxRuntimeExports.jsxs("span",{className:`font-medium ${st.isAvailable?"":"line-through text-gray-400"}`,children:["@",st.unitPrice.toFixed(2)," --------------------------------- ",it(st.templateId),st.isVatNil&&jsxRuntimeExports.jsx("span",{className:"ml-2 text-xs bg-yellow-200 text-yellow-800 px-2 py-1 rounded",children:"VAT Nil"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:`text-xs ${st.isAvailable?"":"line-through text-gray-400"}`,children:st.isVatNil?"VAT Nil":`VAT(Rs ${st.vatAmount.toFixed(2)})`}),jsxRuntimeExports.jsxs("span",{className:`font-medium ${st.isAvailable?"":"line-through text-gray-400"}`,children:["Rs ",st.totalPrice.toFixed(2)]}),jsxRuntimeExports.jsx("input",{type:"checkbox",checked:st.isAvailable,onChange:nt=>_(st.id,"isAvailable",nt.target.checked),className:"w-4 h-4"})]})]},st.id))})}),jsxRuntimeExports.jsxs("div",{className:"p-6 border-t bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-4",children:[jsxRuntimeExports.jsx("span",{className:"text-xl font-semibold text-gray-800",children:"Total Amount:"}),jsxRuntimeExports.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["Rs ",tt.toFixed(2)]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:i,disabled:g,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:g||e.length===0,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50",children:g?"Updating...":"Update Order"})]})]})]})]})})},SyncStatusIndicator=()=>{const s={isOnline:navigator.onLine,queueSize:0,lastSync:0,isProcessing:!1},e=()=>s.isOnline?jsxRuntimeExports.jsx(CheckCircle,{size:16,className:"text-green-500"}):jsxRuntimeExports.jsx(WifiOff,{size:16,className:"text-red-500"}),i=()=>s.isOnline?"Online":"Offline",o=()=>s.isOnline?"bg-green-50 border-green-200":"bg-red-50 border-red-200";return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border text-sm ${o()}`,children:[e(),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:i()})]})};function MainAppContent(){const[s,e]=reactExports.useState(()=>localStorage.getItem("activeTab")||"PriceList");useAuth();const i=a=>{e(a),localStorage.setItem("activeTab",a)};usePriceList();const o=()=>{switch(s){case"Over":return jsxRuntimeExports.jsx(OverManagement,{});case"PriceList":return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AddItemForm,{}),jsxRuntimeExports.jsx(SearchBar,{}),jsxRuntimeExports.jsx(PriceList,{})]});case"Order":return jsxRuntimeExports.jsx(OrderManagement,{});case"Credit":return jsxRuntimeExports.jsx(CreditManagement,{});default:return null}};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col w-full",children:[jsxRuntimeExports.jsx("div",{className:"bg-white border-b border-gray-200 p-4 flex items-center",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Golden Price List"}),jsxRuntimeExports.jsx(SyncStatusIndicator,{})]})}),jsxRuntimeExports.jsx(TabNavigation,{activeTab:s,onTabChange:i}),jsxRuntimeExports.jsx("div",{className:"flex-1 w-full",children:o()}),jsxRuntimeExports.jsx(AddToHomescreen,{})]})}function App(){const{user:s,loading:e}=useAuth();return e?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:jsxRuntimeExports.jsx(LoadingSpinner,{message:"Initializing app..."})}):jsxRuntimeExports.jsx(PriceListProvider,{children:jsxRuntimeExports.jsx(OverProvider,{children:jsxRuntimeExports.jsx(OrderProvider,{children:jsxRuntimeExports.jsx(CreditProvider,{children:jsxRuntimeExports.jsx(MainAppContent,{})})})})})}class UpdateManager{constructor(){this.serviceWorker=null,this.isRegistered=!1,this.init()}async init(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/goldenpricelist/sw.js",{scope:"/goldenpricelist/"});this.serviceWorker=e,this.isRegistered=!0,console.log(" Service Worker registered successfully"),e.addEventListener("updatefound",()=>{console.log(" Service Worker update found")})}catch(e){(e instanceof Error?e.message:String(e)).includes("Service Workers are not yet supported on StackBlitz")?console.warn(" Service Workers not supported in this environment (StackBlitz)"):console.error(" Service Worker registration failed:",e)}}async registerBackgroundSync(e){if(!this.serviceWorker||!("sync"in window.ServiceWorkerRegistration.prototype)){console.warn(" Background sync not supported");return}try{await this.serviceWorker.sync.register(e),console.log(` Background sync registered: ${e}`)}catch(i){console.error(` Background sync registration failed for ${e}:`,i)}}get isServiceWorkerRegistered(){return this.isRegistered}get registration(){return this.serviceWorker}}new UpdateManager;client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(App,{})})}));
